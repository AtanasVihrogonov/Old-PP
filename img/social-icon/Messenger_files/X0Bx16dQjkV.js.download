if (self.CavalryLogger) { CavalryLogger.start_js(["N1utt"]); }

__d("MessengerDotComPromotionActionURL",[],(function(a,b,c,d,e,f){e.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"}}),null);
__d("MessengerBusinessPersistentMenuUpdateSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input",type:"MessengerBusinessPersistentMenuUpdateSubscribeData!"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerBusinessPersistentMenuResult",kind:"LinkedField",name:"messenger_business_persistent_menu_update_subscribe",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerNonNestedCTAShareData",kind:"LinkedField",name:"menu_items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"action_link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_mutable_by_server",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logging_token",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fallback_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"messenger_extensions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"webview_height_ratio",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerBusinessPersistentMenuUpdateSubscription",selections:b,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerBusinessPersistentMenuUpdateSubscription",selections:b},params:{id:"2907290672616359",metadata:{subscriptionName:"messenger_business_persistent_menu_update_subscribe"},name:"MessengerBusinessPersistentMenuUpdateSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("MessengerBusinessPersistentMenuUpdateSubscriptionHandlerCustomUserSettingGKQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"pageID",type:"ID!"}],b=[{kind:"Variable",name:"id",variableName:"pageID"}],c={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"gk_name",value:"custom_user_settings"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}],storageKey:'gk_check(gk_name:"custom_user_settings")'}],type:"Page",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerBusinessPersistentMenuUpdateSubscriptionHandlerCustomUserSettingGKQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerBusinessPersistentMenuUpdateSubscriptionHandlerCustomUserSettingGKQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c],storageKey:null}]},params:{id:"2587770514615695",metadata:{},name:"MessengerBusinessPersistentMenuUpdateSubscriptionHandlerCustomUserSettingGKQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MessengerMuteUtils.bs",["fbt","formatDate","DateStrings"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a>0)if(a<86401)return;else{var c=new Date(a*1e3).getDay(),d=c===new Date().getDay(),e=c===new Date().getDay()+1;if(e)return g._("Off until {time} tomorrow",[g._param("time",b("formatDate")(a,"g:ia"))]);else if(d)return g._("Off until {time}",[g._param("time",b("formatDate")(a,"g:ia"))]);else return g._("Off until {time} {weekday name}",[g._param("time",b("formatDate")(a,"g:ia")),g._param("weekday name",b("DateStrings").getWeekdayName(c))])}else if(a===-1)return g._("Off indefinitely");else return}function c(a,b){if(a)if(b)return g._("Unmute notifications");else return g._("Mute notifications");else if(b)return g._("Unmute conversation");else return g._("Mute conversation")}f.mutedUntilLabel=a;f.muteActionLabel=c}),null);
__d("EmojiDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("EmojiActions",["EmojiDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({CHANGE_CURRENT_CATEGORY:null,CHANGE_EMOJI_COLOR:null,EMOJI_COLOR_READY:null,GET_EMOJI_COLOR:null,TRAY_DATA_READY:null,UPDATE_TRAY_DATA:null});var g={Types:a,loadedTrayData:function(){b("EmojiDispatcher").dispatch({type:g.Types.TRAY_DATA_READY})},updateTrayData:function(){b("EmojiDispatcher").dispatch({type:g.Types.UPDATE_TRAY_DATA})},changeEmojiColor:function(a){b("EmojiDispatcher").dispatch({type:g.Types.CHANGE_EMOJI_COLOR,color:a})},changeCurrentCategory:function(a){b("EmojiDispatcher").dispatch({type:g.Types.CHANGE_CURRENT_CATEGORY,currentCategory:a})},getEmojiColor:function(){b("EmojiDispatcher").dispatch({type:g.Types.GET_EMOJI_COLOR})},emojiColorReady:function(a){b("EmojiDispatcher").dispatch({type:g.Types.EMOJI_COLOR_READY,color:a})}};e.exports=g}),null);
__d("EmojiServerRequests",["Promise","AsyncRequest","XMessagingGetEmojiRecentUsageController"],(function(a,b,c,d,e,f){"use strict";a={fetchTrayData:function(a){return g(b("XMessagingGetEmojiRecentUsageController").getURIBuilder().getURI(),a,!0)}};function g(a,c,d){return new(b("Promise"))(function(c,e){return new(b("AsyncRequest"))(a).setHandler(function(a){return c(a.getPayload())}).setAllowCrossPageTransition(d).send()}).then(c)}e.exports=a}),null);
__d("EmojiState",["fbt","AsyncRequest","EmojiActions","EmojiServerRequests","MessengerSupportedEmojiUtils","XMessagingGetEmojiColorPrefController","XMessagingSetEmojiColorPrefController","promiseDone","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null,j;a={onTrayDataReady:function(a){j||(j=b("EmojiServerRequests").fetchTrayData(function(a){i=a})),b("promiseDone")(j,function(){a(),b("EmojiActions").loadedTrayData()})},getEmojiColor:function(){var a=b("XMessagingGetEmojiColorPrefController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).setMethod("POST").setAllowCrossPageTransition(!0).setHandler(function(a){b("EmojiActions").emojiColorReady(a.payload)}).send()},changeEmojiColor:function(a){var c=b("XMessagingSetEmojiColorPrefController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({color:a}).send()},addMRUCategory:function(){if(i){var a=i.map(function(a){return b("MessengerSupportedEmojiUtils").getSupportedEmojiCodesArray(a)}).filter(function(a){return!!a});h={name:g._("Recently Sent"),emojis:a,icon:[128340]};b("setImmediate")(b("EmojiActions").updateTrayData);i=null}},_addRecentlyUsedEmoji:function(a){var c=h&&h.emojis;if(!c)return;var d=function(b){var d=a[b];for(var b=0;b<c.length;++b)if(c[b].length==d.length&&c[b].every(function(a,b){return a===d[b]})){c.splice(b,1);break}c.unshift(d)};for(var e=0;e<a.length;++e)d(e);b("EmojiActions").updateTrayData()},getMRUCategory:function(){h||this.addMRUCategory();return h},updateRecentlyUsed:function(a){if(!h){this.addMRUCategory();return}this._addRecentlyUsedEmoji(a)}};e.exports=a}),null);
__d("EmojiStateStore",["EmojiActions","EmojiDispatcher","EmojiState","FluxStore"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("EmojiDispatcher"))||this;b("EmojiState").getEmojiColor();c.$EmojiStateStore2=!1;return c}var d=c.prototype;d.getState=function(){var a=b("EmojiState").getMRUCategory();return{currentCategory:this.$EmojiStateStore4,emojiColor:this.$EmojiStateStore3,mruCategory:[a],threadID:this.$EmojiStateStore1,trayDataReady:this.$EmojiStateStore2}};d.__onDispatch=function(a){var c=b("EmojiActions").Types;switch(a.type){case c.GET_EMOJI_COLOR:b("EmojiState").getEmojiColor();break;case c.EMOJI_COLOR_READY:this.$EmojiStateStore3=a.color;break;case c.CHANGE_EMOJI_COLOR:b("EmojiState").changeEmojiColor(a.color);this.$EmojiStateStore3=a.color;break;case c.CHANGE_CURRENT_CATEGORY:this.$EmojiStateStore4=a.currentCategory;break;case c.UPDATE_TRAY_DATA:break;case c.TRAY_DATA_READY:this.$EmojiStateStore2=!0;break}this.__emitChange()};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("StartVideoChatLinkCall",["RelayFBDefaultEnvironment","RTWebPreCallContextSingleton","randomZenonCallID"],(function(a,b,c,d,e,f){"use strict";var g=b("RTWebPreCallContextSingleton").create({relayEnvironment:b("RelayFBDefaultEnvironment")});a={startCall:function(a){if(g){var c=g.callWindowController;c=c.initCall({context:{callID:b("randomZenonCallID")(),intent:"start or join",invitees:[],existingCall:null},mediaType:"video",nonce:"",joinContext:{linkUrl:a,type:"link"}});a=c[0];c[1];return a}else return null}};e.exports=a}),null);
__d("NewVideoChatLinkCall",["regeneratorRuntime","MessengerCreateVideoChatLinkCallMutation","RelayFBEnvironment","StartVideoChatLinkCall","VideoChatLinksUserActionsMultiplexLogger"],(function(a,b,c,d,e,f){"use strict";a={start:function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:h(a,c,"meetup_attempt_create_meetup");e.prev=1;e.next=4;return b("regeneratorRuntime").awrap(b("MessengerCreateVideoChatLinkCallMutation")(b("RelayFBEnvironment")));case 4:d=e.sent;e.next=11;break;case 7:e.prev=7;e.t0=e["catch"](1);i(a,c,e.t0);throw e.t0;case 11:if(!(d!=null)){e.next=16;break}h(a,c,"meetup_create_success");return e.abrupt("return",b("StartVideoChatLinkCall").startCall(d));case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},null,this,[[1,7]])}};function g(a,c){return new(b("VideoChatLinksUserActionsMultiplexLogger"))().setSurface(a).setComponent(c)}function h(a,b,c){g(a,b).setEvent(c).log()}function i(a,b,c){h(a,b,"meetup_create_failed"),g(a,b).setEvent("error").setErrorType("LinkCreationError "+c.name).setErrorDetails(c.description).log()}e.exports=a}),null);
__d("MNCoWatchEventTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MNCoWatchEventLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MNCoWatchEventLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MNCoWatchEventLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCallID=function(a){this.$1.call_id=a;return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setErrorCode=function(a){this.$1.error_code=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIsCowatchActive=function(a){this.$1.is_cowatch_active=a;return this};c.setIsFullscreenMode=function(a){this.$1.is_fullscreen_mode=a;return this};c.setIsJoinPayloadReceivedWhileBackgrounded=function(a){this.$1.is_join_payload_received_while_backgrounded=a;return this};c.setIsRtcActive=function(a){this.$1.is_rtc_active=a;return this};c.setJoinPayloadReceivedCallType=function(a){this.$1.join_payload_received_call_type=a;return this};c.setJoinPayloadReceivedCallUI=function(a){this.$1.join_payload_received_call_ui=a;return this};c.setJoinPayloadReceivedSource=function(a){this.$1.join_payload_received_source=a;return this};c.setLayoutMode=function(a){this.$1.layout_mode=a;return this};c.setLivingRoomID=function(a){this.$1.living_room_id=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setOrientation=function(a){this.$1.orientation=a;return this};c.setPigeonReservedKeywordLogType=function(a){this.$1.pigeon_reserved_keyword_log_type=a;return this};c.setPigeonReservedKeywordModule=function(a){this.$1.pigeon_reserved_keyword_module=a;return this};c.setRadioType=function(a){this.$1.radio_type=a;return this};c.setReactionType=function(a){this.$1.reaction_type=a;return this};c.setRtcCowatchEligibleParticipantCount=function(a){this.$1.rtc_cowatch_eligible_participant_count=a;return this};c.setRtcParticipantCount=function(a){this.$1.rtc_participant_count=a;return this};c.setRtcTabFailureReason=function(a){this.$1.rtc_tab_failure_reason=a;return this};c.setSamplingFrequency=function(a){this.$1.sampling_frequency=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setVideoTab=function(a){this.$1.video_tab=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={call_id:!0,entry_point:!0,error_code:!0,event:!0,is_cowatch_active:!0,is_fullscreen_mode:!0,is_join_payload_received_while_backgrounded:!0,is_rtc_active:!0,join_payload_received_call_type:!0,join_payload_received_call_ui:!0,join_payload_received_source:!0,layout_mode:!0,living_room_id:!0,name:!0,orientation:!0,pigeon_reserved_keyword_log_type:!0,pigeon_reserved_keyword_module:!0,radio_type:!0,reaction_type:!0,rtc_cowatch_eligible_participant_count:!0,rtc_participant_count:!0,rtc_tab_failure_reason:!0,sampling_frequency:!0,session_id:!0,thread_id:!0,time:!0,video_id:!0,video_tab:!0,weight:!0};e.exports=a}),null);
__d("MeasurePeopleTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={time:!0,weight:!0};e.exports=a}),null);
__d("MessengerBotsWebTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCount=function(a){this.$1.count=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIndex=function(a){this.$1.index=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPayload=function(a){this.$1.payload=a;return this};c.setQrContentType=function(a){this.$1.qr_content_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTitle=function(a){this.$1.title=a;return this};c.setTitles=function(a){this.$1.titles=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setType=function(a){this.$1.type=a;return this};c.setURL=function(a){this.$1.url=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={count:!0,event:!0,index:!0,page_id:!0,payload:!0,qr_content_type:!0,time:!0,title:!0,titles:!0,type:!0,url:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerPlatformClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setDeviceid=function(a){this.$1.deviceid=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setIsemployee=function(a){this.$1.isemployee=a;return this};c.setLoggingToken=function(a){this.$1.logging_token=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,extra_client_data:!0,isemployee:!0,logging_token:!0,name:!0,rawclienttime:!0,sessionid:!0,thread_id:!0,time:!0,weight:!0};e.exports=a}),null);
__d("WorkChatSuggestionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkChatSuggestionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkChatSuggestionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkChatSuggestionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setSuggestionType=function(a){this.$1.suggestion_type=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={app_id:!0,message_id:!0,suggestion_type:!0,thread_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("ChatFlyoutPlaceholder.react",["React","XUISpinner.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h={padding:"30px",textAlign:"center"};a=function(){return g.jsx("div",{style:h,children:g.jsx(b("XUISpinner.react"),{size:"large"})})};e.exports=a}),null);
__d("ChatPageComposerNullState.react",["cx","fbt","Link.react","MNCommerceCallToActionHandlerMap","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){switch(this.props.cta.action_type){case 1:return this.$1();case 4:default:return this.$2()}};d.$1=function(){return b("MNCommerceCallToActionHandlerMap").getHandler(this.props.cta.action_link).setThreadID(this.props.threadID).setOnClickHook(this.props.onClick).renderForNativeLink(this.props.cta,"_2xh6 _2xh7"+(this.props.disabled?" _5vsu":""))};d.$2=function(){return i.jsx(b("Link.react"),{className:"_2xh6 _2xh7"+(this.props.disabled?" _5vsu":""),onClick:this.props.onClick,children:h._("{name}",[h._param("name",this.props.cta.title)])})};return c}(i.PureComponent);e.exports=a}),null);
__d("CustomizeThreadThemeUtil",["CurrentUser","MessengerThreadThemesWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){h(a)}function c(a){h(a)}function h(a){var c=b("CurrentUser").isWorkUser()?"WORKPLACE_VERSION0":"M4_VERSION0_WITH_GKS";g[c]?a(g[c]):b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadThemesWebGraphQLQuery"))({version:c})),function(b){if(b&&b.messenger_thread_themes&&Array.isArray(b.messenger_thread_themes)){var d=[];b.messenger_thread_themes.forEach(function(a){if(!a.id)return;if(!a.fallback_color)return;if(!a.accessibility_label)return;a={id:a.id,fallback_color:a.fallback_color,accessibility_label:a.accessibility_label,gradient_colors:a.gradient_colors,icon_uri:(a=a==null?void 0:(a=a.icon_asset)==null?void 0:(a=a.image)==null?void 0:a.uri)!=null?a:void 0};d.push(a)});g[c]=d;a(d)}})}e.exports={fetchThemesForChat:a,fetchThemesForMessenger:c}}),null);
__d("MessengerApprovalQueueUtils",["MercuryIDs","MessengerAdminGroupUtils","MessengerParticipants.re","immutable"],(function(a,b,c,d,e,f){"use strict";a={getApprovalQueueParticipants:function(a,c){var d=this;if(!a)return;if(b("MessengerAdminGroupUtils").isAdminRequired(a)){var e=a.group_approval_queue&&a.group_approval_queue.map(function(a){return[b("MercuryIDs").getParticipantIDFromUserID(a.requester.id),a]}),f=e&&new Map(e);f&&b("MessengerParticipants.re").getMulti(Array.from(f.keys()),function(a){a=Object.values(a);a=a;c(b("immutable").Map(a.map(function(a){return[a.id,d._constructApprovalRequestInfo(a,f)]})))})}else a.approval_queue_ids&&b("MessengerParticipants.re").getMulti(a.approval_queue_ids,function(a){c(b("immutable").Map(a))})},_constructApprovalRequestInfo:function(a,b){b=b.get(a.id);return{fbid:a.fbid,id:a.id,image_src:a.image_src,is_messenger_user:!!a.is_messenger_user,name:a.name,inviter_id:b&&b.inviter.id,requester_id:b&&b.requester.id,request_source:b&&Number(b.request_source),request_timestamp:b&&b.request_timestamp}}};e.exports=a}),null);
__d("MessengerNotificationBanner.react",["cx","ix","AsyncRequest","Bootloader","CurrentUser","Image.react","MessengerButtonReact.re","MessengerDotComPromotionActionURL","MessengerSettingsActions","MessengerSignals.re","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","goURI","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerButtonReact.re").make,j=b("React"),k=h("86832"),l=h("86833"),m=h("600634");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={bannerClosed:!1},d.$5=function(){d.$6(),d.props.promotionID!=null?(new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","primary").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send(),d.props.primaryActionURI===b("MessengerDotComPromotionActionURL").turn_on_notification?b("MessengerSettingsActions").changeDesktopNotifs(!0):d.props.primaryActionType==="dialog_url"?b("Bootloader").loadModules(["AsyncDialog"],function(a){a.send(new(b("AsyncRequest"))().setURI(b("nullthrows")(d.props.primaryActionURI)))},"MessengerNotificationBanner.react"):window.open(d.props.primaryActionURI)):d.props.primaryActionURI!=null?b("goURI")(d.props.primaryActionURI,!0):d.props.primaryActionCallback&&d.props.primaryActionCallback()},d.$2=function(){d.$6(),d.props.promotionID!=null&&new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.promotionID==null&&this.setState({bannerClosed:!1})};d.componentDidMount=function(){if(this.$1()||this.props.promotionID==null||b("CurrentUser").isWorkUser())return;new(b("AsyncRequest"))().setURI(b("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",this.props.promotionID).setStringToStringMap("instance_log_data",this.props.instanceLogData).getURI()).send()};d.componentDidUpdate=function(){window.dispatchEvent(new Event("resize"))};d.render=function(){return this.$1()?null:j.jsxs("div",{className:"_2cij",children:[j.jsx(b("Image.react"),{className:"_2cik",onClick:this.$2,src:k}),j.jsx(b("Image.react"),{className:"_2cil",src:this.$3()}),this.props.promotionContent," ",this.$4()]})};d.$1=function(){return this.state.bannerClosed};d.$3=function(){return(this.props.primaryActionURI||"").indexOf("/privacy/response")>-1?m:l};d.$4=function(){return j.jsx(i,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$5,type:"primary"})};d.$6=function(){this.setState({bannerClosed:!0},function(){b("MessengerSignals.re").resize()})};return c}(j.Component);e.exports=a}),null);
__d("MessengerRefreshPrompt",["fbt","CurrentUser","MessengerPromotionDataActions","Visibility","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3*60*60,i=1e3*60*60*24*3;a=function(){var a=Date.now();b("setIntervalAcrossTransitions")(function(){var c=b("CurrentUser").isWorkUser()?g._("A new version of Workplace Chat is available."):g._("A new version of Messenger is available.");Date.now()-a>i&&b("Visibility").once(b("Visibility").VISIBLE,function(){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:c,primaryActionTitle:g._("Refresh"),instanceLogData:{},primaryActionURI:window.location.href}),a=Date.now()})},h)};e.exports=a}),null);
__d("MessengerBanner.react",["MessengerNotificationBanner.react","MessengerPromotionDataDispatcher","MessengerPromotionDataStore","MessengerRefreshPrompt","React","SubscriptionsHandler","WorkplaceChatUpsellBanner.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={promotionData:b("MessengerPromotionDataStore").getPromotionData()},d.subscriptions=new(b("SubscriptionsHandler"))(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("MessengerRefreshPrompt")();b("MessengerPromotionDataDispatcher").explicitlyRegisterStores([b("MessengerPromotionDataStore")]);this.subscriptions.addSubscriptions(b("MessengerPromotionDataStore").addListener(function(){a.setState({promotionData:b("MessengerPromotionDataStore").getPromotionData()})}))};d.componentWillUnmount=function(){this.subscriptions.release()};d.render=function(){var a=this.state.promotionData;if(this.props.showWorkchatUpsellBanner)return g.jsx(b("WorkplaceChatUpsellBanner.react"),{});return a?g.jsx(b("MessengerNotificationBanner.react"),{promotionID:a.promotionID,promotionContent:a.promotionContent,primaryActionTitle:a.primaryActionTitle,primaryActionType:a.primaryActionType,primaryActionURI:a.primaryActionURI,primaryActionCallback:a.primaryActionCallback,instanceLogData:a.instanceLogData}):null};return c}(g.PureComponent);e.exports=a}),null);
__d("MessengerBrowserAlerts",["fbt","Bootloader","CurrentUser","DocumentTitle","Event","FavIcon","ImageSourceRequest","ImageSourceType","MercuryAttachmentSnippetRenderer","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryNotificationRenderer","MercuryThreadInfo","MercuryThreadInformer","MessagingTag","MessengerActions","MessengerConfig","MessengerDesktopNotifications","MessengerFaviconUrls","MessengerParticipants.bs","MessengerSettingsStore","MessengerState.bs","MessengerURIStore","Sound","UserActivity","WorkplaceChatHelper","clearInterval","gkx","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=8e3,i=80,j=3,k=6e5,l=new Map(),m=null,n=null;function o(){l=new Map()}function p(a){var c=b("MessengerSettingsStore").getSettings().sound_enabled,d=a.action_type=="ma-type:log-message";d=d&&(a.log_message_type=="log:phone-call"||a.log_message_type=="log:video-call")&&a.log_message_data.answered;c&&!d&&b("Sound").play([b("MessengerConfig")["sound.notif_ogg_url"],b("MessengerConfig")["sound.notif_mp3_url"]],a.timestamp,!1)}function q(a,c,d){if(!a.snippet_sender)return;var e=l.get(a.thread_id)||0;if(e>=j)return;l.set(a.thread_id,e+1);b("MessengerParticipants.bs").get(a.snippet_sender,function(e){var f=a.snippet,h=a.custom_nickname&&a.custom_nickname[b("MercuryIDs").getUserIDFromParticipantID(e.id)],i=h?h:e.short_name;!f&&a.snippet_attachments&&a.snippet_attachments.length>0&&(f=b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(a.snippet_attachments),!1,i,a.snippet_attachments));h=h?h:e.name;a.is_canonical||(h=a.name?g._("{sender's name} to {group name}",[g._param("sender's name",i),g._param("group name",a.name)]):g._("{sender's name} to your group",[g._param("sender's name",i)]));b("MessengerDesktopNotifications").showNotification({title:h,body:f,icon:a.image_src||c||e.big_image_src||e.image_src,closeTime:null,onClick:function(){window.focus(),b("MessengerActions").selectThread(a.thread_id)},tag:d.message_id,silent:!b("MessengerSettingsStore").getSettings().sound_enabled});b("MessengerDesktopNotifications").hasDefaultSound()||p(d)})}a={_shouldUpdateTitle:!0,init:function(a){var c=this;this._viewer=a;this._threadInformer=b("MercuryThreadInformer").getForFBID(this._viewer);this._highResImageMap=new Map();this._shouldMarkAllAsSeenWhenActive=!0;this._shouldUpdateFavicon=!0;this._enabled=!0;b("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(a){c._availabilityStatusStore=a},"MessengerBrowserAlerts"));b("Event").listen(window,"focus",function(){o(),b("clearInterval")(m)});b("Event").listen(window,"blur",function(){m=b("setIntervalAcrossTransitions")(o,k)});this._threadInformer.subscribe("messages-received",function(a,b){for(var d in b)b[d].forEach(function(a){c.handleMessageReceived(a)})});this._threadInformer.subscribe("unseen-updated",this._handleUnseenUpdated.bind(this));this._threadInformer.subscribe("unread-updated",this._handleUnseenUpdated.bind(this))},disable:function(){this._enabled=!1},enable:function(){this._enabled=!0},disableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!1},enableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!0},disableFaviconUpdate:function(){this._shouldUpdateFavicon=!1},disableTitleUpdate:function(){this._shouldUpdateTitle=!1},enableTitleUpdate:function(){this._shouldUpdateTitle=!0},handleMessageReceived:function(a){var c=this;if(!this._enabled)return;var d=b("WorkplaceChatHelper").getIsSystemDoNotDisturbOn();d=d||this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(d||a.author===this._viewer||!a.is_unread||a.thread_id===b("MessengerURIStore").getState().activeThreadID&&b("UserActivity").isOnTab()||a.folder!=b("MessagingTag").INBOX&&a.folder!=b("MessagingTag").ARCHIVED)return;b("MessengerState.bs").getThreadMeta(this._viewer,a.thread_id,function(d){if(b("MercuryThreadInfo").isMuted(d))if(!b("MercuryThreadInfo").areMentionsMuted(d)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===c._viewer}))return}else return;var e=b("CurrentUser").getID();b("MessengerState.bs").compute(e,function(f){f=f.blocked_ids;if(b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(e,f,d))return;b("MessengerSettingsStore").getSettings().desktopNotifsEnabled&&!b("UserActivity").isOnTab()?c._attemptDesktopNotification(d,a):a.log_message_type!=="log:unsubscribe"&&p(a);b("CurrentUser").isWorkUser()?f=b("gkx")("997564")?b("MessengerState.bs").getUnreadThreadCount(c._viewer):b("MessengerState.bs").getUnseenCount(c._viewer):f=b("MessengerState.bs").getUnseenUnreadCount(c._viewer);!b("UserActivity").isOnTab()&&f>0&&b("MercuryNotificationRenderer").renderDocumentTitle(a.thread_id,function(a){!n&&c._shouldUpdateTitle&&(n=b("DocumentTitle").blink(a))})})})},showRTCNotification:function(a,c){var d=this;if(b("UserActivity").isOnTab()){c(null);return}var e=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(e){c(null);return}this._highResImageMap||(this._highResImageMap=new Map());var f=a.peerID;if(!this._highResImageMap.has(f)){e=function(b,e){d._highResImageMap.set(f.toString(),e.uri),d._displayRTCDesktopNotification(e.uri,a,c)};new(b("ImageSourceRequest"))().setFBID(f).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode("p").setCallback(e.bind(null,f)).send()}else this._displayRTCDesktopNotification(this._highResImageMap.get(f),a,c)},_updateFavicon:function(a){if(!this._shouldUpdateFavicon)return;a===0?b("FavIcon").set(b("MessengerFaviconUrls")["default"]):b("FavIcon").set(b("MessengerFaviconUrls").unread)},_displayRTCDesktopNotification:function(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(c.peerID);b("MessengerParticipants.bs").get(e,function(f){var i;c.isVideoCall?c.isGroupCall?i=g._("Incoming Group Video Chat"):i=g._("Incoming Video Call"):c.isGroupCall?i=g._("Incoming Group Call"):i=g._("Incoming call");f=g._("{caller} is calling you. Click to answer.",[g._param("caller",f.short_name)]);e=b("MessengerDesktopNotifications").showNotification({title:i,body:f,icon:a,closeTime:h,onShow:function(){b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logPreCallImpression({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),surface:"desktop_notification",component:"accept_button"})},"MessengerBrowserAlerts")},onClick:function(){window.focus(),b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logPreCallClick({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),surface:"desktop_notification",component:"accept_button"})},"MessengerBrowserAlerts"),c.onNotificationClicked()}});d(e)})},_handleUnseenUpdated:function(){var a=this;if(!this._enabled)return;var c=b("MessengerState.bs").getUnseenUnreadCount(this._viewer);if(this._shouldMarkAllAsSeenWhenActive&&b("UserActivity").isOnTab()&&b("UserActivity").isActive()&&c>0){this._updateFavicon(0);b("MessengerState.bs").markAsSeen(this._viewer);return}this._shouldUpdateTitle&&b("DocumentTitle").badge(c);this._updateFavicon(c);n&&c===0&&(n.stop(),n=null);this._shouldMarkAllAsSeenWhenActive&&!this._focusToken&&c>0&&(this._focusToken=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(a._focusToken&&a._focusToken.unsubscribe(),a._focusToken=null,b("MessengerState.bs").markAsSeen(a._viewer))}))},_attemptDesktopNotification:function(a,c){var d=this;if(!a.snippet_sender)return;if(!this._highResImageMap.has(a.snippet_sender)){var e=function(b,e){d._highResImageMap.set(a.snippet_sender,e.uri),q(a,e.uri,c)};new(b("ImageSourceRequest"))().setFBID(b("MercuryIDs").getUserIDFromParticipantID(a.snippet_sender)).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode("p").setCallback(e.bind(null,a.snippet_sender)).send()}else q(a,this._highResImageMap.get(a.snippet_sender),c)}};e.exports=a}),null);
__d("MessengerEagerThreadLoader",["MercuryThreadInformer","MessengerConfig","MessengerState.re","Run"],(function(a,b,c,d,e,f){"use strict";var g=10,h=b("MessengerConfig").MessageLoadCount,i=!1,j=null;function k(a,c){if(b("MessengerState.re").hasLoadedNMessages(a,c,2))return;b("MessengerState.re").getThreadMessagesRange(a,c,0,h,function(){})}a={subscribe:function(a){var c=b("MercuryThreadInformer").get();j=c.subscribe("threadlist-updated",function(c,d){if(!i)b("Run").onAfterLoad(function(){d.slice(0,g).concat(b("MessengerState.re").getPinnedThreadlist(a)).map(function(b){k(a,b)})}),i=!0;else if(d.length>0){c=b("MessengerState.re").getThreadMetaNow(a,d[0]);c&&c.unread_count>0&&k(a,d[0])}})},unsubscribe:function(){var a=b("MercuryThreadInformer").get();a.unsubscribe(j);j=null}};e.exports=a}),null);
__d("MessengerInterstitialPromoDialog.react",["cx","fbt","ix","AsyncRequest","Bootloader","CurrentUser","Image.react","MessengerButtonReact.re","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerSignals.re","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","goURI","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerButtonReact.re").make,k=b("MessengerDialogHeaderReact.re").make,l=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={bannerClosed:!1},d.$4=function(a,c,e){return function(){d.$5(),d.props.promotionID!=null?(new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","primary").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send(),a==="dialog_url"?b("Bootloader").loadModules(["AsyncDialog"],function(a){a.send(new(b("AsyncRequest"))().setURI(b("nullthrows")(c)))},"MessengerInterstitialPromoDialog.react"):window.open(c)):c!=null?b("goURI")(c,!0):e&&e()}},d.$2=function(){d.$5(),d.props.promotionID!=null&&new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.promotionID==null&&this.setState({bannerClosed:!1})};d.componentDidMount=function(){if(this.$1()||this.props.promotionID==null||b("CurrentUser").isWorkUser())return;new(b("AsyncRequest"))().setURI(b("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",this.props.promotionID).setStringToStringMap("instance_log_data",this.props.instanceLogData).getURI()).send()};d.componentDidUpdate=function(){window.dispatchEvent(new Event("resize"))};d.render=function(){return this.$1()?null:l.jsxs(b("MessengerDialog.react"),{className:"_93yd",width:500,children:[l.jsx(b("Image.react"),{className:"_93ye",src:i("1428013")}),l.jsx(k,{children:this.props.promotionTitle}),l.jsx(b("MessengerDialogBody.react"),{className:"_93yf",children:l.jsxs("ul",{children:[l.jsxs("li",{className:"_93yg",children:[l.jsx(b("Image.react"),{className:"_93yh",src:i("1416922")}),l.jsxs("div",{className:"_93yi",children:[l.jsx("span",{className:"_93yj",children:h._("Hang out in dark mode")}),h._("Give your eyes some rest with the sleek new look")]})]}),l.jsxs("li",{className:"_93yg",children:[l.jsx(b("Image.react"),{className:"_93yh",src:i("1428068")}),l.jsxs("div",{className:"_93yi",children:[l.jsx("span",{className:"_93yj",children:h._("Stay in touch with real-time notificaitons")}),h._("Don\u2019t miss a message, even when you aren\u2019t on facebook.com")]})]}),l.jsxs("li",{className:"_93yg",children:[l.jsx(b("Image.react"),{className:"_93yh",src:i("1416923")}),l.jsxs("div",{className:"_93yi",children:[l.jsx("span",{className:"_93yj",children:h._("Calling your friends is one tap away")}),h._("No need to open a browser to make or answer calls")]})]})]})}),l.jsxs(b("MessengerDialogFooter.react"),{children:[l.jsx(j,{className:"_93yk",label:h._("Not Now"),onClick:this.$2,type:"secondary"}),this.$3()]})]})};d.$1=function(){return this.state.bannerClosed};d.$3=function(){return l.jsx(j,{className:"_93yl",label:this.props.primaryActionTitle,onClick:this.$4(this.props.primaryActionType,this.props.primaryActionURI,this.props.primaryActionCallback),type:"primary"})};d.$5=function(){this.setState({bannerClosed:!0},function(){b("MessengerSignals.re").resize()})};return c}(l.Component);e.exports=a}),null);
__d("MessengerInterstitialPromotion.react",["MessengerDialogs.re","MessengerInterstitialPromoDialog.react","MessengerPromotionDataDispatcher","MessengerPromotionDataStore","MessengerRefreshPrompt","React","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=!1;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={promotionData:b("MessengerPromotionDataStore").getInterstitialPromotionData()},d.subscriptions=new(b("SubscriptionsHandler"))(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("MessengerRefreshPrompt")();b("MessengerPromotionDataDispatcher").explicitlyRegisterStores([b("MessengerPromotionDataStore")]);this.subscriptions.addSubscriptions(b("MessengerPromotionDataStore").addListener(function(){a.setState({promotionData:b("MessengerPromotionDataStore").getInterstitialPromotionData()},function(){if(!h&&a.state.promotionData){h=!0;var c=a.state.promotionData;b("MessengerDialogs.re").showDialog(function(){return g.jsx(b("MessengerInterstitialPromoDialog.react"),{promotionID:c.promotionID,promotionTitle:c.promotionTitle,promotionContent:c.promotionContent,primaryActionTitle:c.primaryActionTitle,primaryActionType:c.primaryActionType,primaryActionURI:c.primaryActionURI,primaryActionCallback:c.primaryActionCallback,secondaryActionTitle:c.secondaryActionTitle,secondaryActionType:c.secondaryActionType,secondaryActionURI:c.secondaryActionURI,secondaryActionCallback:c.secondaryActionCallback,instanceLogData:c.instanceLogData})})}})}))};d.componentWillUnmount=function(){this.subscriptions.release()};d.render=function(){return null};return c}(g.PureComponent);e.exports=a}),null);
__d("MessengerNonMount",["ChannelConnection","ChannelManager","CurrentUser","MercuryDeliveryState","MercuryServerPayloadPreprocessor","MercurySyncEnvironment","MercuryThreadIDMap","MercuryWorkContextInformation","MessengerActions","MessengerAttributionTagsStore","MessengerBrowserAlerts","MessengerComposerActions","MessengerComposerStore","MessengerDialogs.bs","MessengerEagerThreadLoader","MessengerInitialDataTransformer.bs","MessengerMDotMeReferralStore","MessengerParticipants.bs","MessengerRTCMessageHandler","MessengerSearchActions","MessengerSearchConfirmationDialogReact.bs","MessengerSearchStore","MessengerSettingsStore","MessengerState.bs","MessengerThreadSearchStore","MessengerURIConstants","MessengerURISerializer","MessengerURIStore","MessengerView","MNPlatformTagsDataManager","React","URI","gkx","goURI","PageHooks"],(function(a,b,c,d,e,f){"use strict";var g,h=b("MessengerSearchConfirmationDialogReact.bs").jsComponent,i=b("React");b("PageHooks");b("ChannelManager").startChannelManager();d={initStoresAndListeners:a,dispatchInitialData:c,seedInitialData:l,triggerInitialURI:m};function a(a){j(a),k(a)}function j(a){b("MercuryDeliveryState").getForFBID(a),b("MessengerParticipants.bs"),b("MessengerState.bs"),b("CurrentUser").isWorkUser()&&b("MercuryWorkContextInformation").getForFBID(a),b("MessengerAttributionTagsStore"),b("MessengerComposerStore"),b("MessengerMDotMeReferralStore"),b("MessengerSearchStore").getForFBID(a),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore").getForFBID(a)}function k(a){b("MercurySyncEnvironment").setUp(),b("MessengerBrowserAlerts").init(a),b("MessengerRTCMessageHandler").init(),b("ChannelConnection"),b("gkx")("811069")&&b("MessengerEagerThreadLoader").subscribe(a)}function l(a,c){a=b("MercuryServerPayloadPreprocessor").getForFBID(a);if(c.graphqlPayload){var d=b("MessengerInitialDataTransformer.bs").transform(c.graphqlPayload);d=d[0];d.message_blocked_ids=c.mercuryPayload.message_blocked_ids;d.message_ignored_ids=c.mercuryPayload.message_ignored_ids;a.handleUpdate(d)}else a.handleUpdate(c.mercuryPayload)}function m(a,c){a=c.lastReadThreadKey;if(c.graphqlPayload){var d=b("MessengerInitialDataTransformer.bs").transform(c.graphqlPayload);a=d[1]}d=new(g||(g=b("URI")))(window.location.href);var e=b("MessengerURISerializer").deserialize(d);if(e.query){var f=e.masterView===b("MessengerView").MASTER.SEARCH||e.masterView===b("MessengerView").MASTER.SEARCH_MESSAGES,j=e.query;e.query=null;e.masterView=b("MessengerView").MASTER.RECENT;b("MessengerDialogs.bs").showDialog(function(){return i.jsx(h,{term:j,onSearch:function(){f?b("MessengerSearchActions").changeQueryAll(j):b("MessengerSearchActions").changeQuery(j)}})})}b("goURI")(b("MessengerURISerializer").serialize(e),!1,!0);if(d.getPath().match(b("MessengerURIConstants").COMPOSE_SUBPATH+"/?$"))return;if(d.getPath().match(b("MessengerURIConstants").GALLERY_PATH+"/?$")&&b("gkx")("1185153"))return;if(e.masterView===b("MessengerView").MASTER.PAYMENT)return;b("MessengerActions").changeMDotMeReferral(c.mDotMeReferral,c.mDotMeReferralThreadKey);var k=b("MercuryThreadIDMap").get();e=e.threadKey?k.getClientIDFromServerIDNow(e.threadKey):k.getClientIDFromServerIDNow(a);e?(b("MessengerComposerActions").exitComposeState(),b("MessengerActions").selectThread(e)):d.getPath()==="/"&&b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(c.messagingSource,c.mDotMeReferralThreadKey&&c.mDotMeReferralThreadKey.toString())}function c(a,b){l(a,b),m(a,b)}e.exports=d}),null);
__d("MessengerBugNub.react",["cx","fbt","ix","requireCond","AsyncRequest","CurrentUser","Image.react","Link.react","MessengerEnvironment","MessengerMenu.react","MessengerPopoverMenu.react","React","Tooltip","URI","WorkModeConfig","XSettingsEmployeeBetaController","cr:1468859","asset","gkx","goURI"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=b("React"),l=i("86836"),m=i("86835"),n=i("86837"),o=b("MessengerMenu.react").Item,p=b("MessengerMenu.react").Separator,q=h._("Report a bug");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={zenonControlsShown:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this;return b("CurrentUser").isEmployee()||this.props.allowExternalReporting!=null&&this.props.allowExternalReporting&&b("gkx")("984969")?k.jsxs("div",{className:"_4_xe"+(b("gkx")("678606")?" _2jqn":""),children:[this.$1(),this.$2(),this.$3(),this.state.zenonControlsShown&&b("cr:1468859")?k.jsx(b("cr:1468859"),{onHideDialog:function(){a.setState({zenonControlsShown:!1})}}):null]}):null};d.$3=function(){var a=this;return k.jsx(b("Link.react"),babelHelpers["extends"]({"aria-label":q,onClick:function(){a.setState({zenonControlsShown:!0})},className:"_1fr8"},b("Tooltip").propsFor("Show Employee Controls"),{children:k.jsx("div",{className:"_1gng",children:k.jsx(b("Image.react"),{src:i("1020019")})})}))};d.$2=function(){if(b("CurrentUser").isLoggedIn()===!1)return null;var a=b("CurrentUser").isEmployee()?"/ajax/bugs/employee_report":"/ajax/bugs/report";return k.jsx(b("Link.react"),babelHelpers["extends"]({"aria-label":q,href:"#",ajaxify:a,className:"_1fr8",rel:"dialog"},b("Tooltip").propsFor(q),{children:k.jsx("div",{className:"_1gng",children:k.jsx(b("Image.react"),{src:l})})}))};d.$1=function(){var a=this.props.isBetaEnabled===!0?m:n,c=h._("Internal preferences");return b("CurrentUser").isEmployee()?k.jsx(b("MessengerPopoverMenu.react"),babelHelpers["extends"]({className:"_1fr8",menu:this.$4()},b("Tooltip").propsFor(c),{children:k.jsx(b("Link.react"),{"aria-haspopup":"true","aria-label":c,className:"_1gng",href:"#",role:"button",children:k.jsx(b("Image.react"),{src:a})})})):null};d.$4=function(){var a=this,c=null;if(this.props.unixName!=null&&this.props.unixName!==""){var d=this.props.unixName+".sb";c=k.jsx(o,{label:"Sandbox",onclick:function(){return a.$5(d)}})}return k.jsxs(b("MessengerMenu.react"),{children:[k.jsx(o,{label:"Public",onclick:function(){return a.$6(!1)}}),k.jsx(o,{label:"Beta",onclick:function(){return a.$6(!0)}}),k.jsx(p,{}),k.jsx(o,{label:"C1 (trunkstable)",onclick:function(){return a.$5()}}),k.jsx(o,{label:"Intern",onclick:function(){return a.$5("intern")}}),k.jsx(o,{label:"Production",onclick:function(){return a.$5("prod")}}),c]})};d.$6=function(a){var c=b("XSettingsEmployeeBetaController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({enabled:a}).setMethod("POST").setAllowCrossPageTransition(!0).send()};d.$5=function(a){var c,d=b("MessengerEnvironment").facebookdotcom?".facebook.com":".messenger.com";c=(c=b("WorkModeConfig").company_subdomain)!=null?c:"www";c=c+(a!=null?"."+a:"")+d;b("goURI")((j||(j=b("URI"))).getRequestURI().getQualifiedURI().setDomain(c))};return c}(k.PureComponent);e.exports=a}),null);
__d("MessengerComposerButtonLabels",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={QuickCamButtonLabel:g._("Take a picture using quick cam"),VoiceClipButtonLabel:g._("Send a voice clip"),EmojiButtonLabel:g._("Choose an emoji"),StickerButtonLabel:g._("Choose a sticker"),GroupPollingButtonLabel:g._("Create a poll"),ContentSearchButtonLabel:g._("Choose a gif")};e.exports=a}),null);
__d("MessengerSingleSectionContactList.react",["cx","MessengerContactAdapters","MessengerContactList.react","MessengerTypeaheadUtils","React","TypeaheadViewPropTypes","joinClasses","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.entries;a=a.viewProps;var d=(c.length?"":"_599s")+" _29hl _8i1 _11_d _4p-s";return h.jsx(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,d,a.className),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:!0,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:b("MessengerTypeaheadUtils").buildSingleSection(c),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:a.viewer})};return c}(h.PureComponent);a.propTypes=b("TypeaheadViewPropTypes");a.defaultProps={role:"listbox"};e.exports=a}),null);
__d("MessengerURLUploader",["requireCond","cr:988286","Event","MessengerActions","SubscriptionsHandler","URLMatcher","debounce"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){var e=this;this.handleInputValueChange=function(a){a=e.$1();a=b("URLMatcher").match(a)||(b("cr:988286")!=null?b("cr:988286").matchTaskNumber(a)||b("cr:988286").matchDiffNumber(a):null);a&&(e.$3!==a&&(e.$3=a,b("MessengerActions").loadingPreview(e.$5,a)))};this.$1=a;this.$4=new(b("SubscriptionsHandler"))();this.$5=d;this.$2=b("debounce")(this.handleInputValueChange,200);this.initInput(c)}var c=a.prototype;c.getMatchedURL=function(){return this.$3};c.initInput=function(a){this.$4.addSubscriptions(b("Event").listen(a,"keyup",this.$2),b("Event").listen(a,"paste",this.$2))};c.setThreadID=function(a){this.$5=a};c.clearShareData=function(){this.$3=null};return a}();e.exports=a}),null);
__d("MessengerComposerInput.react",["cx","fbt","requireCond","cr:1008504","AutocompleteSearchSource","AutocompleteStrategy","Bootloader","CompositeDraftDecorator","ContentState","CurrentUser","DebouncedMentionsTextEditor.react","DocumentCompositeMentionsSource","DocumentMentionsSource","DOMDimensions","DraftModifier","EditorState","EmojiFormat.bs","Event","LogHistory","MentionsLayer.react","MercuryIDs","MercuryThreadIDMap","MercuryThreadSnippet.react","MercuryThreadTitleSafe.react","MercuryTimestamp","MessengerActions","MessengerBotMenuButton.react","MessengerComposerInputStore","MessengerConstants","MessengerDomIDs.bs","MessengerEditorStateManager","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerSingleSectionContactList.react","MessengerTabIndices","MessengerUploadFilesUtil.bs","MessengerURLUploader","MessengerUserInputAppDispatcher","MessengerUserInputUtils","React","ReactDOM","Run","TypingDetectorController","cr:1272653","cr:1217281","cr:1217282","WorkGalahadChatPrefillMessageEventEmitter","WorkGalahadSettings","clearImmediate","createMentionsSearchSourceFromParticipants","createMessengerMentionDraftEntity","createMessengerMentionTypeaheadDraftEntity","debounce","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","gkx","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","immutable","insertEmoticonIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","joinClasses","nullthrows","prop-types","qex","replaceMentionedTextInEditorState","cr:1217283","setImmediate","shouldNotRenderSegoe","throttle","withMessengerSource"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerDomIDs.bs").ids,j=b("React"),k=1,l=/^image\//,m="handled",n=8,o="not-handled",p=b("LogHistory").getInstance("MessengerComposerInput"),q={};q[b("MessengerConstants").NEW_THREAD_KEY]={version:0,editorState:b("EditorState").createEmpty()};function r(a,c){var d=c.editorState,e=c.version;if(!a||a&&e<q[a].version)return;q[a]=c;a!==b("MessengerConstants").NEW_THREAD_KEY&&b("MessengerEditorStateManager").set(a,d)}function s(a){q[a]||(q[a]={version:0,editorState:b("EditorState").createEmpty()});return q[a]}function t(a,b){if(!a)return null;var c=s(a);c.editorState=b;q[a]=c;return c}function u(a,b){if(a){var c=s(a);c.version+=1;c.editorState=b;r(a,c)}}a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$10=!1;d.$21=function(a){if(d.$10&&a!==d.state.editorState){d.setState({editorState:a});a=t(d.props.threadID,a);a&&d.$5(d.props.threadID,a);d.props.onResize&&d.props.onResize()}};d.$22=function(a,c){if(b("isSoftNewlineEvent")(a)){a=b("handleSoftNewlineForMessengerEmoticon");a=a(c);d.setState({editorState:a});t(d.props.threadID,a);return m}d.setState({},d.triggerSend);return m};d.getValue=function(){return b("getVisibleValueForContentStateWithMessengerEmoji")(d.state.editorState.getCurrentContent())};d.focus=function(){d.refs.input&&d.refs.input.focus()};d.$32=function(a,b){d.props.onBeforeInput&&d.props.onBeforeInput(a,b);var c=a==". ",e=d.$37(a,b);a=d.$38(a,b);return c||e||a?m:o};d.$13=function(a){a=d.props.handleOnlyImageUploads?a.filter(function(a){return a&&l.test(a.type)}):a;var c=d.$25();if(a.length){b("MessengerActions").prepareFilesForSend(c,a,"Copy");return m}return o};d.$33=function(a,c,e){b("cr:1217283")!=null&&b("cr:1217283")(d.props.threadID,a);return!1};d.$18=function(){var a=d.props.threadID;if(!a)return;r(a,s(a))};d.$19=function(){d.setState(d.$14(!0))};d.triggerSend=function(){d.$23()&&d.$26();if(d.getValue().trim().length>0||d.$39())if(d.props.thread){var a=d.getMentions(d.props.thread.thread_fbid);d.$29(a)}else d.$29();d.$27()};d.$34=function(){var a=(d.state.addedMentionsCount||0)+1;d.setState({addedMentionsCount:a})};d.$35=function(a,c){a=(d.state.mentionsTriggeredCount||0)+1;a={mentionsTriggeredCount:a};d.state.mentionsTriggerSource||(a.mentionsTriggerSource=c===k?b("MessengerMentionSource").ATSIGN:b("MessengerMentionSource").TYPEAHEAD);d.setState(a)};d.$13=d.$13.bind(babelHelpers.assertThisInitialized(d));d.$11=c;d.state=d.$14();d.$6=b("debounce")(function(a){d.$11||(d.$11=a),v(d.props,d.$11)&&d.$15(),d.$11=a},300);d.$7=b("throttle")(function(){if(d.$10){var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).height;d.$1!==a&&(d.props.onResize&&d.props.onResize());d.$1=a}},100);return d}var d=c.prototype;d.$14=function(a){var c;this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?c=s(b("MessengerConstants").NEW_THREAD_KEY).editorState:c=b("MessengerEditorStateManager").get(this.props.threadID);c=this.$16(c,a);a=b("createMessengerMentionDraftEntity");return{editorState:c,mentionCreationForContentStateFn:a}};d.componentDidMount=function(){var a=this;this.$10=!0;var c=b("gkx")("964442");c&&b("MessengerUserInputAppDispatcher").explicitlyRegisterStore(b("MessengerComposerInputStore"));this.$1=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this)).height;this.$17();b("cr:1217282")==null&&(this.$2=new(b("MessengerURLUploader"))(this.getValue,b("ReactDOM").findDOMNode(this.refs.input),this.props.threadID));b("Run").onUnload(this.$18);this.$3=b("Event").listen(window,"blur",this.$18);this.$4=b("Event").listen(window,"focus",this.$19);this.$5=b("debounce")(function(a,b){r(a,b)},1e3);b("CurrentUser").isWorkUser()&&(this.$12=b("WorkGalahadChatPrefillMessageEventEmitter").addListener("prefillMessage",function(b){a.insertPrefill(b)}))};d.componentDidUpdate=function(a,c){this.$9=b("setImmediate")(this.$7);if(c.editorState!==this.state.editorState){this.props.onChange&&this.props.onChange(this.getValue());c=b("gkx")("964442");c&&this.$20(this.getValue())}this.props.threadID!==a.threadID?this.$17():this.$6(a)};d.componentWillUnmount=function(){var a=this.props.threadID;a&&r(a,s(a));this.$10=!1;this.$8&&this.$8.destroy();this.$9&&b("clearImmediate")(this.$9);this.$3&&this.$3.remove();this.$4&&this.$4.remove();this.$12&&this.$12.remove()};d.insertEmoticon=function(a){a=b("insertEmoticonIntoEditorState")(a,this.state.editorState);a!==this.state.editorState&&this.$21(a)};d.insertPrefill=function(a){if(this.state.editorState.getCurrentContent().hasText())return;a=b("EditorState").createWithContent(b("ContentState").createFromText(a));a!==this.state.editorState&&this.$21(a)};d.insertLink=function(a){var c=this.state.editorState,d=c.getSelection();d=b("DraftModifier").replaceText(c.getCurrentContent(),d,a,c.getCurrentInlineStyle());c=b("EditorState").push(c,d,"insert-characters");c!==this.state.editorState&&(this.$21(c),b("cr:1217283")!=null&&b("cr:1217283")(this.props.threadID,a))};d.insertEmoji=function(a){var c=this.state.editorState;a=b("insertMessengerEmojiIntoContentState")(b("EmojiFormat.bs").codeArrayToCodeString(a),c.getCurrentContent(),c.getSelection(),c.getCurrentInlineStyle());c=b("EditorState").push(c,a,"insert-characters");c!==this.state.editorState&&this.$21(b("EditorState").forceSelection(c,a.getSelectionAfter()))};d.$23=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$17=function(){if(!this.$10)return;this.setState(this.$14(!1));this.$24();this.$2&&(this.$2.setThreadID(this.props.threadID),this.$2.clearShareData());this.$15()};d.$15=function(){if(this.props.mentionsEnabled){var a=this.props,c=a.participants,d=a.viewer;a=a.thread;this.setState({isUserInputAutocomplete:!1,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:b("createMentionsSearchSourceFromParticipants")(d,c&&c.toArray(),a,b("gkx")("678578"))})}};d.$24=function(){this.$8&&this.$8.destroy();this.$8=null;var a=this.props.viewer;if(!a)return;var c=b("ReactDOM").findDOMNode(this.refs.input);this.props.threadID!==b("MessengerConstants").NEW_THREAD_KEY&&c&&(this.$8=new(b("TypingDetectorController"))(this.props.thread,b("MercuryIDs").getUserIDFromThreadID(this.props.threadID),c,this.props.source,null,b("MercuryThreadIDMap").getForFBID(a).getServerIDFromClientIDNow(this.props.threadID),this.getValue))};d.$25=function(){var a=this.props,c=a.threadID;a=a.thread;if(!b("MercuryIDs").isValidThreadID(c)){if(a)return a.thread_id;p.debug("Invalid threadID ",c)}return c};d.$20=function(a){if(!this.$10)return;a=b("MessengerComposerInputStore").getState();var c=a.requestNumResults,d=a.requestType;if(a.isUserInputRequested&&c&&d){a=new(b("AutocompleteSearchSource"))(this.getValue(),c,d);c=new(b("DocumentMentionsSource"))(b("AutocompleteStrategy"),a);d=new(b("DocumentCompositeMentionsSource"))([c]);this.setState({isUserInputAutocomplete:!0,mentionCreationForContentStateFn:b("MessengerUserInputUtils"),mentionsSource:d})}else if(this.state.isUserInputAutocomplete){a=this.props;c=a.participants;d=a.viewer;a=a.thread;this.setState({isUserInputAutocomplete:!1,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:b("createMentionsSearchSourceFromParticipants")(d,c&&c.toArray(),a,b("gkx")("678578"))})}};d.$26=function(){var a=this.props.fileUploader,c=this.$25();a&&(p.debug("Before send files to thread ",c),b("MessengerUploadFilesUtil.bs").sendAttchments(a,this.props.onFileUpload),p.debug("Before clean files for thread ",c),b("MessengerActions").cleanFiles(c))};d.$27=function(){var a=this.props.onMessageSend;a!=null&&b("cr:1217281")!=null&&(this.$28()&&b("nullthrows")(this.props.workChatContentApps).forEach(function(c,d){var e=(d=c.payload)==null?void 0:d.shareData;if(e==null)return;b("setImmediate")(function(){return a("",{shareable_attachment:e})})}),b("cr:1217281").removeAllWorkContentApps(this.props.threadID))};d.$28=function(){var a=this.props.workChatContentApps;return a!=null&&a.size>0};d.$29=function(a){var c=this;if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:a},function(d){b("MessengerActions").removeSharePreview(c.props.threadID);if(d&&c.props.mentionsEnabled&&(a&&a.length||c.state.addedMentionsCount||c.state.mentionsTriggeredCount||c.state.mentionsTriggerSource)){var e=c.state,f=e.addedMentionsCount,g=e.mentionsTriggeredCount,h=e.mentionsTriggerSource;e=c.props;var i=e.thread,j=e.participants,k=d;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(c,d){new c().setEvent(d.MENTION).setGroupSize(j&&j.size).setNumDelivered(a&&a.length||0).setNumSelects(f).setNumTriggers(g).setThreadid(i&&i.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(i&&i.thread_type)).setOfflineThreadid(k.offline_threading_id).updateExtraData({source:h}).log()},"MessengerComposerInput.react")}})){var d=this.$16(b("EditorState").createEmpty());this.$2&&this.$2.clearShareData();this.setState({editorState:d,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null});u(this.props.threadID,d);this.$8&&this.$8.resetState()}};d.getMentions=function(a){return b("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),a)};d.getInput=function(){return this.refs.input};d.render=function(){var a=this,c=this.props,d=c.participants,e=c.thread;c=c.viewer;var f=null;d&&e&&c?f=h._("Conversation with {participantListAsShownInThreadList}. Updated {lastUpdatedTime} by {recentUpdateStringAsShownInThreadList}",[h._param("participantListAsShownInThreadList",this.$30(e,c)),h._param("lastUpdatedTime",b("MercuryTimestamp").getAbsoluteTimestamp(e.timestamp)),h._param("recentUpdateStringAsShownInThreadList",this.$31(d,e,c))]):f=h._("Composing a new message");d=null;this.props.threadID&&this.props.pageID&&(d=j.jsx("div",{ref:"botsMenuContainer",className:"_3km1",children:j.jsx(b("MessengerBotMenuButton.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"})}));e="";this.props.disableInput?e=h._("Composer is disabled for this thread.").toString():!((c=this.props.thread)==null?void 0:c.is_canonical)||((c=this.props.thread)==null?void 0:c.other_user_fbid)!==b("CurrentUser").getID()&&b("gkx")("1101638")?e=h._("Type a message, \u0040name...").toString():e=h._("Type a message...").toString();c=b("gkx")("678612");var g=b("cr:1008504")!==null&&b("CurrentUser").isWorkUser()?b("cr:1008504"):b("DebouncedMentionsTextEditor.react");return j.jsxs("div",{className:b("joinClasses")("_kmc"+(!b("CurrentUser").isWorkUser()||b("gkx")("1072568")?" _7kpg":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyx":"")+(this.props.smallerEqual640?" _2swd":"")+(b("shouldNotRenderSegoe")(this.state.editorState.getCurrentContent().getPlainText())?" _2por":"")+" navigationFocus",this.props.className),onClick:this.focus,role:"presentation",children:[this.props.showMenu?d:null,j.jsxs("div",{className:b("joinClasses")((b("CurrentUser").isWorkUser()&&!b("gkx")("1072568")?"_3-8x":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7q9o":"")+(this.props.showMenu?" _3km3":"")+(c?"":" _3oh-"),this.props.inputContainerClassName),children:[j.jsx(g,{autoHighlight:!0,ariaControls:i.CONVERSATION,ariaDescribedBy:i.COMPOSER_INPUT_DESCRIPTION,ariaLabel:e,editorState:this.state.editorState,handleBeforeInput:this.$32,handleContentReturn:this.$22,handlePastedFiles:this.$13,handlePastedText:this.$33,handleReturn:this.$22,maxResults:n,readOnly:this.props.disableInput,mentionCreationForContentStateFn:this.state.mentionCreationForContentStateFn,mentionTypeaheadCreationForContentStateFn:b("createMessengerMentionTypeaheadDraftEntity"),mentionResultsComponent:b("MentionsLayer.react"),mentionResultsProps:{typeaheadView:b("MessengerSingleSectionContactList.react"),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:"above",autoflip:!0},mentionsSource:this.state.mentionsSource,assistantTypeaheadSource:this.state.assistantTypeaheadSource,onChange:this.$21,placeholder:e,ref:"input",spellCheck:!0,stripPastedStyles:!0,tabIndex:this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?b("MessengerTabIndices").COMPOSER_INPUT:0,textAlignment:"left",threadID:this.$25(),onAddMention:this.$34,onShowMentions:this.$35}),this.props.threadID!=null&&b("cr:1217282")!=null?j.jsx(b("cr:1217282"),{threadID:this.props.threadID,workLinks:this.props.workChatContentApps,files:this.props.fileUploader!=null?this.props.fileUploader.get("uploadedFiles"):null}):null,b("cr:1272653")!==null&&(b("qex")._("1269717")||b("gkx")("1325997"))?j.jsx(b("cr:1272653"),{contextRef:function(){return a.refs.input}}):null,j.jsx("div",{className:"_5ca7",id:i.COMPOSER_INPUT_DESCRIPTION,children:f})]})]})};d.$30=function(a,c){return j.jsx(b("MercuryThreadTitleSafe.react"),{thread:a,viewer:c})};d.$31=function(a,c,d){return j.jsx(b("MercuryThreadSnippet.react"),{participants:a,shouldAlwaysRenderSender:!0,shouldRenderYou:!0,thread:c,viewer:d})};d.$16=function(a,c){var d=this.$36(a);a=b("EditorState").set(a,{decorator:d});return c||this.props.disableAutofocus?a:b("EditorState").moveFocusToEnd(a)};d.$36=function(a){var c=b("MessengerEmoticonSpan.react");a=a.getCurrentContent();c=[{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"},a.getEntity),component:c}];c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"},a.getEntity),component:b("MessengerEmojiSpan.react")});c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"},a.getEntity),component:b("MessengerMentionsEntityDecorator.react")});return new(b("CompositeDraftDecorator"))(c)};d.$37=function(a,c){a=b("handleBeforeInputForMessengerEmoticon")(c,a);if(a===c)return!1;this.setState({editorState:a});t(this.props.threadID,a);return!0};d.$38=function(a,c){a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return!1;this.setState({editorState:a});t(this.props.threadID,a);return!0};d.handleTextDropped=function(a){var c=this.state.editorState,d=c.getSelection();if(d.get("hasFocus"))return;d=b("DraftModifier").replaceText(c.getCurrentContent(),d,a,c.getCurrentInlineStyle());a=b("EditorState").push(c,d,"insert-fragment");this.$21(a)};d.getShareData=function(){var a=this.props.sharePreview;return a&&a.type&&a.params?{share_type:a.type,share_params:a.params.get("data")}:null};d.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode()};d.$39=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.addMention=function(a){a=b("replaceMentionedTextInEditorState")(a,this.state.editorState,0,b("createMessengerMentionDraftEntity"));this.state.mentionsTriggerSource||this.setState({mentionsTriggerSource:b("MessengerMentionSource").REPLY});this.$21(a);this.$34()};return c}(j.PureComponent);a.propTypes={disableAutofocus:(c=b("prop-types")).bool,fileUploader:c.object,workChatContentApps:c.instanceOf(b("immutable").OrderedMap),handleOnlyImageUploads:c.bool.isRequired,isComposing:c.bool,mentionsEnabled:c.bool,pageID:c.string,participants:c.instanceOf(b("immutable").Map),sharePreview:c.object,showMenu:c.bool,disableInput:c.bool,smallerEqual640:c.bool,thread:c.object,threadID:c.string,viewer:c.string,onBeforeInput:c.func,onChange:c.func,onFileUpload:c.func,onResize:c.func,onMessageSend:c.func};function v(a,b){a=a.participants;b=b.participants;if(!a||!b)return!0;if(a===b)return!1;a=a.filter(Boolean);b=b.filter(Boolean);return a.size!==b.size||!a.equals(b)}e.exports=b("withMessengerSource")(a,!0)}),null);
__d("MessengerComposerPendingActions.react",["Bootloader","CurrentUser","JSResource","MercuryIDs","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerDialogs.bs","MessengerMessageRequestsTypedLogger","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("MessengerPendingActions.react").__setRef("MessengerComposerPendingActions.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentWillUnmount=function(){this.$1&&this.$1.remove(),this.$2&&this.$2.remove()};d.render=function(){var a=this,c=this.props.thread,d=!!c&&b("MessageRequestUtils").isFiltered(c);c=b("CurrentUser").getID();var e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c),f=b("MercuryThreadActions").getForFBID(this.props.viewer);return g.jsx(g.Suspense,{fallback:g.jsx("div",{style:{height:51}}),children:g.jsx(h,{folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){f.changeFolder(a.props.threadID,b("MessagingTag").INBOX),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType(d?"other":"pending").setThreadKey(e).setEntryPoint(null).log()},onDeclineClick:function(){var c=b("MercuryIDs").isGroupChat(a.props.threadID);a.$1=b("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(d){var f=d.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return g.jsx(f,{onBlock:a.props.onIgnoreBlock,onDelete:a.props.onDeleteDialogDeleteClick,onToggle:a.props.onDeleteDialogToggleClick,isGroupChat:c})});new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("pending").setThreadKey(e).setEntryPoint("inbox_banner").log()},"MessengerComposerPendingActions.react")},onDeleteClick:function(){a.$2=b("Bootloader").loadModules(["MessengerFilteredDeleteDialogReact.bs"],function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return g.jsx(d,{onDelete:a.props.onDeleteDialogDeleteClick,onToggle:a.props.onDeleteDialogToggleClick})})},"MessengerComposerPendingActions.react"),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("other").setThreadKey(e).setEntryPoint("inbox_banner").log()}})})};return c}(g.Component);e.exports=a}),null);
__d("MessengerResponsiveBlock.react",["React","createCancelableFunction","prop-types","requestAnimationFrame","shallowEqual","throttle"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,visibility:"hidden",zIndex:-1},i={left:0,position:"absolute",top:0,transition:"0s"},j={height:"200%",left:0,position:"absolute",top:0,transition:"0s",width:"200%"};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.dirty=!1,d.lastWidth=null,d.lastHeight=null,d.lastBreakpointsToggles=null,d.setupWeirdScrollTracking=function(){d.refs.expandChild.style.width="10000px",d.refs.expandChild.style.height="10000px",d.refs.expand.scrollLeft=1e5,d.refs.expand.scrollTop=1e5,d.refs.shrink.scrollLeft=1e5,d.refs.shrink.scrollTop=1e5},d.$2=function(){var a=d.refs.outer.offsetWidth,c=d.refs.outer.offsetHeight;if((a!=d.lastWidth||c!=d.lastHeight)&&!d.dirty){if(Math.abs(a-(d.lastWidth||0))<10&&Math.abs(c-(d.lastHeight||0))<16)return;d.dirty=!0;d.lastWidth=a;d.lastHeight=c;a=d.props.breakpointsToggles(a,c);b("shallowEqual")(d.lastBreakpointsToggles,a)?d.dirty=!1:d.forceUpdate(function(){b("requestAnimationFrame")(function(){d.dirty=!1})});d.lastBreakpointsToggles=a}d.setupWeirdScrollTracking()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=b("createCancelableFunction")(this.$2),this.onScroll=b("throttle")(this.$1,50),this.setupWeirdScrollTracking(),this.onScroll()};d.componentWillUnmount=function(){this.$1.cancel()};d.render=function(){return g.jsxs("div",{ref:"outer",children:[this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),g.jsx("div",{style:h,onScroll:this.onScroll,ref:"expand",children:g.jsx("div",{style:i,ref:"expandChild"})}),g.jsx("div",{style:h,onScroll:this.onScroll,ref:"shrink",children:g.jsx("div",{style:j})})]})};return c}(g.Component);a.propTypes={children:b("prop-types").func.isRequired,breakpointsToggles:b("prop-types").func.isRequired};e.exports=a}),null);
__d("MessengerComposer.react",["cssVar","cx","fbt","invariant","requireCond","AsyncRequest","AutoFocusableLink.react","BootloadOnRender.react","ChatPhotoUploader.react","CurrentUser","FBLogger","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryReadOnlyReason","MercuryShareAttachmentRenderLocations","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerActions","MessengerBlockDialogReact.bs","MessengerBotMenuDataFetcher","MessengerButtonReact.re","MessengerComposerButtonLabels","MessengerComposerInput.react","MessengerComposerPendingActions.react","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerConstants","MessengerContextualDialog.react","MessengerDialogs.bs","MessengerFileSizeErrorDialogReact.bs","MessengerHotLikeButton.react","MessengerHotLikeUtils","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerResponsiveBlock.react","MessengerSendButtonReact.re","MessengerState.bs","MessengerURIStore","MessengerView","MNCommerceCTAProcessor","MNCommercePageSetting","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","P2PGKValues","React","ReasonBootloadOnInteraction.react","ReasonResource","ReplyingToMessageReact.bs","WorkBotLandingPageHelper","WorkChatExtensionAvailabilityFetcher","cr:1124632","WorkFileUploadsGating","WorkGalahadChatSendButton.react","WorkGalahadSettings","XMessagingUnblockMessagesController","XMNCommercePageNullStateCTAController","XUISpinner.react","getPageIDFromThreadID","gkx","immutable","isWebGLEnabled","lazyLoadComponent","promiseDone","prop-types"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("MessengerBlockDialogReact.bs").jsComponent,l=b("MessengerButtonReact.re").make,m=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,n=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,o=b("MessengerFileSizeErrorDialogReact.bs").jsComponent,p=b("MessengerSendButtonReact.re").make,q=b("React"),r=b("ReplyingToMessageReact.bs").jsComponent,s=b("WorkBotLandingPageHelper").shouldShowBotLandingPage,t=b("lazyLoadComponent")(b("JSResource")("WorkChatPostButtonReact").__setRef("MessengerComposer.react")),u=b("lazyLoadComponent")(b("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("MessengerComposer.react")),v=b("lazyLoadComponent")(b("JSResource")("MessengerUnconnectedThreadInfoTextReact").__setRef("MessengerComposer.react")),w=640,x=b("WorkGalahadSettings").isGalahadEnabled?320:360,y=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.refsGifUploader=null;d.handleFileUpload=function(a){d.refsUploader&&d.refsUploader.uploadFiles(a),d.exitCurrentMode()};d.focusInput=function(){d.refsInput&&d.refsInput.focus()};d.$50=function(a){d.refsGifUploader=a};d.$53=function(){var a=b("XMessagingUnblockMessagesController").getURIBuilder().getURI(),c=d.props.threadID;new(b("AsyncRequest"))(a).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(c)}).send()};d.$10=function(){var a=d.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,c);d.$54()["delete"](d.props.threadID);b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint("inbox_banner").log()};d.$9=function(){var a;a=(a=d.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;a=b("MercuryIDs").isGroupChat(a);if(a)d.$55();else{a=(a=d.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;var c=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null,e=c&&c.short_name;e&&b("MessengerDialogs.bs").showDialog(function(){return q.jsx(k,{onBlock:function(){d.$56(e)},contact:c})})}};d.$11=function(a){var c=d.props.thread,e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);a||new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint("inbox_banner").log()};d.$51=function(a,c){a.platformFBID.toString()===b("MercuryConfig").MessengerAppID?d.props.onStickerSelect(a.resultID.toString()):d.refsGifUploader&&d.refsGifUploader.uploadURL&&d.refsGifUploader.uploadURL({attribution_app_id:a.platformFBID,external_image_url:a.source.url,preview_url:a.media.preview?a.media.preview.url:a.media.thumbnail.url,source:a.source})};d.$52=function(a){d.focusInput(),d.refsInput&&d.refsInput.insertEmoji(a)};d.$19=function(a){d.setState({currentValue:a})};d.$15=function(a,b,c){d.refsEmojiButton&&d.refsEmojiButton.hideFlyout();return d.props.onMessageSend&&d.props.onMessageSend(a,b,c)};d.$48=function(a){d.refsInput&&d.refsInput.triggerSend()};d.$49=function(a){return d.props.onStickerSelect(a)};d.$13=function(){if(d.state.nullStateCTA!==null)switch(d.state.nullStateCTA.action_type){case 1:break;case 4:default:d.setState({disableNullState:!0});b("MNCommercePostbackRefSendManager").hasMDotMeRef(d.$5())?(b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1,b("MNCommercePostbackRefSendManager").getMdotMeRef()),b("MessengerActions").changeMDotMeReferral()):b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1);b("MNCommerceCTAProcessor").logCTAClick(d.state.nullStateCTA);break}};d.$1=function(){d.setState({showNullState:!0,disableNullState:!1})};d.$1=d.$1.bind(babelHelpers.assertThisInitialized(d));d.state=d.$2();return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.threadID!==this.props.threadID||a.thread&&!this.props.thread?(this.setState(this.$2()),a.thread&&this.$3(a.thread,b("getPageIDFromThreadID")(a.threadID))):a.thread&&this.$4(a.thread,b("getPageIDFromThreadID")(a.threadID))&&this.setState({showNullState:!1})};d.componentDidMount=function(){var a=this;this.props.thread&&this.$3(this.props.thread,this.$5());var c=b("gkx")("678608");b("CurrentUser").isWorkUser()&&c&&b("promiseDone")(b("WorkChatExtensionAvailabilityFetcher").checkHasChatExtension(),function(b){return a.setState({hasWorkChatExtension:b})})};d.componentDidUpdate=function(a){(a.canReply!==this.props.canReply||a.replyingToMessage!==this.props.replyingToMessage||a.sharePreview!==this.props.sharePreview||a.fileUploader!==this.props.fileUploader)&&(this.props.onResize&&this.props.onResize());this.props.replyingToMessage&&a.replyingToMessage!==this.props.replyingToMessage&&this.focusInput();a=this.props.thread;a!=null&&(b("gkx")("1456662")||a.thread_fbid!=null)&&(this.$6(),this.$7())};d.render=function(){var a=this;if(!this.props.canReply)return this.$8();else if(this.props.thread&&this.props.threadID&&this.props.viewer&&b("MessageRequestUtils").shouldShowComposerPendingActions(this.props.thread)&&!this.state.pendingActionsBypassed)return q.jsx(b("MessengerComposerPendingActions.react"),{thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer,onAccept:function(){return a.setState({pendingActionsBypassed:!0})},onIgnoreBlock:this.$9,onDeleteDialogDeleteClick:this.$10,onDeleteDialogToggleClick:this.$11});var c=this.props.thread&&this.props.thread.message_count;b("MNCommercePostbackRefSendManager").sendMDotMeRef(this.$5(),c);if(this.state.showNullState&&this.state.nullStateCTA!==null)return q.jsxs("div",{className:"_2xh0",children:[this.$12(),q.jsx("div",{className:"_2xh4 _59w_",children:q.jsx(b("BootloadOnRender.react"),{component:q.jsx(b("LazyComponent.react"),{cta:this.state.nullStateCTA,onClick:this.$13,disabled:this.state.disableNullState,threadID:this.props.threadID}),loader:b("JSResource")("ChatPageComposerNullState.react").__setRef("MessengerComposer.react"),placeholder:q.jsx(b("XUISpinner.react"),{size:"small"})})})]});var d=this.$14();c=q.jsxs(q.Fragment,{children:[b("cr:1124632")!=null&&this.props.threadID!=null?q.jsx(b("cr:1124632"),{threadID:this.props.threadID,onResize:this.props.onResize,onClick:this.$15}):null,q.jsx(b("MessengerResponsiveBlock.react"),{breakpointsToggles:function(a){return[a!=null&&a<=w,a]},children:function(c){var e=c[0];c=c[1];return q.jsxs("div",{"aria-label":i._("New message"),className:"_4rv3"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyq":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyv":""),role:"region",children:[a.props.thread&&b("MessageRequestUtils").shouldShowUnconnectedThreadInfoText(a.props.thread)?a.$16():null,a.props.replyingToMessage&&a.$17(),a.$18(a.props.threadID),q.jsxs("div",{className:"_5irm"+(e?" _1_73":""),children:[q.jsx(b("MessengerComposerInput.react"),{disableAutofocus:!!a.props.disableAutofocus,fileUploader:a.props.fileUploader,handleOnlyImageUploads:!1,isComposing:d,mentionsEnabled:a.props.mentionsEnabled,ref:function(b){return a.refsInput=b},onBeforeInput:function(){return a.refsEmojiButton&&a.refsEmojiButton.hideFlyout()},onResize:a.props.onResize,onMessageSend:a.$15,participants:a.props.participants,sharePreview:a.props.sharePreview,smallerEqual640:e,thread:a.props.thread,threadID:d?b("MessengerConstants").NEW_THREAD_KEY:a.props.threadID,pageID:a.$5(),viewer:a.props.viewer,onFileUpload:a.handleFileUpload,onChange:a.$19,showMenu:a.state.showMenu,disableInput:a.state.disableInput}),a.$20(c)]})]})}})]});var e=this.$5(),f=d?b("MessengerConstants").NEW_THREAD_KEY:this.props.threadID;return e&&!b("CurrentUser").isWorkUser()?q.jsx(b("BootloadOnRender.react"),{component:q.jsx(b("LazyComponent.react"),{onResize:this.props.onResize,originalElement:c,pageID:e,playLinkClassName:"_2xh6 _2xh7",showGameImage:!1,threadFBID:this.props.threadFBID,threadID:f}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("MessengerComposer.react"),placeholder:c}):c};d.$18=function(a){if(!a||!this.$21())return null;var c=this.props,d=c.fileUploader;c=c.thread;c=c&&c.footer_color?c.footer_color:"#0084ff";return q.jsx(q.Suspense,{fallback:q.jsx(b("XUISpinner.react"),{className:"_2qf"}),children:q.jsx(u,{files:d!=null&&d.get("uploadedFiles")!=null?d.get("uploadedFiles"):b("immutable").Map(),small:!1,threadID:a,threadCustomColor:c,onClick:this.$22,onResize:this.props.onResize})})};d.$16=function(){var a;a=(a=this.props.thread)==null?void 0:a.other_user_fbid;if(!a)return null;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));return q.jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(v,{name:a&&a.short_name,onBlock:this.$9,onDelete:this.$10,onToggle:this.$11,thread:this.props.thread||void 0})})};d.$17=function(){var a=this.props.replyingToMessage;return!a?null:q.jsx(r,{name:this.$23(a),body:a.body,attachments:a.attachments,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage})};d.$23=function(a){a=a.author?b("MessengerParticipants.bs").getNow(a.author):null;return a&&a.short_name};d.$22=function(a,c){b("MessengerActions").cancelFileUpload(a,c)};d.$20=function(a){var c=this;return this.state.disableInput===!0?null:q.jsxs("div",{ref:function(a){c.refsButtonsContainer=a},className:"_4rv4"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyw":""),children:[this.$24(a),this.$25()]})};d.$24=function(a){if(this.props.hideActions)return null;return a&&a<x?q.jsxs("div",{children:[q.jsxs("ul",{className:"_39bj",children:[this.$26(),b("CurrentUser").isWorkUser()&&b("WorkFileUploadsGating").canUploadFiles?this.$27():this.$28(),this.$29(),this.$30(),this.$31()]}),q.jsxs("ul",{className:"_39bj",children:[this.$32(),this.$33(),this.$34(),this.$35(),this.$36()]})]}):q.jsxs("ul",{className:"_39bj",children:[this.$26(),b("CurrentUser").isWorkUser()?this.$27():null,this.$28(),b("CurrentUser").isWorkUser()?this.$37():null,this.$29(),this.$30(),this.$31(),this.$32(),this.$33(),this.$34(),this.$35(),this.$36()]})};d.$38=function(a){b("FBLogger")("messenger_upload_file").warn("Uploading file is too large"),b("MessengerDialogs.bs").showDialog(function(){return q.jsx(o,{error:a.error})})};d.handleTextDropped=function(a){this.refsInput&&this.refsInput.handleTextDropped(a)};d.$33=function(){return q.jsx("li",{children:this.$39()})};d.$39=function(){var a;if(!b("P2PGKValues").P2PVisible||!this.props.threadID||this.$40()||!this.props.p2pPaymentConfig||((a=this.props)!=null?(a=a.participants)!=null?a.size:a:a)===1)return null;a="_30yy _25pc _39bk";return q.jsx(b("BootloadOnRender.react"),{component:q.jsx(b("LazyComponent.react"),{className:a,ContextualDialog:b("MessengerContextualDialog.react"),thread:this.props.thread,threadID:this.props.threadID,p2pPaymentConfig:this.props.p2pPaymentConfig}),loader:b("JSResource")("P2PSendMoneyContainerBootloader.react").__setRef("MessengerComposer.react"),placeholder:q.jsx(b("AutoFocusableLink.react"),{className:a,role:"button"})})};d.$36=function(){return b("gkx")("678582")&&this.props.threadID?q.jsx(b("MercuryBootloadOnInteraction.react"),{component:q.jsx(b("LazyComponent.react"),{className:"_4rv5 _39bk"+(this.state.flyoutOpen?" _5jhb":""),location:b("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MessengerComposer.react"),placeholder:q.jsx(b("AutoFocusableLink.react"),{className:"_4rv5 _39bk",role:"button","aria-label":b("MessengerComposerButtonLabels").QuickCamButtonLabel})}):null};d.$32=function(){return!y||this.$14()?null:q.jsx("li",{children:q.jsx(b("MercuryBootloadOnInteraction.react"),{component:q.jsx(b("LazyComponent.react"),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:b("JSResource")("MessengerVoiceClipButton.react").__setRef("MessengerComposer.react"),placeholder:q.jsx(b("AutoFocusableLink.react"),{className:"_4rv7 _39bk _30yy",role:"button","aria-label":b("MessengerComposerButtonLabels").VoiceClipButtonLabel})})})};d.$34=function(){if(b("gkx")("994335"))return null;if(this.props.thread&&this.props.thread.is_canonical)return null;return!this.props.threadFBID||this.$14()?null:q.jsx("li",{children:q.jsx(b("ReasonBootloadOnInteraction.react"),{component:q.jsx(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("ReasonResource")(b("JSResource")("MessengerGroupPollingButtonReact.bs").__setRef("MessengerComposer.react")),placeholder:q.jsx(b("AutoFocusableLink.react"),{className:"_39bk _30yy _2o-b",role:"button","aria-label":b("MessengerComposerButtonLabels").GroupPollingButtonLabel})})})};d.$35=function(){var a=b("gkx")("678262")&&b("isWebGLEnabled")();return a&&this.props.threadFBID&&!this.$40()?q.jsx("li",{children:q.jsx(b("MercuryBootloadOnInteraction.react"),{component:q.jsx(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerGamesButton.react").__setRef("MessengerComposer.react"),placeholder:q.jsx(b("AutoFocusableLink.react"),{className:"_39bk _30yy _4ce_",role:"button"})})}):null};d.$26=function(){return this.props.threadFBID&&!this.$40()&&this.state.hasWorkChatExtension?q.jsx("li",{children:q.jsx(b("MercuryBootloadOnInteraction.react"),{component:q.jsx(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerWorkplaceChatExtensionsButton.react").__setRef("MessengerComposer.react"),placeholder:q.jsx(b("AutoFocusableLink.react"),{className:"_39bk _22k0 _30yy",role:"button"})})}):null};d.$41=function(a){var c=this,d=b("CurrentUser").isWorkUser()?!b("WorkFileUploadsGating").canUploadFiles:!1;return q.jsx("li",{className:"_39bk",children:q.jsx(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!(this.props.threadID||this.$42()),ref:function(a){return c.refsUploader=a},imageClassName:(a=="files"?"_5vn8":"")+(a=="attachment"?" _46si":""),imagesOnly:d,inputClassname:"_260t",linkClassName:"_30yy _7hi7 _260u",focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$38,threadID:this.props.threadID})})};d.$43=function(){return this.$14()&&!this.$44()?!1:!0};d.$44=function(){return this.props.recipients&&this.props.recipients.count()===1};d.$28=function(){return!this.$43()?null:this.$41("files")};d.$27=function(){return!b("WorkFileUploadsGating").canUploadFiles||!this.$43()?null:this.$41("attachment")};d.$37=function(){var a,c=this.props.openPostComposerInSameWindow?"_self":"_blank";a=(a=this.props)!=null?(a=a.thread)!=null?(a=a.associated_object)!=null?a.action_link:a:a:a;if(!a){var d;a=(d=this.props)!=null?(d=d.thread)!=null?(d=d.work_associated_group)!=null?d.url:d:d:d}return a?b("gkx")("808098")?q.jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(t,{composerLink:a,target:c})}):null:null};d.$45=function(){return this.state.currentValue.length>0||this.$21()||this.$46()};d.$21=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$46=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.$47=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadingFiles").size>0)};d.$25=function(){var a=!(this.props.threadID||this.$42());return!a&&this.$45()&&!this.$47()?b("WorkGalahadSettings").isGalahadEnabled?q.jsx(b("WorkGalahadChatSendButton.react"),{customColor:this.props.thread?this.props.thread.solid_color:null,onClick:this.$48,className:(this.props.threadID?"_30yy":"")+" _38lh"}):q.jsx(p,{className:(this.props.threadID?"_30yy":"")+" _38lh",customColor:this.props.thread&&this.props.thread.solid_color||void 0,onClick:this.$48}):q.jsx(b("MessengerHotLikeButton.react"),{className:"_4rv9"+(this.props.threadID?" _30yy":""),disabled:a,customColor:this.props.thread&&this.props.thread.solid_color,customLike:b("MessengerHotLikeUtils").getCustomEmojiFromThread(this.props.thread)||void 0,sendSticker:this.$49,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24,thread:this.props.thread})};d.$29=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _4rv6 _39bk";return q.jsx("li",{children:q.jsx(b("MercuryBootloadOnInteraction.react"),{component:q.jsx(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),disabled:!(this.props.threadID||this.$42()),getInput:function(){return a.refsInput},flyoutAlignment:"right",flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatStickerButton.react").__setRef("MessengerComposer.react"),placeholder:q.jsx(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").StickerButtonLabel})})})};d.$12=function(){var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;a=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null;var c=a&&a.name||"page";if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case 1:return null;case 4:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())&&!this.state.nullStateCTA.instantgame_metadata&&!b("CurrentUser").isWorkUser())return q.jsx("div",{className:"_3zc8",children:i._("When you tap {cta title}, {name} will see your public info.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c)])});else if(b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())){var d=this.$5();a=a&&a.vanity?"m.me/"+a.vanity:d?"m.me/"+d:"m.me";return q.jsx("div",{className:"_3zc8",children:i._("When you tap {cta title}, {name} will see your public info and that you opened their {link} link.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c),i._param("link",a)])})}break;default:return null}return null};d.$30=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _yht _39bk";return q.jsxs("li",{children:[q.jsx("div",{style:{display:"none"},children:q.jsx(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!1,ref:this.$50,imagesOnly:!1,focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$38})}),q.jsx(b("MercuryBootloadOnInteraction.react"),{component:q.jsx(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),getInput:function(){return a.refsInput},getQuery:function(){return a.refsInput?a.refsInput.getValue():""},location:b("MercuryShareAttachmentRenderLocations").MESSENGER,onSelect:this.$51}),loader:b("JSResource")("ChatContentSearchButton.react").__setRef("MessengerComposer.react"),placeholder:q.jsx(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").ContentSearchButtonLabel})})]})};d.$31=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _5s2p _39bk";return q.jsx("li",{children:q.jsx(b("MercuryBootloadOnInteraction.react"),{component:q.jsx(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),flyoutAlignment:"right",getInput:function(){return a.refsInput},onSelect:this.$52,onMount:function(b){return a.refsEmojiButton=b},sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatEmojiButton.react").__setRef("MessengerComposer.react"),placeholder:q.jsx(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").EmojiButtonLabel})})})};d.$8=function(){var a=this;if(!this.props.thread||this.props.view===b("MessengerView").DETAIL.COMPOSE)return null;var c=this.props.thread,d=this.props.participants,e=!1,f=!1;if(c.cannot_reply_reason==="blocked"){e=!0;c.is_canonical===!0||j(0,4973);d!=null||j(0,4974);var g=c.other_user_fbid;g!=null||j(0,4975);d=d.get(b("MercuryIDs").getParticipantIDFromUserID(g));d!=null||j(0,4976);b("MessengerState.bs").compute(this.props.viewer,function(d){d=d.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(a.props.viewer,d,c)&&(f=!0)})}if(e){g=this.$40()?"page":"person";if(f)return q.jsx("div",{className:"_4rv3",children:q.jsx("div",{className:"_2wy4",children:i._("You've blocked messages from this {name}. {unblock_now_button}",[i._param("name",g),i._param("unblock_now_button",q.jsx(l,{label:i._("Unblock Now"),onClick:this.$53,type:"secondary"}))])})});else return q.jsx("div",{className:"_4rv3",children:q.jsx("div",{className:"_2wy4",children:i._("This person isn't available right now.")})})}return q.jsx("div",{className:"_4rv3",children:q.jsx("div",{className:"_2wy4",children:b("MercuryReadOnlyReason").getReason(c.has_email_participant)})})};d.$55=function(){var a=this,c,d=(c=this.props)!=null?(c=c.thread)!=null?c.thread_id:c:c;d&&b("MessengerDialogs.bs").showDialog(function(){return q.jsx(n,{onLeave:function(){var c=b("MessengerURIStore").getState().activeThreadID===d;a.$54().leaveGroup(d);c&&b("MessengerActions").selectThread(null)},isViewerAdmin:!1,thread:a.props.thread})})};d.$56=function(a){var c=this,d=this.props.threadID,e=d===b("MessengerURIStore").getState().activeThreadID;this.$54().blockIgnoreOnMessengerDotCom(e,d,function(){c.$57(a)})};d.$57=function(a){var c=this.props,d=c.threadID;c=c.thread;b("MessengerDialogs.bs").showDialog(function(){return q.jsx(m,{participantName:a})});var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint(null).log()};d.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode()};d.$14=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE};d.$42=function(){return!!(this.$14()&&this.props.recipients&&this.props.recipients.size)};d.$40=function(){return!!this.$5()};d.$5=function(){return b("getPageIDFromThreadID")(this.props.threadID)};d.$6=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({showMenu:b})},function(){a.setState({showMenu:!1})},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED):this.setState({showMenu:!1})};d.$7=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({disableInput:b})},function(){a.setState({disableInput:!1})},b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED):this.setState({disableInput:!1})};d.$4=function(a,c){var d=a.message_count;c=!!c;if(b("CurrentUser").isWorkUser()&&c&&d===1&&this.props.viewer){c=b("MessengerState.bs").getThreadMessagesRangeNow(this.props.viewer,a.thread_id,0,1);return!s(b("immutable").List(c))}return d>0};d.$58=function(a,b){b=s(b);var c=!!a;c&&b&&this.$59(a)};d.$59=function(a){var c=b("XMNCommercePageNullStateCTAController").getURIBuilder();new(b("AsyncRequest"))().setURI(c.getURI()).setMethod("POST").setData({page_id:a}).setHandler(function(a){a&&a.payload?this.setState({showNullState:!0,nullStateCTA:a.payload}):this.setState({showNullState:!1,disableNullState:!1})}.bind(this)).send()};d.$3=function(a,c){var d=this,e=a.message_count,f=!!c;if(b("CurrentUser").isWorkUser()&&f&&e===1&&this.props.viewer){b("MessengerState.bs").getThreadMessagesRange(this.props.viewer,a.thread_id,0,1,function(a){return d.$58(c,b("immutable").List(a||[]))});return}a=e===0;f&&a?this.$59(c):this.setState({showNullState:!1,disableNullState:!1})};d.$2=function(){return{pendingActionsBypassed:!1,currentValue:"",nullStateCTA:null,showMenu:!1,disableInput:!1,showNullState:!1,disableNullState:!1}};d.$54=function(){var a;a=(a=this.props.viewer)!=null?a:b("CurrentUser").getID();return b("MercuryThreadActions").getForFBID(a)};d.testUtils_renderRawP2PSendMoneyButton=function(){return this.$39()};d.replyToMention=function(a){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(a)};return c}(q.PureComponent);a.propTypes={canReply:b("prop-types").bool,disableAutofocus:b("prop-types").bool,fileUploader:b("prop-types").object,hideActions:b("prop-types").bool,mentionsEnabled:b("prop-types").bool,onCustomLikeSelect:b("prop-types").func,onMessageSend:b("prop-types").func,onPhotoUploadComplete:b("prop-types").func,onPhotoUploadCancel:b("prop-types").func,onPhotoUploadFail:b("prop-types").func,onPhotoUploadSubmit:b("prop-types").func,onResize:b("prop-types").func,onStickerSelect:b("prop-types").func.isRequired,onVoiceClipCreate:b("prop-types").func,p2pPaymentConfig:b("prop-types").object,participants:b("prop-types").instanceOf(b("immutable").Map),recipients:b("prop-types").instanceOf(b("immutable").List),sharePreview:b("prop-types").object,threadID:b("prop-types").string,threadFBID:b("prop-types").string,thread:b("prop-types").object,view:b("prop-types").string,viewer:b("prop-types").string,replyingToMessage:b("prop-types").object,onCancelReplyingToMessage:b("prop-types").func,openPostComposerInSameWindow:b("prop-types").bool};e.exports=a}),null);
__d("MessengerComposerContainerImpl.react",["fbt","requireCond","AsyncRequest","AsyncUploadRequest","Bootloader","CurrentUser","EmojiDispatcher","EmojiLikeUtils","EmojiState","KeyEventController","MercuryAttachment","MercuryConfig","MercuryIDs","MercuryLocalIDs","MercuryMessageActions","MercuryMessageObject","MercurySendMessageHandler","MercuryThreadActions","MercuryThreadIDMap","MercuryThreadInformer","MessageRequestUtils","MessengerActions","MessengerComposer.react","MessengerComposerActions","MessengerComposerM4React.re","MessengerDialogs.bs","MessengerEmojiUsageUtils","MessengerPageComposerM4React.re","MessengerSimpleDialogReact.bs","MessengerState.bs","MessengerSurfaceType.bs","MessengerView","MNPlatformTagsDataManager","P2PPaymentConfig","PhotosUploadID","React","ReactDOM","RepliedToMessageStatusForGraphQL","SubscriptionsHandler","cr:1192333","XMessagingSetThreadNameController","getPageIDFromThreadID","gkx","immutable","prop-types","EmojiStateStore"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerComposerM4React.re").make,i=b("MessengerPageComposerM4React.re").make,j=b("MessengerSimpleDialogReact.bs").jsComponent,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$6=function(a,c,e){d.props.hostProps&&d.props.hostProps.messageSentCallback();b("EmojiState").updateRecentlyUsed(b("MessengerEmojiUsageUtils").findAllEmojis(a));if(!d.props.canReply){e&&e(null);return!1}var f=null,g=!1;d.$13(a,c)||(g=d.$14(function(e){var g=d.$2.constructUserGeneratedMessageObject(a,d.props.source,e);g=babelHelpers["extends"]({},g);e=b("MercuryIDs").getUserIDFromThreadID(e);if(b("MNPlatformTagsDataManager").hasThreadTags(e)){e=b("MNPlatformTagsDataManager").getThreadTags();g.tags=e||[]}c&&(c.shareable_attachment&&(g.shareable_attachment=c.shareable_attachment),c.profile_ranges&&(g.profile_ranges=g.profile_xmd=c.profile_ranges));f=g;return g}));e&&e(g?f:null);f=null;return g},d.$8=function(a,b){d.$3.cancelAttachmentPlaceholder(b.upload_id,b)},d.$7=function(a,b){d.$3.confirmAttachmentPlaceholder(b.upload_id,b)},d.$9=function(a,c){d.$3.cancelAttachmentPlaceholder(c.upload_id,c);var e=(c==null?void 0:(a=c.errorDialogParams)==null?void 0:a.title)||g._("Upload failed"),f=c==null?void 0:(a=c.errorDialogParams)==null?void 0:a.body;if(f!=null&&typeof f!=="string"&&f.__html!=null)b("MessengerDialogs.bs").showDialog(function(){return k.jsx(j,{title:e,serverHTML:f})});else{var h=g._("Please try again. Make sure you are uploading a valid file.");b("MessengerDialogs.bs").showDialog(function(){return k.jsx(j,{title:e,body:h})})}},d.$10=function(a,b){d.$14(function(a){return d.$2.constructAttachmentMessageObject(d.props.source,a)},function(a){d.$3.addAttachmentPlaceholder(a,b.upload_id,b),d.handleMessageSentToPendingThread()})},d.handleAudioUpload=function(a){var c="upload_"+b("PhotosUploadID").getNewID();d.$1.sendAttachment(d.props.threadID,l(c),d.props.source);var e={};e[c]=a;c=new(b("AsyncUploadRequest"))(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setRelativeTo(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).setData({voice_clip:!0}).setFiles(e);d.$4.addSubscriptions(c.subscribe("success",function(a,b){return d.$15(b)}));c.send()},d.$11=function(a){return d.$14(function(b){return d.$2.constructStickerMessageObject(a,d.props.source,b)})},d.$12=function(a,c,e){var f=d.props.threadID,g=d.$2.constructUserGeneratedMessageObject(a.emoji,d.props.source,f);g.has_attachment=!1;return d.$14(function(a){b("EmojiLikeUtils").setEmojiSize(g,c);return b("EmojiLikeUtils").setEmojiSource(g,e)})},d.handleMessageSentToPendingThread=function(){d.props.thread&&b("MessageRequestUtils").isMessageRequest(d.props.thread)&&b("MercuryThreadActions").getForFBID(d.props.viewer).movePendingToInbox(d.props.threadID)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("MercurySendMessageHandler").getForFBID(this.props.viewer);this.$3=b("MercuryMessageActions").getForFBID(this.props.viewer);this.$2=b("MercuryMessageObject").getForFBID(this.props.viewer);this.$5=b("MercuryThreadInformer").getForFBID(this.props.viewer);this.$4=new(b("SubscriptionsHandler"))();b("EmojiDispatcher").explicitlyRegisterStores([b("EmojiStateStore")]);this.props.onMount&&this.props.onMount(this);this.$4.addSubscriptions(b("KeyEventController").registerKey("ESCAPE",function(){a.props.replyingToMessage&&(a.props.onCancelReplyingToMessage&&a.props.onCancelReplyingToMessage())},function(a,c){return!!(a.key==="Escape"&&b("KeyEventController").filterEventTypes(a,c)&&b("KeyEventController").filterEventModifiers(a,c))}))};d.componentWillUnmount=function(){this.$4.release()};d.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput()};d.render=function(){var a=this,c;c=(c=this.props.thread)==null?void 0:c.composer_input_disabled;var d=this.props.hostProps?this.props.hostProps.hideActions:!1,e=this.props.surface===b("MessengerSurfaceType.bs").workQuickchat;c={canReply:this.props.canReply,disableAutofocus:this.props.disableAutofocus,disableInput:c,fileUploader:this.props.fileUploader,hideActions:d,mentionsEnabled:!0,onMessageSend:this.$6,onPhotoUploadComplete:this.$7,onPhotoUploadCancel:this.$8,onPhotoUploadFail:this.$9,onPhotoUploadSubmit:this.$10,onResize:this.props.onResize,onStickerSelect:this.$11,onCustomLikeSelect:this.$12,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,participants:this.props.participants,recipients:this.props.recipients,ref:function(b){return a.refsComposer=b},sharePreview:this.props.sharePreview,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer};if(b("cr:1192333")&&!e)return k.jsx(b("cr:1192333").make,babelHelpers["extends"]({},c,{threadId:this.props.threadID,showBotMenu:!1,workChatContentApps:this.props.workChatContentApps}));else if(!b("CurrentUser").isWorkUser()||b("gkx")("1072568")&&!e)if(b("getPageIDFromThreadID")(this.props.threadID))return k.jsx(i,babelHelpers["extends"]({},c,{threadId:this.props.threadID,onVoiceClipCreate:this.handleAudioUpload,p2pPaymentConfig:b("P2PPaymentConfig").config,threadFbid:this.props.threadFBID}));else return k.jsx(h,babelHelpers["extends"]({},c,{threadId:this.props.threadID,showBotMenu:!1,onVoiceClipCreate:this.handleAudioUpload,p2pPaymentConfig:b("P2PPaymentConfig").config,threadFbid:this.props.threadFBID}));else return k.jsx(b("MessengerComposer.react"),babelHelpers["extends"]({},c,{threadID:this.props.threadID,threadFBID:this.props.threadFBID,openPostComposerInSameWindow:this.props.openPostComposerInSameWindow,p2pPaymentConfig:b("P2PPaymentConfig").config,onVoiceClipCreate:this.handleAudioUpload}))};d.$13=function(a,b){return a?!1:!(b&&(b.shareable_attachment||b.profile_ranges.length>0))};d.$15=function(a){var b=a.getName();a=a.getResponse().payload.metadata[0].audio_id;this.$3.confirmAttachmentPlaceholder(b,{upload_id:b,audio_ids:[a]})};d.handleFileUpload=function(a){var b=this;a=a.reduce(function(a,b){var c=b.type.split("/")[0];a[c]?a[c].push(b):a.other.push(b);return a},{audio:[],image:[],other:[]});a.audio.forEach(function(a){return b.handleAudioUpload(a)});this.refsComposer&&this.refsComposer.handleFileUpload(a.image.concat(a.other))};d.handleTextDropped=function(a){this.refsComposer&&this.refsComposer.handleTextDropped(a)};d.$14=function(a,c){var d=this.props.threadID,e=this.props.recipients,f,g=!d&&e&&e.size>1;g&&(d=b("MercuryLocalIDs").generateThreadID(),f=this.props.newGroupName);if(!d)return!1;a=a(d);if(g){g=e.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray();b("MessengerState.bs").createNewLocalThread(this.props.viewer,d,g.concat(b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)));a.offline_threading_id=b("MercuryIDs").tokenize(d).value;a.specific_to_list=g}else this.props.participants!=null&&this.props.participants.size!=0&&(a.participants_to_hash=this.props.participants.map(function(a){return a.id}).toArray());if(this.props.replyingToMessage&&this.props.replyingToMessage.message_id){e=b("MessengerState.bs").getMessagesFromIDs(b("CurrentUser").getID(),[this.props.replyingToMessage.message_id]);e=e.length>0?e[0]:null;a.replied_to_message={status:e?b("RepliedToMessageStatusForGraphQL").VALID:b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE,message:e};this.props.onCancelReplyingToMessage&&this.props.onCancelReplyingToMessage()}c?c(a):this.$3.send(a,this.handleMessageSentToPendingThread);this.props.view===b("MessengerView").DETAIL.COMPOSE&&(b("MercuryAttachment").get(a).length>0&&b("MessengerComposerActions").moveDraftToNextThread(d),b("MessengerComposerActions").exitComposeState(),b("MercuryIDs").isLocalThread(d)?this.$5.subscribeOnce("messages-updated",function(a,c){a=b("MercuryThreadIDMap").get();if(a.canLinkExternally(d)){if(b("gkx")("836564")&&f&&f!==""){c=b("XMessagingSetThreadNameController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:a.getServerIDFromClientIDNow(d),thread_name:f}).send();b("Bootloader").loadModules(["WorkChatActivityTypedLogger","WorkChatActivityEvent"],function(a,b){new a().setEvent(b.NAMED_GROUP_CHAT_CREATION_FROM_SLASH_CHAT).log()},"MessengerComposerContainerImpl.react")}b("MessengerActions").selectThread(d)}}):b("MessengerActions").selectThread(d));this.focusInput();return!0};d.resetDrag=function(){this.refsComposer&&this.refsComposer.exitCurrentMode()};return c}(k.PureComponent);a.propTypes={canReply:(c=b("prop-types")).bool,disableAutofocus:c.bool,fileUploader:c.object,onMount:c.func,onResize:c.func,participants:c.instanceOf(b("immutable").Map),recipients:c.instanceOf(b("immutable").List),sharePreview:c.object,workChatContentApps:c.instanceOf(b("immutable").OrderedMap),hostProps:c.object,threadID:c.string,threadFBID:c.string,thread:c.object,view:c.string,viewer:c.string,replyingToMessage:c.object,onCancelReplyingToMessage:c.func,newGroupName:c.string,openPostComposerInSameWindow:c.bool};function l(a){return{upload_id:a,preview_attachments:[{upload_id:a,attach_type:"photo",preview_uploading:!0}]}}e.exports=a}),null);
__d("MessengerComposerContainer.react",["MessengerComposerContainerImpl.react","withMessengerSource","withMessengerSurface"],(function(a,b,c,d,e,f){"use strict";a=b("withMessengerSurface")(b("withMessengerSource")(b("MessengerComposerContainerImpl.react")));e.exports=a}),null);
__d("MessengerLeaveGroupAction",["MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercuryThreadInfo","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){a={leaveGroup:function(a,c){if(b("MercuryThreadInfo").isEmptyLocalThread(a))return;var d=b("MercuryMessageObject").getForFBID(c);d=d.constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a.thread_id,"log:unsubscribe",{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(c)]});a=b("MercuryMessageActions").getForFBID(c);a.send(d)}};e.exports=a}),null);
__d("MessengerConversationContainer.react",["Bootloader","ImmutableObject","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryMessageStore","gkx","immutable","MercuryThreadActions","MessagingTagConstants","MessengerActions","MessengerBlockedGroupThreadWarningDialogReact.bs","MessengerConfig","MessengerConversation.react","MessengerDialogs.bs","MessengerHotLikePreviewEvents","MessengerIgnoredGroupThreadWarningDialogReact.bs","MessengerLeaveGroupAction","MessengerState.bs","MessengerParticipantUtils.bs","MessengerParticipants.bs","prop-types","React","SubscriptionsHandler","MessengerServerErrorDialogReact.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("MercuryThreadActions").get(),h=b("React"),i=b("MessengerServerErrorDialogReact.bs").jsComponent,j=b("MessengerBlockedGroupThreadWarningDialogReact.bs").jsComponent,k=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").jsComponent,l=200,m=b("gkx")("833128");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoaded:!1,isLoading:!0,messages:b("immutable").List()},d.$2=void 0,d.$3=!1,d.$4=void 0,d.$5=void 0,d.$6=void 0,d.$7=!1,d.$14=function(){d.refs.conversation&&d.refs.conversation.scrollToBottom&&typeof d.refs.conversation.scrollToBottom==="function"&&d.refs.conversation.scrollToBottom()},d.$16=function(){var a=d.props.thread;if(a==null)return;b("MessengerBlockedGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)},d.$19=function(){var a=d.props.thread;if(a==null)return;b("MessengerIgnoredGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)},d.$17=function(a){var c=d.props.thread;if(c==null)return;b("MessengerLeaveGroupAction").leaveGroup(c,d.props.viewer);d.$21(a)},d.$20=function(a){var c=d.props.thread;if(c==null)return;var e=c.thread_id;g.changeFolder(e,b("MessagingTagConstants").other);b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(a,c,d){new a().setEvent(c.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(e)).setPlatform(d.MESSENGERDOTCOM).log()},"MessengerConversationContainer.react");d.$21(a)},d.$18=function(a){d.$21(a)},d.$13=function(){if(d.state.isLoading||d.state.isLoaded)return;d.setState({isLoading:!0});d.$1.fetchMoreMessages()||d.setState({isLoading:!1,isLoaded:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){this.$2&&this.$2.release(),window.clearTimeout(this.$6)};d.componentDidMount=function(){this.$8(this.props.threadID),this.$9()?this.$10():this.$11()&&this.$12()};d.componentDidUpdate=function(a){var b=this.props.threadID!==a.threadID;b&&(this.$9()?this.$10(a.threadID):this.$11()&&this.$12(a.threadID))};d.UNSAFE_componentWillReceiveProps=function(a){this.props.threadID!==a.threadID&&(this.setState({isLoading:!0,messages:b("immutable").List()}),this.$8(a.threadID))};d.render=function(){var a=this,c=this.state.messages;c=c.some(function(a){return a.log_message_type==="log:error-msg"});b("MessengerConfig").ErrorDialog&&c&&!this.$7&&b("MessengerDialogs.bs").showDialog(function(){return h.jsx(i,{onMount:function(){return a.$7=!0}})});return h.jsx(b("MessengerConversation.react"),{className:this.props.className,contact:this.props.contact,deliveryTimestamp:this.props.deliveryTimestamp,fetchMessages:this.$13,isCanonical:b("MercuryIDs").isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,hideContextBanner:this.props.hideContextBanner,messages:this.state.messages,onRead:this.props.onMarkRead,onVoiceClipCreate:this.props.onVoiceClipCreate,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.props.readReceipts,ref:"conversation",thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer,bottomOffset:this.props.bottomOffset})};d.handleResize=function(){this.refs.conversation.handleResize()};d.isScrolledToBottom=function(){return!!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom())};d.$9=function(){var a=this,c=this.props.thread;if(c==null)return!1;var d=c.thread_id;if(!this.$15())return!1;var e=!1;b("MessengerState.bs").compute(this.props.viewer,function(d){d=d.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(a.props.viewer,d,c)&&(e=!0)});if(!e)return!1;d=b("MessengerBlockedGroupThreadWarningDialogReact.bs").getWantsToSee(d);return d?!1:!0};d.$11=function(){var a=this.props.thread;if(a==null)return!1;var c=a.thread_id;if(!this.$15())return!1;if(a.folder!=="inbox")return!1;if(!b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(this.props.fbid,this.props.ignoredIds,a))return!1;a=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").getWantsToSee(c);return a?!1:!0};d.$15=function(){var a=this.props.thread;if(a==null)return!1;if(b("MercuryIDs").isCanonical(this.props.threadID))return!1;return!a.is_subscribed?!1:!0};d.$10=function(a){var c=this,d=this.props.thread,e=[];b("MessengerState.bs").compute(this.props.viewer,function(a){a=a.blocked_ids;a=b("MercuryIgnoredBlockedParticipants.bs").participantsInGroupThread(c.props.viewer,a,d);a.length>=1&&a.forEach(function(a){b("MessengerParticipants.bs").get(a,function(a){e.push(a.name)})})});b("MessengerDialogs.bs").showDialog(function(){return h.jsx(j,{onSee:c.$16,onLeave:c.$17,onCancel:c.$18,prevThreadID:a,blockedNames:e})})};d.$12=function(a){var c=this;b("MessengerDialogs.bs").showDialog(function(){return h.jsx(k,{onSee:c.$19,onIgnore:c.$20,onCancel:c.$18,prevThreadID:a,threadID:b("MercuryIDs").getThreadFBIDFromThreadID(c.props.threadID)})})};d.$21=function(a){a==null&&b("MessengerActions").selectThread(null),b("MessengerActions").selectThread(a)};d.$22=function(){return m&&this.props.thread!=null&&this.props.thread.unread_count!=null&&this.props.thread.unread_count>0&&this.props.thread.unread_count<l?b("MessengerConfig").MessageLoadCount+this.props.thread.unread_count:b("MessengerConfig").MessageLoadCount};d.$8=function(a){var c=this;if(!a)return;this.setState({isLoaded:!1});this.$1&&this.$1.destroy();this.$7=!1;this.$1=new(b("MercuryMessageStore"))(a,this.$22());window.clearTimeout(this.$6);this.$6=window.setTimeout(function(){c.props.thread&&c.props.thread.message_count<1&&c.setState({isLoaded:!0,isLoading:!1})},6e3);this.$2&&this.$2.release();this.$2=new(b("SubscriptionsHandler"))();this.$2.addSubscriptions(this.$1.subscribe(function(a){c.setState({messages:c.$23(b("immutable").List(a.messages)),isLoading:!1})}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(b){if(a!==b.thread_id)return;c.$3=!0;c.$4=b;c.setState(function(a){return{messages:c.$23(a.messages)}});window.clearInterval(c.$5);c.$5=window.setInterval(c.$14,50)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a){window.clearInterval(c.$5)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a){window.clearInterval(c.$5)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,function(){c.$3=!1,c.$4=null}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,function(){c.$3=!1,c.$4=null}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(){window.clearInterval(c.$5),c.$3=!1,c.setState(function(a){return{messages:c.$23(a.messages)}})}))};d.$23=function(a){this.$3?a=a.set(a.size,this.$4):(a=a.filterNot(function(a){return a.is_like_preview}),this.$4=null);return a};return c}(h.PureComponent);a.propTypes={contact:(c=b("prop-types")).instanceOf(b("ImmutableObject")),deliveryTimestamp:c.number.isRequired,readReceipts:c.any,fbid:c.string.isRequired,hideContextBanner:c.bool,ignoredIds:c.any,onMarkRead:c.func.isRequired,onVoiceClipCreate:c.func,onReplyToMessage:c.func,thread:c.object,threadID:c.string.isRequired,viewer:c.string.isRequired,bottomOffset:c.number};e.exports=a}),null);
__d("MessengerDetailViewHeaderContainer.react",["requireCond","ImmutableObject","MercuryIDs","MercuryThreadIDMap","MessengerActions","MessengerComposerActions","MessengerComposeViewHeader.react","MessengerDetailViewHeaderReact.bs","MessengerState.bs","MessengerView","React","cr:1269789","immutable","prop-types","shallowEqual"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerDetailViewHeaderReact.bs").jsComponent,h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var c=a.getUniqueID(),e=a.getType(),f=a.getAuxiliaryData()||{};if(e==="thread"){var g=b("MercuryThreadIDMap").getForFBID(d.props.viewer);g.getClientIDFromServerID(c,function(a){b("MessengerComposerActions").moveDraftToNextThread(a),b("MessengerActions").selectThread(a)});b("MessengerComposerActions").exitComposeState()}else if(c===d.props.viewer&&d.props.recipients.size===0||e==="page"||e==="internal_bot_page"&&!f.canViewerAddToGroupChat){g=b("MercuryIDs").getThreadIDFromUserID(c);b("MessengerComposerActions").moveDraftToNextThread(g);b("MessengerComposerActions").exitComposeState();b("MessengerActions").selectThread(b("MercuryIDs").getThreadIDFromUserID(c))}else b("MessengerComposerActions").addToken(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){var c=a.contactData;a=babelHelpers.objectWithoutPropertiesLoose(a,["contactData"]);var d=this.props,e=d.contactData;d=babelHelpers.objectWithoutPropertiesLoose(d,["contactData"]);return!b("shallowEqual")(a,d)||!b("shallowEqual")(c,e)};d.render=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?b("cr:1269789")!=null?h.jsx(b("cr:1269789"),{onAddRecipient:this.$1,onRemoveRecipient:this.$2,recipients:this.props.recipients}):h.jsx(b("MessengerComposeViewHeader.react"),{forceHideClearButton:!0,onAddRecipient:this.$1,onRemoveRecipient:this.$2,onResize:this.props.onResize,onClear:null,thread:this.props.thread,recipients:this.props.recipients,viewer:this.props.viewer,isWorkUser:this.props.isWorkUser,shouldShowCreateGroupButton:this.props.shouldShowCreateGroupButton,onCreateGroupButtonClicked:this.props.onCreateGroupButtonClicked}):h.jsx(g,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,shouldUseRelay:!1,montageData:b("MessengerState.bs").montage(this.props.messengerState)})};d.$2=function(a){b("MessengerComposerActions").removeToken(a)};return c}(h.Component);a.propTypes={contactData:(c=b("prop-types")).object,infoPanelCollapsed:c.bool.isRequired,onInfoPanelToggle:c.func.isRequired,onResize:c.func.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,recipients:c.instanceOf(b("immutable").List).isRequired,thread:c.instanceOf(b("ImmutableObject")),view:c.string,viewer:c.string.isRequired,isWorkUser:c.bool.isRequired,messengerState:c.object.isRequired,shouldShowCreateGroupButton:c.bool,onCreateGroupButtonClicked:c.func};e.exports=a}),null);
__d("MessengerContactListRowActions",["AsyncRequest","FantaFRXUtil","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MessengerContactActions.bs","MessengerContactAdapters","URI","immutable"],(function(a,b,c,d,e,f){"use strict";var g,h=b("MessengerContactActions.bs").actions;a=function(a){var c=a.action,d=a.contact,e=a.viewer,f=a.thread,i=a.participants;a=a.handleContactSelect;d=b("MessengerContactAdapters").fromMercuryParticipant(d);if(b("MercuryIDs").getUserIDFromParticipantID(d.uid)!==e)switch(c){case h.MESSAGE:a(d);break;case h.PROFILE:i=i.get(d.uid);i&&i.href?window.open(i.href):a(d);break;case h.REMOVE:if(!b("MercuryThreadInfo").isEmptyLocalThread(f)){i=new(g||(g=b("URI")))("/chat/remove_participants/");i.addQueryData({uid:b("MercuryIDs").getUserIDFromParticipantID(d.uid),tid:f.thread_fbid});a=new(b("AsyncRequest"))(i);a.send()}break;case h.REPORT_GROUP_CHAT_USER:b("FantaFRXUtil").FRXClicked(f.thread_id,!0,d.uid);break}i=b("MercuryIDs").getUserIDFromParticipantID(d.uid);a=f.thread_fbid;if(i==null||a==null)return;switch(c){case h.REMOVE_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(f)||b("MercuryThreadActions").getForFBID(e).changeGroupAdmins(a,[i],!1);break;case h.ADD_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(f)||b("MercuryThreadActions").getForFBID(e).changeGroupAdmins(a,[i],!0);break}};e.exports={handleContactActions:a}}),null);
__d("MessengerInfoPanelAssociatedObjectSection.react",["cx","fbt","CurrentUser","Image.react","Link.react","MessengerInfoPanelSectionReact.bs","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerInfoPanelSectionReact.bs").jsComponent,j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=this.props,d=c.isCollapsed,e=c.onToggle,f=c.associatedObject;c=c.customColor;a=(a=f.verse_group_link)!=null?a:f.action_link+"?ref=MessengerInfoPanelAssociatedObjectSection";return j.jsx(i,{customColor:c,isCollapsible:!0,isCollapsed:d,onToggle:e,title:h._("Part of"),children:j.jsxs(b("Link.react"),{href:a,target:"_blank",style:{textDecoration:"none"},className:"_35-k",children:[this.$1(),this.$2()]})})};d.$1=function(){var a=this.props.associatedObject;a=a.profile_picture;return j.jsx("div",{children:j.jsx(b("Image.react"),{className:"_35-n",src:a})})};d.$2=function(){var a=this.props.associatedObject,c=a.name,d=b("TimeSpentRoomTypeEnum")[a.room_type];a=a.verse_group_link;var e=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return j.jsxs("div",{className:"_35-o",children:[j.jsx("div",{className:"_35-p",children:c}),j.jsxs("div",{className:"_35-q",children:[!a&&h._({"GROUP":"Go to {productName} Group","EVENT":"Go to {productName} Event"},[h._param("productName",e),h._enum(d,b("TimeSpentRoomTypeEnum$FbtEnum"))]),a&&h._("Go to Facebook Chat Group")]})]})};return c}(j.PureComponent);a.propTypes={isCollapsed:(c=b("prop-types")).bool.isRequired,onToggle:c.func.isRequired,customColor:c.string,associatedObject:c.instanceOf(Object).isRequired};e.exports=a}),null);
__d("MessengerApprovalRequester.react",["cx","fbt","CurrentUser","Link.react","MercuryIDs","MessengerParticipants.bs","MercuryThreadActions","MessengerCheckmarkIconSVGM4React.re","MessengerContactImageReact.bs","MessengerCrossIconSVGM4React.re","MessengerDotComAndInboxM4Check.bs","MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation","MessengerTextWithEmoticons.react","React","ShimButton.react","WebGraphQL"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MercuryThreadActions").get(),j=b("MessengerCheckmarkIconSVGM4React.re").make,k=b("MessengerContactImageReact.bs").jsComponent,l=b("MessengerCrossIconSVGM4React.re").make,m=b("React"),n=32,o=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w _7tla":"_3szo";function p(a,c,d){if(!c||d===null)return null;var e=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c));e=e&&e.name;if(!e)return null;if(d===0)return b("CurrentUser").isWorkUser()&&a===c?h._("Requested to join"):h._("Added by {inviter}.",[h._param("inviter",e)]);else if(d===1)return h._("Invited by {inviter}.",[h._param("inviter",e)]);return null}function q(a){var c=a.name,d=a.imageSRC,e=a.inviterFBID,f=a.isMessengerUser,g=a.requestSource;a=a.userFBID;c=m.jsx(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c});a=p(a,e,g);e=a?m.jsxs("span",{className:"_4e87",children:[m.jsx("div",{children:c}),m.jsx("div",{className:"_4egt",children:a})]}):m.jsx("span",{className:"_3tkx",children:c});return m.jsxs("div",{className:"_3szq _4fq",children:[m.jsx(k,{className:"_5l39 _5rmm",isMessengerUser:f,size:n,src:d}),e]})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(b("MessengerDotComAndInboxM4Check.bs").yes)return this.$1();else return this.$2()};d.$1=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID,i=a.requestSource;a=a.userFBID;c=c?h._("Approve"):h._("Accept");return m.jsxs("div",{className:o,children:[m.jsx(q,{userFBID:a,name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:i}),m.jsxs("div",{className:"_4fs _7tlb",children:[m.jsx(b("ShimButton.react"),{"aria-label":h._("Ignore"),className:"_7tlc _3-91",href:"#",onClick:this.$3.bind(this),children:m.jsx(l,{size:20})}),m.jsx(b("ShimButton.react"),{"aria-label":c,className:"_7tlc",href:"#",onClick:this.$4.bind(this),children:m.jsx(j,{size:20})})]})]})};d.$2=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID,i=a.requestSource;a=a.userFBID;c=c?h._("Approve"):h._("Accept");return m.jsxs("div",{className:o,children:[m.jsx(q,{userFBID:a,name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:i}),m.jsxs("div",{className:"_3ihq _4fs",children:[m.jsx(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$4.bind(this),children:c}),m.jsx("span",{className:"_1m8c"}),m.jsx(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$3.bind(this),children:h._("Ignore")})]})]})};d.$4=function(a){a=this.props;var c=a.isAdminRequired,d=a.threadFBID,e=a.userFBID;a=a.onUpdated;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[e],response:"ACCEPT",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):i.acceptToJoinableGroup(d,e);a&&a(e)};d.$3=function(a){a=this.props;var c=a.isAdminRequired,d=a.threadFBID,e=a.userFBID;a=a.onUpdated;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[e],response:"DENY",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):i.rejectToJoinableGroup(d,e);a&&a(e)};return c}(m.Component);e.exports=a}),null);
__d("MessengerTextWithEmojiInput.react",["cx","CompositeDraftDecorator","DraftEditor.react","EditorState","MessengerEmojiSpan.react","React","XUICloseButton.react","createContentStateForTextWithMessengerEmoji","getEntityMatcher","getVisibleValueForContentStateWithMessengerEmoji","handleBeforeInputForMessengerEmoji","handlePastedTextForMessengerEmoji","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$6=function(a){if(a!==d.state.editorState){var b=!a.getCurrentContent().hasText();d.setState({editorState:a,isEmpty:b});d.props.onChange&&d.props.onChange(a)}},d.$3=function(a,c){if(d.props.maxLength!=null&&d.props.maxLength<=d.getValue().length&&c.getSelection().isCollapsed())return"handled";a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return"not-handled";d.setState({editorState:a});return"handled"},d.$4=function(a,c,e){c=d.props.maxLength;if(c!=null){c=b("handlePastedTextForMessengerEmoji")(d.getValue().length,c,a,e);d.setState({editorState:c});return"handled"}return"not-handled"},d.$5=function(a,b){if(d.props.onReturn){d.props.onReturn(a,b);return"handled"}return"not-handled"},d.$8=function(){var a=d.$1("");d.setState({editorState:a});d.props.onChange&&d.props.onChange(a)},d.state={editorState:d.$1(d.props.initialValue),isEmpty:d.props.initialValue==null||d.props.initialValue.length===0},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(a){return b("EditorState").createWithContent(b("createContentStateForTextWithMessengerEmoji")(a||""),this.$2())};d.componentDidMount=function(){this.props.disableAutoFocus!==!0&&b("setImmediate")(this.focusInput.bind(this))};d.render=function(){var a;a=(a=this.props.placeholder)==null?void 0:a.toString();return h.jsxs("div",{className:b("joinClasses")(this.props.className,"_30e7"),children:[h.jsx("div",{className:"_5j5f _3oh-",children:h.jsx(b("DraftEditor.react"),{editorState:this.state.editorState,handleBeforeInput:this.$3,handlePastedText:this.$4,handleReturn:this.$5,onChange:this.$6,placeholder:a,ref:"input",spellCheck:!1,stripPastedStyles:!0,textAlignment:"left"})}),this.props.showLengthIndicator===!0&&this.props.maxLength!=null?this.$7():null,h.jsx(b("XUICloseButton.react"),{size:"small",onClick:this.$8,className:(this.state.isEmpty?"hidden_elem":"")+" _5j5l"})]})};d.$7=function(){return this.getValue().length!==0?h.jsxs("div",{className:"_32y6",children:[this.getValue().length,"/",this.props.maxLength]}):h.jsx("div",{className:"_32y6"})};d.$2=function(){return new(b("CompositeDraftDecorator"))([{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"}),component:b("MessengerEmojiSpan.react")}])};d.getValue=function(){var a=this.state.editorState.getCurrentContent();return b("getVisibleValueForContentStateWithMessengerEmoji")(a)};d.focusInput=function(){this.refs.input.focus(),this.$6(b("EditorState").moveFocusToEnd(this.state.editorState))};return c}(h.PureComponent);e.exports=a}),null);
__d("MessengerThreadPhotoUploader.react",["cx","fbt","requireCond","FileInput","FileInputUploader","Link.react","MercuryConfig","MessengerDotComAndInboxM4Check.bs","cr:943115","React","ReactDOM","SubscriptionsHandler","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("createReactClass_DEPRECATED")({displayName:"MessengerThreadPhotoUploader",_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:!1,propTypes:{onComplete:(a=b("prop-types")).func.isRequired,onFail:a.func,onStart:a.func,uri:a.string},getDefaultProps:function(){return{uri:b("MercuryConfig").upload_url}},componentDidMount:function(){var a=b("ReactDOM").findDOMNode(this.refs.input),c=new(b("FileInput"))(b("ReactDOM").findDOMNode(this.refs.form),b("ReactDOM").findDOMNode(this.refs.uploadButton),a);a=new(b("FileInputUploader"))(a).setURI(this.props.uri).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(a.subscribe("success",this._handleAllUploadsCompleted),a.subscribe("failure",this._handleLastUploadFailed));this._subscriptions=d;this._uploader=a;this._fileInput=c},componentWillUnmount:function(){this._uploadIsInProgress||this._doUnmountComponents()},render:function(){var a=h._("Click to change the image");return i.jsxs("form",{action:this.props.uri,method:"post",ref:"form",children:[i.jsx("input",{type:"hidden",name:"attach_id",ref:"attachID"}),i.jsx("input",{type:"hidden",name:"images_only",value:"true"}),i.jsxs("div",{className:"_m _4q60"+(b("MessengerDotComAndInboxM4Check.bs").yes?"":" _2lyy")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _80cm":""),children:[b("MessengerDotComAndInboxM4Check.bs").yes?b("cr:943115")&&b("cr:943115").make({fill:"#000000",size:24}):null,i.jsx(b("Link.react"),{className:"_4q61 _2lyz",ref:"uploadButton",children:i.jsx("span",{"aria-hidden":"true",children:h._("Edit")})}),i.jsx("input",{"aria-label":h._("Change group photo"),type:"file",className:"_n",name:"attachment[]",accept:".jpg,.png,.jpeg,.bmp,.tif,.tiff",ref:"input",onChange:this._handleFileInputChange,title:a})]})]})},_handleAllUploadsCompleted:function(a,b){this._uploadIsInProgress=!1,this.props.onComplete&&this.props.onComplete(b.response.payload),this.isMounted()||this._doUnmountComponents()},_handleLastUploadFailed:function(a,b){this._uploadIsInProgress=!1,this.props.onFail&&this.props.onFail(b),this.isMounted()||this._doUnmountComponents()},_handleFileInputChange:function(a){a.target.value&&this._uploader&&(this._uploader.send(),this._uploadIsInProgress=!0,this.props.onStart&&this.props.onStart())},_doUnmountComponents:function(){this._subscriptions&&this._subscriptions.release(),this._fileInput&&this._fileInput.destroy(),delete this._subscriptions,delete this._uploader}});e.exports=c}),null);
__d("MessengerThreadInfoPanelScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React","ReactDOM","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={prevHeight:-1,prevIsScrolledToBottom:!1},d.$1=null,d.isScrolledToBottom=function(){if(d.refs.scrollable)return d.refs.scrollable.isScrolledToBottom();else return!0},d.getHeight=function(){if(d.refs.scrollable)return b("ReactDOM").findDOMNode(d.refs.scrollable).offsetHeight;else return 0},d.$2=function(){var a=d.isScrolledToBottom(),b=d.getHeight();(d.state.prevIsScrolledToBottom!==a||d.state.prevHeight!==b)&&d.setState({prevHeight:b,prevIsScrolledToBottom:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return g.jsx(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$2,children:g.jsx(b("MessengerScrollableArea.react"),{height:"100%",onScroll:this.$2,ref:"scrollable",children:this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)})})};return c}(g.Component);a.propTypes={children:b("prop-types").func.isRequired};e.exports=a}),null);
__d("MessengerDetailView.react",["cx","fbt","invariant","requireCond","Bootloader","BootloadOnRender.react","CurrentUser","CustomColorHighlighting.react","DataTransfer","JSResource","LazyComponent.react","MercuryCanonicalGroupThreadStore","MercuryConfig","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MessengerActions","MessengerComposerContainer.react","MessengerComposerStore","MessengerConversation.react","MessengerConversationContainer.react","MessengerDeliveryReceipt.bs","MessengerDetailViewHeaderContainer.react","MessengerDomIDs.bs","MessengerDotComAndInboxM4Check.bs","MessengerErrorBoundary.react","MessengerGalahadGating.bs","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerSettingsActions","MessengerSettingsStore","MessengerState.bs","MessengerThreadInfoPanelContainer.react","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerURIStore","MessengerView","Parent","PresenceStatus","React","SubscriptionsHandler","WorkChatAvailabilityStatusLoader","WorkChatRedesignedMessageListCheck.re","WorkGalahadSettings","compactArray","createReactClass_DEPRECATED","gkx","immutable","prop-types","WorkchatAppBridge","AvailableList","emptyFunction","ifRequired","joinClasses","lazyLoadComponent","cr:1186631","promiseDone","cr:895572","shallowCompare"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerDomIDs.bs").ids,k=b("React");b("WorkchatAppBridge").init();b("AvailableList");var l=b("lazyLoadComponent")(b("JSResource")("WorkChatGroupNameComposeViewHeader.react").__setRef("MessengerDetailView.react"));a=b("createReactClass_DEPRECATED")({displayName:"MessengerDetailView",_composer:void 0,_refsConversationContainer:null,_subscriptionsHandler:null,_participantSubscription:null,_userStatusLiveSubscription:null,_currentThreadIDForStatusSubscription:null,propTypes:{activeThread:b("prop-types").object,activeThreadID:b("prop-types").string,blockedIds:b("prop-types").any,deliveryReceipts:b("prop-types").object,messengerState:b("prop-types").object.isRequired,readReceipts:b("prop-types").any,view:b("prop-types").string,viewer:b("prop-types").string.isRequired,isWorkUser:b("prop-types").bool.isRequired,hostProps:b("prop-types").object,DetailViewHeaderComponent:b("prop-types").any.isRequired,hideGroupInfoInThreadInfoPanel:b("prop-types").bool,hideContextBanner:b("prop-types").bool,openPostComposerInSameWindow:b("prop-types").bool,suppressThreadInfoPanel:b("prop-types").bool,suppressSearchResults:b("prop-types").bool,bottomOffset:b("prop-types").number},calculateState:function(a,c){var d,e=this;c===void 0&&(c=!1);d=a.activeThreadID||((d=a.activeThread)==null?void 0:d.thread_id);var f=b("MessengerComposerStore").getState();if(a.view===b("MessengerView").DETAIL.COMPOSE){!f.recipients&&i(0,1840);var g=f.recipients;g.size===1?d=b("MercuryIDs").getThreadIDFromUserID(g.first().getUniqueID().toString()):g.size>1&&(d=b("MercuryCanonicalGroupThreadStore").getOrFetch(Array.from(g).map(function(a){return a.getUniqueID().toString()})))}g=this.props.activeThread;d&&!g&&(g=b("MessengerState.bs").getThreadMetaNow(a.viewer,d),!g&&!c&&b("MessengerState.bs").getThreadMeta(a.viewer,d,function(a){g=a}));c=b("immutable").Map();this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription);var h=g;if(h&&d){var j=h.participants;if(h.is_subscribed){var k=b("MercuryIDs").getParticipantIDFromUserID(a.viewer);j=j.concat([k])}k=b("MessengerParticipants.bs").getMultiEagerMap(j,function(a){e._participantSubscription=null,e.setState({participants:a})});j=k[0];k=k[1];this._participantSubscription=k;c=j}k=b("ifRequired")("MessengerUploadFilesStore",function(a){return a.getState()},function(){return b("immutable").Map({})});j=b("ifRequired")("MessengerSharePreviewStore",function(a){return a.getState()},function(){return b("immutable").Map({})});var l=b("ifRequired")("WorkChatContentAppStore",function(a){return a.getState()},function(){return b("immutable").Map({})});this._checkThreadUpdatedForStatusSubscription(h);return{infoPanelCollapsed:b("MessengerSettingsStore").getSettings().info_sidebar_collapsed,activeThreadID:d,composerState:f,messengerState:b("MessengerURIStore").getState(),contactData:b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(c,h),activeThread:h,participants:c,searchResults:b("MessengerThreadSearchStore").getState(),uploadFilesState:k,sharePreviewState:j,workChatContentAppsState:l,hideGroupInfoInThreadInfoPanel:!!a.hideGroupInfoInThreadInfoPanel,hideContextBanner:!!a.hideContextBanner,openPostComposerInSameWindow:!!a.openPostComposerInSameWindow}},getInitialState:function(){return babelHelpers["extends"]({dropTargetOverlayVisible:!1,isCreatingNewGroupChat:!1,newGroupName:""},this.calculateState(this.props,!0))},componentDidMount:function(){var a=this;this._subscriptionsHandler=new(b("SubscriptionsHandler"))();this._subscribeToSubscriptionsHandler([b("MessengerComposerStore"),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore"),b("MercuryCanonicalGroupThreadStore"),b("PresenceStatus")]);b("Bootloader").loadModules(["MessengerUploadFilesStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");b("Bootloader").loadModules(["MessengerSharePreviewStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");b("CurrentUser").isWorkUser()&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(b){b=b.store;a._subscribeToSubscriptionsHandler([b]);a._checkThreadUpdatedForStatusSubscription(a.state.activeThread)});b("CurrentUser").isWorkUser()&&b("gkx")("1192386")&&b("Bootloader").loadModules(["WorkChatContentAppStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");this.setState(this.calculateState(this.props,!1))},_subscribeToSubscriptionsHandler:function(a){var b=this,c=function(){b.setState(b.calculateState(b.props,!1))},d=[];a.forEach(function(a){a.hasChanged&&a.getDispatchToken&&a.addListener?d.push(a.addListener(c)):a.subscribe?d.push(a.subscribe("change",c)):a.addListener?d.push(a.addListener("change",c)):i(0,574)});if(d.length>0){this._subscriptionsHandler&&(a=this._subscriptionsHandler).addSubscriptions.apply(a,d)}},shouldComponentUpdate:function(a,c){return b("shallowCompare")(this,a,c)},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release(),this._subscriptionsHandler=null,this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription)},UNSAFE_componentWillReceiveProps:function(a){this.setState(this.calculateState(a,!1)),this.props&&this.props.activeThreadID!==a.activeThreadID&&this._cancelReplyingToMessage(),this.setState(function(c){var d=b("MessengerComposerStore").getState();return a.view!==b("MessengerView").DETAIL.COMPOSE||d.recipients.size<2||c.newGroupName===""?{newGroupName:"",isCreatingNewGroupChat:!1}:{}})},_checkThreadUpdatedForStatusSubscription:function(a){if(!b("CurrentUser").isWorkUser()||!b("WorkChatAvailabilityStatusLoader").isLoaded())return;var c=a==null?void 0:a.thread_id;if((a==null?void 0:a.thread_fbid)==null)return;if(this._currentThreadIDForStatusSubscription===c)return;var d=b("WorkChatAvailabilityStatusLoader").getStoreEnforce(),e=b("MercuryIDs").getUserIDFromThreadID(c);this._userStatusLiveSubscription!=null&&(this._userStatusLiveSubscription.dispose(),this._userStatusLiveSubscription=null);e!=null?(d.fetchUsersIfNeeded([e]),this._userStatusLiveSubscription=d.liveSubscribe(e)):a!=null&&b("gkx")("1222861")&&d.fetchUsersIfNeeded(b("compactArray")(a.participants.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)})));this._currentThreadIDForStatusSubscription=c},_renderMessageView:function(a){var c=null;return k.jsxs("div",{className:"_4_j4"+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj4":""),onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:"presentation",children:[this._renderGroupNameComposerHeader(),this._renderMainView(a),c,this._renderSearchView(a),this._renderFooterView(a),k.jsx("div",{className:(this.state.dropTargetOverlayVisible?"":"hidden_elem")+" _2fg6"}),this._renderUploadFiles(a)]})},render:function(){var a=this;if(this.props.view===b("MessengerView").DETAIL.GALLERY&&b("cr:1186631")!==null)return k.jsx(b("cr:1186631"),{});var c=this.state.activeThreadID,d=this.props.DetailViewHeaderComponent;if(this.props.hostProps&&this.props.hostProps.renderMinimal)return this._renderMessageView(c);else{var e=this._getMainLabelDetails();return k.jsxs("div",{"aria-labelledby":e.labelIDs,className:b("joinClasses")("_1t2u"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7sli":""),b("cr:895572")),role:"main",children:[k.jsxs("div",{className:"hidden_elem",id:j.MAIN_LABEL,children:[e.labelText," "]}),k.jsxs(b("CustomColorHighlighting.react"),{className:"_wsc",customColor:b("WorkChatRedesignedMessageListCheck.re").enabled?null:this.state.activeThread&&this.state.activeThread.solid_color,children:[k.jsx(d,{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed,isWorkUser:this.props.isWorkUser,messengerState:this.props.messengerState,shouldShowCreateGroupButton:b("gkx")("836564")&&this.state.composerState.recipients.size>=2&&c&&!this.state.isCreatingNewGroupChat,onCreateGroupButtonClicked:function(){a.setState({newGroupName:"",isCreatingNewGroupChat:!0})}}),k.jsxs("div",{className:"_20bp",children:[this._renderInfoPanel(),this._renderMessageView(c)]})]})]})}},_renderUploadFiles:function(a){if(!a)return null;var c=this.state.sharePreviewState.get(a);return k.jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerDragAndDrop.react").__setRef("MessengerDetailView.react"),placeholder:k.jsx("div",{}),component:k.jsx(b("LazyComponent.react"),{threadID:a,sharePreview:c,onResize:this._handleResize})})},_renderSearchView:function(a){return b("WorkGalahadSettings").isGalahadEnabled?null:a&&!this.props.mid&&this.props.query!=null?k.jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerThreadSearchContainer.react").__setRef("MessengerDetailView.react"),placeholder:k.jsx("div",{className:"_33p7 _5iwm"}),component:k.jsx(b("LazyComponent.react"),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null},_renderGroupNameComposerHeader:function(){var a=this;return this._shouldShowGroupNameComposer()?k.jsx(k.Suspense,{fallback:k.jsx("div",{}),children:k.jsx(l,{autoFocus:!b("gkx")("836564")&&this.state.isCreatingNewGroupChat,onChange:function(b){a.setState({newGroupName:b})},onCloseButtonClick:function(){a.setState({isCreatingNewGroupChat:!1})},showCloseButton:this.state.isCreatingNewGroupChat})}):null},_assignConversationContainerRef:function(a){this._refsConversationContainer=a},_renderMainView:function(a){if(!a||this._shouldShowGroupNameComposer())return k.jsx("div",{className:"_1ut7"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":"")});var c=this.state.contactData?this.state.contactData.contact:null,d=this.props.deliveryReceipts?b("MessengerDeliveryReceipt.bs").getDeliveryTimeOfThread(this.props.deliveryReceipts,a):0;return this.state.searchResults.messages&&this.props.suppressSearchResults!==!0?k.jsx(b("MessengerErrorBoundary.react"),{component:"conversation",children:k.jsx(b("MessengerConversation.react"),{className:"_1wfr"+(!b("WorkChatRedesignedMessageListCheck.re").enabled&&b("gkx")("1179386")?" _930c":"")+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":""),contact:c,deliveryTimestamp:d,downExhausted:this.state.searchResults.downExhausted,fetchMessages:b("MessengerThreadSearchActions").getMoreSearchContext,onVoiceClipCreate:this.handleAudioUpload,innerClassName:"_1r_-",isCanonical:b("MercuryIDs").isCanonical(a),isLoaded:!0,isLoading:!1,messages:this.state.searchResults.messages,onRead:b("emptyFunction"),onReplyToMessage:this._handleReplyToMessage,readReceipts:this.props.readReceipts,thread:this.state.activeThread,threadID:a,upExhausted:this.state.searchResults.upExhausted,useManualFetch:!0,viewer:this.props.viewer,ref:this._assignConversationContainerRef,selectedMessage:this.state.searchResults.mid,scrolledToMid:this.state.searchResults.scrolledToMid,isSearchResult:!!this.state.searchResults.query,hideContextBanner:this.state.hideContextBanner})}):k.jsx(b("MessengerErrorBoundary.react"),{component:"conversation",children:k.jsx(b("MessengerConversationContainer.react"),{className:"_1wfr"+(b("gkx")("1179386")?" _930c":"")+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":""),contact:c,deliveryTimestamp:d,ignoredIds:b("MessengerState.bs").ignoredIds(this.props.messengerState),fbid:b("MessengerState.bs").fbid(this.props.messengerState),onVoiceClipCreate:this.handleAudioUpload,onMarkRead:this._handleMarkRead,onReplyToMessage:this._handleReplyToMessage,readReceipts:this.props.readReceipts,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:a,viewer:this.props.viewer,hideContextBanner:this.state.hideContextBanner,bottomOffset:this.props.bottomOffset})})},_renderFooterView:function(a){var c=this;return k.jsx(b("MessengerErrorBoundary.react"),{className:"_4rv3 _2pen",component:"composer",children:k.jsx(b("MessengerComposerContainer.react"),{canReply:!!(!this._shouldBlockReply()&&(this.props.view===b("MessengerView").DETAIL.COMPOSE||this.state.activeThread&&b("MercuryThreadInfo").canReply(this.state.activeThread)&&!b("MercuryConfig").ViewerIsReadOnly)),disableAutofocus:b("CurrentUser").isWorkUser()&&this.props.view===b("MessengerView").DETAIL.COMPOSE,fileUploader:this.state.uploadFilesState.get(a),onMount:function(a){return c._composer=a},onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,sharePreview:this.state.sharePreviewState.get(a),workChatContentApps:this.state.workChatContentAppsState.get(a),hostProps:this.props.hostProps,threadID:a,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,replyingToMessage:this.state.replyingToMessage,onCancelReplyingToMessage:this._cancelReplyingToMessage,newGroupName:this.state.newGroupName,openPostComposerInSameWindow:this.state.openPostComposerInSameWindow})})},_renderInfoPanel:function(){var a=this.state,c=a.activeThread,d=a.contactData,e=a.infoPanelCollapsed,f=a.participants;a=a.hideGroupInfoInThreadInfoPanel;var g=this.props,h=g.view;g=g.suppressThreadInfoPanel;return g||!c||!f||h===b("MessengerView").DETAIL.COMPOSE?null:k.jsx("div",{className:(e?"hidden_elem":"")+" _4_j5","data-testid":void 0,children:k.jsx(b("MessengerErrorBoundary.react"),{className:"_4rv3",component:"conversation information",children:k.jsx(b("MessengerThreadInfoPanelContainer.react"),{blockedIds:this.props.blockedIds,className:"_4_j9",contactData:d,participants:f,thread:c,viewer:this.props.viewer,hideGroupInfoInThreadInfoPanel:a})})})},_getMainLabelDetails:function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?{labelText:h._("New Message"),labelIDs:j.MAIN_LABEL}:{labelText:h._("Conversation with"),labelIDs:j.MAIN_LABEL+" "+j.THREAD_TITLE}},_handleConversationClick:function(a){var c=this.props.activeThreadID;if(c&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom()){var d=b("MessengerState.bs").getThreadMetaNow(this.props.viewer,c);d&&d.unread_count&&d.unread_count>0&&this._handleMarkRead(c)}if(window.getSelection().toString()!=="")return;d=a.target;if(d instanceof Node&&b("Parent").byTag(d,"a")!=null)return;c=this._getComposer();c&&c.focusInput()},handleAudioUpload:function(a){var b=this._getComposer();b!=null&&a!=null&&(b.handleAudioUpload(a),b.focusInput())},_showDropTargetOverlay:function(a){a&&a.preventDefault(),this.setState({dropTargetOverlayVisible:!0})},_hideDropTargetOverlay:function(a){a&&a.preventDefault();this.setState({dropTargetOverlayVisible:!1});a=this._getComposer();a&&a.resetDrag()},_handleDrop:function(a){this._hideDropTargetOverlay(a);var c=this._getComposer();if(!c)return;a.nativeEvent.dataTransfer instanceof Object||i(0,1841);var d=new(b("DataTransfer"))(a.nativeEvent.dataTransfer),e=d.getFiles(),f=this.state.activeThreadID;if(e.length){b("MessengerActions").prepareFilesForSend(f,a.nativeEvent.dataTransfer.files,"DragAndDrop");return}if(e.length)c.handleFileUpload(e);else{f=d.getText();f&&c.handleTextDropped(f)}},_handleResize:function(){var a=this._refsConversationContainer;a&&a.handleResize()},_handleInfoPanelToggle:function(){var a=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:a},function(){b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:a})})},_handleMarkRead:function(a){b("MercuryThreadActions").getForFBID(this.props.viewer).markRead(a)},_handleReplyToMessage:function(a){this.setState({replyingToMessage:a});a=this._getComposer();a!=null&&a.focusInput()},_cancelReplyingToMessage:function(){this.setState({replyingToMessage:null})},_shouldShowGroupNameComposer:function(){return!b("gkx")("836564")||this.props.view!==b("MessengerView").DETAIL.COMPOSE||this.state.composerState.recipients.size<2?!1:!this.state.activeThread||this.state.isCreatingNewGroupChat},_shouldBlockReply:function(){var a;return!!(((a=this.state.contactData)==null?void 0:(a=a.contact)==null?void 0:a.is_messenger_blocked)||b("MercuryConfig").ColdOpenBlock&&this.state.activeThread&&b("MercuryThreadInfo").isColdOpen(this.state.activeThread))},_getComposer:function(){return this._composer}});a.defaultProps={DetailViewHeaderComponent:b("MessengerDetailViewHeaderContainer.react")};e.exports=a}),null);
__d("MessengerMovedSettingsNux.react",["cx","fbt","AsyncRequest","React","XBasicFBNuxViewController","XUIContextualDialog.react","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("React");var j=c.useCallback,k=c.useEffect,l=c.useRef,m=c.useState,n=h._("You can find Settings, Help, and more in the Profile Menu now"),o=7942;function a(a){var c=a.showMovedSettingsNux;a=a.children;var d=l(null);c=m(c);var e=c[0],f=c[1],g=j(function(){if(e){var a=b("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",o).getURI();new(b("AsyncRequest"))().setURI(a).send();f(function(a){return!1})}},[e,f]);k(function(){var a=b("setTimeout")(g,1e4);(function(){return b("clearTimeout")(a)})},[g]);return i.jsxs(i.Fragment,{children:[a(d,g),d.current!=null&&e&&i.jsx(b("XUIContextualDialog.react"),{alignment:"left",contextRef:function(){return d.current},shown:e,position:"below",offsetY:0,children:i.jsx("div",{className:"_94x1",role:"tooltip",onClick:g,children:n})})]})}e.exports=a}),null);
__d("MessengerThreadlistBanner.react",["cx","ix","AsyncRequest","Bootloader","CurrentUser","Image.react","MessengerButtonReact.re","MessengerSignals.re","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","goURI","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerButtonReact.re").make,j=b("React"),k=h("86832");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={bannerClosed:!1},d.$5=function(a,c,e,f){return function(){d.$6(),d.props.promotionID!=null?(new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action",a).setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send(),c==="dialog_url"?b("Bootloader").loadModules(["AsyncDialog"],function(a){a.send(new(b("AsyncRequest"))().setURI(b("nullthrows")(e)))},"MessengerThreadlistBanner.react"):window.open(e)):e!=null?b("goURI")(e,!0):f&&f()}},d.$2=function(){d.$6(),d.props.promotionID!=null&&new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.promotionID==null&&this.setState({bannerClosed:!1})};d.componentDidMount=function(){if(this.$1()||this.props.promotionID==null||b("CurrentUser").isWorkUser())return;new(b("AsyncRequest"))().setURI(b("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",this.props.promotionID).setStringToStringMap("instance_log_data",this.props.instanceLogData).getURI()).send()};d.componentDidUpdate=function(){window.dispatchEvent(new Event("resize"))};d.render=function(){return this.$1()?null:j.jsxs("div",{className:"_92bb",children:[j.jsx(b("Image.react"),{className:"_9525",onClick:this.$2,src:k}),j.jsx("span",{className:"_92bc",children:this.props.promotionTitle}),j.jsx("span",{className:"_92bd",children:this.props.promotionContent}),j.jsxs("div",{className:"_92bh",children:[this.props.secondaryActionType!=null?this.$3():null,this.$4()]})]})};d.$1=function(){return this.state.bannerClosed};d.$4=function(){return j.jsx(i,{className:"_92be",label:this.props.primaryActionTitle,onClick:this.$5("primary",this.props.primaryActionType,this.props.primaryActionURI,this.props.primaryActionCallback),type:"primary"})};d.$3=function(){return j.jsx(i,{className:"_92be",label:this.props.secondaryActionTitle,onClick:this.$5("secondary",this.props.secondaryActionType,this.props.secondaryActionURI,this.props.secondaryActionCallback),type:"secondary"})};d.$6=function(){this.setState({bannerClosed:!0},function(){b("MessengerSignals.re").resize()})};return c}(j.Component);e.exports=a}),null);
__d("MessengerThreadlistPromotion.react",["MessengerPromotionDataDispatcher","MessengerPromotionDataStore","MessengerRefreshPrompt","MessengerThreadlistBanner.react","React","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={promotionData:b("MessengerPromotionDataStore").getThreadlistPromotionData()},d.subscriptions=new(b("SubscriptionsHandler"))(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("MessengerRefreshPrompt")();b("MessengerPromotionDataDispatcher").explicitlyRegisterStores([b("MessengerPromotionDataStore")]);this.subscriptions.addSubscriptions(b("MessengerPromotionDataStore").addListener(function(){a.setState({promotionData:b("MessengerPromotionDataStore").getThreadlistPromotionData()})}))};d.componentWillUnmount=function(){this.subscriptions.release()};d.render=function(){var a=this.state.promotionData;return a?g.jsx(b("MessengerThreadlistBanner.react"),{promotionID:a.promotionID,promotionTitle:a.promotionTitle,promotionContent:a.promotionContent,primaryActionTitle:a.primaryActionTitle,primaryActionType:a.primaryActionType,primaryActionURI:a.primaryActionURI,primaryActionCallback:a.primaryActionCallback,secondaryActionTitle:a.secondaryActionTitle,secondaryActionType:a.secondaryActionType,secondaryActionURI:a.secondaryActionURI,secondaryActionCallback:a.secondaryActionCallback,instanceLogData:a.instanceLogData}):null};return c}(g.PureComponent);e.exports=a}),null);
__d("MessengerMount",["cx","BanzaiODS","Bootloader","CSS","CurrentUser","HotLikeSound","MessengerConfig","MessengerDialogs.bs","MessengerEnvironment","MessengerFPSCounter","MessengerNonMount","MessengerPage","MessengerPromotionDataActions","MessengerReact.bs","MessengerSettingsStore","MessengerURIListener","MessengerWebStgTypedLoggerLite","React","ReactDOM","gkx","OrderedFriendsList"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerReact.bs").jsComponent,i=b("React");b("OrderedFriendsList");var j=b("MessengerNonMount").initStoresAndListeners,k=b("MessengerNonMount").dispatchInitialData;a=function(){function a(){}a.getMainComponent=function(a){var c=b("CurrentUser").getID(),d=b("CurrentUser").isWorkUser();return i.jsx(h,{employeeData:a.employeeData,showWorkchatUpsellBanner:a.showWorkchatUpsellBanner,showMovedSettingsNux:a.showMovedSettingsNux,isFirstRedirect:!b("gkx")("678603"),viewer:c,isWorkUser:d,onMount:function(){return l(a)}})};a.mount=function(a,c,d){b("MessengerEnvironment").setMessengerUI(!0);(d=b("MessengerPage")).emit(d.Events.JS_LOADED);var e=b("CurrentUser").getID();j(e);b("MessengerURIListener").start();k(e,c);d.emit(d.Events.DATA_INITIALIZED);e=document.documentElement;e&&b("CSS").addClass(e,"_51l0");if(document.body){d=document.body;b("CSS").addClass(d,"_z4_");b("CSS").addClass(d,"__6g");b("MessengerConfig").SegoeUIDisabled&&b("CSS").addClass(d,"_2por");b("MessengerEnvironment").facebookdotcom&&b("CSS").addClass(d,"_mvg")}b("HotLikeSound").setCheckSoundEnabledFunc(function(){return b("MessengerSettingsStore").getSettings().sound_enabled});b("ReactDOM").render(this.getMainComponent(c),a);b("MessengerFPSCounter").counter&&b("MessengerFPSCounter").counter(6e4,function(a){b("BanzaiODS").bumpEntityKey(3303,"messenger_dot_com","fps.count."+a)})};return a}();function l(a){b("MessengerPage").emit(b("MessengerPage").Events.APP_MOUNTED);b("MessengerWebStgTypedLoggerLite").log({event_name:"render_inbox"});var c=a.gameData;c&&c.gameID&&b("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(a,d,e){var f=null,g=d.SOLO;c.contextSourceID&&(f=c.contextSourceID,g=d.THREAD);b("MessengerDialogs.bs").showDialog(function(){return i.jsx(a,{initialContextSourceID:f,initialContextType:g,onHide:function(){return b("MessengerDialogs.bs").removeAllDialogs()},initialGameID:c.gameID,initialSource:e.M_ME_LINK,sourceID:null})})},"MessengerMount");a.promotionData&&b("MessengerPromotionDataActions").setPromotionData(a.promotionData);a.threadlistPromotionData&&b("MessengerPromotionDataActions").setThreadlistPromotionData(a.threadlistPromotionData);a.interstitialPromotionData&&b("MessengerPromotionDataActions").setInterstitialPromotionData(a.interstitialPromotionData)}e.exports=a}),null);