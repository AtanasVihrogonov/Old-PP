if (self.CavalryLogger) { CavalryLogger.start_js(["WBxWB"]); }

__d("MessengerGenericQuickBannerViewQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"type",type:"MessengerAdsGenericBannerType!"},{defaultValue:null,kind:"LocalArgument",name:"extra_data",type:"String"}],b=[{kind:"Variable",name:"extra_data",variableName:"extra_data"},{kind:"Variable",name:"type",variableName:"type"}],c={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"should_show_cta_buttons",storageKey:null},i=[{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null},d],j={alias:null,args:null,concreteType:"MessengerGenericQuickBannerButton",kind:"LinkedField",name:"primary_button",plural:!1,selections:i,storageKey:null};i={alias:null,args:null,concreteType:"MessengerGenericQuickBannerButton",kind:"LinkedField",name:"secondary_button",plural:!1,selections:i,storageKey:null};var k={alias:null,args:null,kind:"ScalarField",name:"xout_button_action_type",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"icon_image",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"icon_background",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerGenericQuickBannerViewQuery",selections:[{alias:null,args:b,concreteType:"MessengerGenericQuickBannerQueryResult",kind:"LinkedField",name:"generic_quick_banner_details",plural:!1,selections:[c,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"content",plural:!1,selections:[d,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[e],storageKey:null},f,g],storageKey:null}],storageKey:null},h,j,i,k,l,m],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerGenericQuickBannerViewQuery",selections:[{alias:null,args:b,concreteType:"MessengerGenericQuickBannerQueryResult",kind:"LinkedField",name:"generic_quick_banner_details",plural:!1,selections:[c,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"content",plural:!1,selections:[d,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Node",abstractKey:"__isNode"}],storageKey:null},f,g],storageKey:null}],storageKey:null},h,j,i,k,l,m],storageKey:null}]},params:{id:"3208232919196606",metadata:{},name:"MessengerGenericQuickBannerViewQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("OmniMSuggestionUtilsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"stickerIDs",type:"[ID!]!"},{defaultValue:null,kind:"LocalArgument",name:"size",type:"Int"}],b=[{kind:"Variable",name:"ids",variableName:"stickerIDs"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"frame_count",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"frame_rate",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"frames_per_column",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"frames_per_row",storageKey:null},h={alias:null,args:[{kind:"Variable",name:"height",variableName:"size"},{kind:"Variable",name:"width",variableName:"size"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:null},i={alias:null,args:null,concreteType:"StickerPack",kind:"LinkedField",name:"pack",plural:!1,selections:[c],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"OmniMSuggestionUtilsQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineFragment",selections:[c,d,e,f,g,h,i],type:"Sticker",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"OmniMSuggestionUtilsQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,{kind:"InlineFragment",selections:[d,e,f,g,h,i],type:"Sticker",abstractKey:null}],storageKey:null}]},params:{id:"2269049783111896",metadata:{},name:"OmniMSuggestionUtilsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MessengerAdsConversionExperimentTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsConversionExperimentLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsConversionExperimentLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsConversionExperimentLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAdID=function(a){this.$1.ad_id=a;return this};c.setAdminID=function(a){this.$1.admin_id=a;return this};c.setCommentID=function(a){this.$1.comment_id=a;return this};c.setCtaID=function(a){this.$1.cta_id=a;return this};c.setErrorReason=function(a){this.$1.error_reason=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setMessageKey=function(a){this.$1.message_key=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setOtherUserID=function(a){this.$1.other_user_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPageLevelWelcomeMessage=function(a){this.$1.page_level_welcome_message=a;return this};c.setPosition=function(a){this.$1.position=a;return this};c.setPostID=function(a){this.$1.post_id=a;return this};c.setQuickRepliesVertical=function(a){this.$1.quick_replies_vertical=a;return this};c.setReceiverID=function(a){this.$1.receiver_id=a;return this};c.setShowOnFeed=function(a){this.$1.show_on_feed=a;return this};c.setStackTrace=function(a){this.$1.stack_trace=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={ad_id:!0,admin_id:!0,comment_id:!0,cta_id:!0,error_reason:!0,event:!0,message_key:!0,name:!0,other_user_id:!0,page_id:!0,page_level_welcome_message:!0,position:!0,post_id:!0,quick_replies_vertical:!0,receiver_id:!0,show_on_feed:!0,stack_trace:!0,time:!0,vc:!0,video_id:!0,weight:!0};e.exports=a}),null);
__d("OmniMEventTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:OmniMEventLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:OmniMEventLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:OmniMEventLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActionID=function(a){this.$1.action_id=a;return this};c.setActionSubTypeFromBlob=function(a){this.$1.action_sub_type_from_blob=a;return this};c.setActionTypeFromBlob=function(a){this.$1.action_type_from_blob=a;return this};c.setAgentName=function(a){this.$1.agent_name=a;return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClickArea=function(a){this.$1.click_area=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setConfidenceRemapped=function(a){this.$1.confidence_remapped=a;return this};c.setConfidenceValue=function(a){this.$1.confidence_value=a;return this};c.setContextUserID=function(a){this.$1.context_user_id=a;return this};c.setCreGroup=function(a){this.$1.cre_group=a;return this};c.setCuApp=function(a){this.$1.cu_app=a;return this};c.setDetectedLanguage=function(a){this.$1.detected_language=a;return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setIntentID=function(a){this.$1.intent_id=a;return this};c.setLiveLocationSuggestionsEnabled=function(a){this.$1.live_location_suggestions_enabled=a;return this};c.setLocationSuggestionsEnabled=function(a){this.$1.location_suggestions_enabled=a;return this};c.setMBarDisplayedOnThreadEnter=function(a){this.$1.m_bar_displayed_on_thread_enter=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setMessageLength=function(a){this.$1.message_length=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setNumberOfCalendarEvents=function(a){this.$1.number_of_calendar_events=a;return this};c.setPersonalization=function(a){this.$1.personalization=a;return this};c.setPigeonID=function(a){this.$1.pigeon_id=a;return this};c.setPosition=function(a){this.$1.position=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setRemovedLocationSuggestions=function(a){this.$1.removed_location_suggestions=a;return this};c.setSerializedActions=function(a){this.$1.serialized_actions=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setSource=function(a){this.$1.source=a;return this};c.setSuggestionData=function(a){this.$1.suggestion_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setSuggestionIds=function(a){this.$1.suggestion_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setSuggestionMode=function(a){this.$1.suggestion_mode=a;return this};c.setSuggestionStyle=function(a){this.$1.suggestion_style=a;return this};c.setSuggestionSubtitle=function(a){this.$1.suggestion_subtitle=a;return this};c.setSuggestionTitle=function(a){this.$1.suggestion_title=a;return this};c.setSuggestionType=function(a){this.$1.suggestion_type=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTotalSuggestions=function(a){this.$1.total_suggestions=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={action_id:!0,action_sub_type_from_blob:!0,action_type_from_blob:!0,agent_name:!0,appid:!0,appversion:!0,click_area:!0,client_userid:!0,clienttime:!0,confidence_remapped:!0,confidence_value:!0,context_user_id:!0,cre_group:!0,cu_app:!0,detected_language:!0,event_name:!0,intent_id:!0,live_location_suggestions_enabled:!0,location_suggestions_enabled:!0,m_bar_displayed_on_thread_enter:!0,message_id:!0,message_length:!0,name:!0,number_of_calendar_events:!0,personalization:!0,pigeon_id:!0,position:!0,reason:!0,removed_location_suggestions:!0,serialized_actions:!0,session_id:!0,source:!0,suggestion_data:!0,suggestion_ids:!0,suggestion_mode:!0,suggestion_style:!0,suggestion_subtitle:!0,suggestion_title:!0,suggestion_type:!0,thread_id:!0,time:!0,total_suggestions:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerGenericQuickBannerView.react",["ix","cx","fbt","FBLogger","FDSText.react","FlexLayout.react","Image.react","MessengerAdsConversionFunnelTypedLogger","MessengerAdsGenericBannerType","MessengerConversionEvent","React","RelayFBEnvironment","RelayModern","ServicesEventsLogger","SUIBusinessTheme","SUIButton.react","TetraCircleButton.react","TextWithEntities.react","curry","fbicon","joinClasses","MessengerGenericQuickBannerViewQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=b("React"),l=b("RelayModern").fetchQuery;b("RelayModern").graphql;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={content:null,icon_background:null,icon_image:null,primary_button:null,secondary_button:null,should_show_cta_buttons:null,xout_button_action_type:null,title:null},c.$1=!1,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0;if(!this.props.conversionData.is_eligible)return;this.$2();this.$3()};d.componentWillUnmount=function(){this.$1=!1};d.componentDidUpdate=function(a){if(!this.props.conversionData.is_eligible)return;this.$2();(this.props.conversionData.generic_quick_banner_type!==a.conversionData.generic_quick_banner_type||this.props.conversionData.generic_quick_banner_extra_data!==a.conversionData.generic_quick_banner_extra_data)&&this.$3()};d.render=function(){if(this.props.conversionData.is_eligible&&this.$4(this.state)){var a;this.props.conversionData.conversion_type==="CONSUMER_QUESTION"&&b("ServicesEventsLogger").log(this.props.pageID,"services_organic_intake_form_automated_response_upsell_impression",{referrerUIComponent:"qp",referrerUISurface:"inbox"},{consumer_id:this.props.consumerID,referrer_surface:"message"});return k.jsx("div",{className:"_7zk4",style:{top:"-"+this.props.topPosition+"px"},children:k.jsxs(b("FlexLayout.react"),{align:"center",direction:"vertical",children:[k.jsxs(b("FlexLayout.react"),{align:"center",children:[k.jsx("div",{className:b("joinClasses")("_7zvz",this.state.icon_background),children:k.jsx(b("Image.react"),{className:b("joinClasses")("_7zgm",this.state.icon_background),src:this.state.icon_image})}),k.jsxs(b("FlexLayout.react"),{align:"stretch",className:"_7zv-",direction:"vertical",children:[k.jsxs(b("FlexLayout.react"),{justify:"all",children:[k.jsx(b("FDSText.react"),{display:"block",size:"header4",weight:"bold",children:this.state.title}),!!this.state.xout_button_action_type&&k.jsx(b("FlexLayout.react"),{className:"_3-9b",children:k.jsx(b("TetraCircleButton.react"),{icon:b("fbicon")._(g("478231"),12),label:i._("Button to dimiss suggestion"),onPress:b("curry")(this.props.onButtonClick,this.props.conversionData.generic_quick_banner_type,this.state.xout_button_action_type),size:24})})]}),k.jsx(b("FlexLayout.react"),{className:"_3-8w _7_pu",children:k.jsx(b("FDSText.react"),{color:"secondary",display:"block",children:k.jsx(b("TextWithEntities.react"),{text:this.state.content.text,ranges:this.state.content.ranges})})})]})]}),this.state.should_show_cta_buttons===!0&&k.jsxs(b("FlexLayout.react"),{className:"_7zk6",align:"center",children:[k.jsx("div",{className:"_7zgr _3-90",children:k.jsx(b("SUIButton.react"),{width:130,label:(a=this.state.secondary_button)==null?void 0:a.text,onClick:b("curry")(this.props.onButtonClick,this.props.conversionData.generic_quick_banner_type,(a=this.state.secondary_button)==null?void 0:a.action_type),theme:b("SUIBusinessTheme")})}),k.jsx("div",{className:"_7zgr",children:k.jsx(b("SUIButton.react"),{width:130,label:(a=this.state.primary_button)==null?void 0:a.text,onClick:b("curry")(this.props.onButtonClick,this.props.conversionData.generic_quick_banner_type,(a=this.state.primary_button)==null?void 0:a.action_type),theme:b("SUIBusinessTheme"),use:"confirm"})})]})]})})}else return null};d.$2=function(){new(b("MessengerAdsConversionFunnelTypedLogger"))().setName(b("MessengerConversionEvent").CONVERSION_QUICK_PROMOTION_IMPRESSION).setConversionType(this.props.conversionData.generic_quick_banner_type).setPageID(this.props.pageID).setConsumerID(this.props.consumerID).log()};d.$3=function(){var a=this;if(this.props.conversionData.generic_quick_banner_type===null||this.props.conversionData.generic_quick_banner_type===void 0)return;var c=this.$5(this.props.conversionData.generic_quick_banner_type,this.props.conversionData.generic_quick_banner_extra_data);c.then(function(c){a.$1&&(c.generic_quick_banner_details?a.setState(c.generic_quick_banner_details,a.props.onInformationFetched):b("FBLogger")("Generic Quick Banner").warn("Failed when fetching banner information: Empty Response"))})["catch"](function(a){b("FBLogger")("Generic Quick Banner").warn("Failed when fetching banner information: %s",a)})};d.$5=function(a,c){return l(b("RelayFBEnvironment"),j!==void 0?j:j=b("MessengerGenericQuickBannerViewQuery.graphql"),{type:a,extra_data:c})};d.$4=function(a){return a.title!==null&&a.content!==null&&a.should_show_cta_buttons!==null&&a.icon_image!==null&&a.icon_background!==null};return c}(k.PureComponent);e.exports=a}),null);
__d("OmniMEventTypedLoggerUtils",["CurrentUser","OmniMEventTypedLogger"],(function(a,b,c,d,e,f){"use strict";a={logOmniMBar:function(a,c){var d=this;new(b("OmniMEventTypedLogger"))().setContextUserID(b("CurrentUser").getID()).setSuggestionIds(a).setEventName(c).log();switch(c){case"omni_m_bar_displayed":a.forEach(function(a){return d.logOmniMSuggestion(a,"omni_m_suggestion_displayed")});break;case"omni_m_bar_disappeared":a.forEach(function(a){return d.logOmniMSuggestion(a,"omni_m_suggestion_disappeared")});break;default:break}},logOmniMSuggestion:function(a,c){new(b("OmniMEventTypedLogger"))().setContextUserID(b("CurrentUser").getID()).setPigeonID(a).setEventName(c).log()}};e.exports=a}),null);
__d("OmniMSuggestionUtils",["Promise","CurrentUser","FBLogger","MercuryMessageActions","MercuryMessageObject","MercuryTriodeSourceUtil","MessengerEnvironment","MSuggestionActions","OmniMEventTypedLoggerUtils","React","RelayFBEnvironment","RelayModern","Sticker.react","StickerUtils","OmniMSuggestionUtilsQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("RelayModern").fetchQuery;b("RelayModern").graphql;var j=120,k=b("MessengerEnvironment").messengerui?42:32;function l(a){return i(b("RelayFBEnvironment"),g!==void 0?g:g=b("OmniMSuggestionUtilsQuery.graphql"),{stickerIDs:a,size:j})}function m(a,c,d){new(b("MercuryMessageActions"))(b("CurrentUser").getID()).send(a,function(a){b("OmniMEventTypedLoggerUtils").logOmniMSuggestion(d,"omni_m_suggestion_completed"),b("MSuggestionActions").removeSuggestionsByType(a,c)})}function n(a,c,d){a=new(b("MercuryMessageObject"))(b("CurrentUser").getID()).constructStickerMessageObject(a,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),c);m(a,"sticker",d)}function o(a){return!Array.isArray(a.nodes)?[]:a.nodes.filter(function(a){var b;return a&&typeof a.id==="string"&&typeof a.frame_count==="number"&&typeof a.frame_rate==="number"&&typeof a.frames_per_column==="number"&&typeof a.frames_per_row==="number"&&typeof ((b=a.image)==null?void 0:b.uri)==="string"&&typeof ((b=a.image)==null?void 0:b.width)==="number"&&typeof ((b=a.image)==null?void 0:b.height)==="number"&&typeof ((b=a.pack)==null?void 0:b.id)==="string"})}a={loadStickers:function(a){return a.length===0?b("Promise").resolve([]):l(a).then(o)["catch"](function(a){b("FBLogger")("omnim").warn("Failed to load stickers: %s",a);return[]})},renderSticker:function(a,c,d){c=b("StickerUtils").getScaledDimensions(a.image.height,a.image.width,c);var e=c.height;c=c.width;return h.jsx(b("Sticker.react"),{sourceURI:a.image.uri,forceCursorPointer:!0,frameCount:a.frame_count,frameRate:a.frame_rate,framesPerCol:a.frames_per_column,framesPerRow:a.frames_per_row,sourceWidth:c,sourceHeight:e,packID:a.pack.id,stickerID:a.id,onStickerClick:d})},renderStickerForOmniMSuggestionsBar:function(a,c,d){return this.renderSticker(a,k,function(a,e){b("OmniMEventTypedLoggerUtils").logOmniMSuggestion(d,"omni_m_suggestion_clicked"),e&&n(e,c,d)})},handleOnClick:function(a,c){var d=this;return function(){b("OmniMEventTypedLoggerUtils").logOmniMSuggestion(a.id,"omni_m_suggestion_clicked");switch(a.data.type){case"text":var e=new(b("MercuryMessageObject"))(b("CurrentUser").getID()).constructCTAConfirmationMessageObject(a.label,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),c,d.getOption(a));m(e,"text",a.id)}}},getOption:function(a){switch(a.data.type){case"text":return{content_type:"text",title:a.label};default:return{}}}};e.exports=a}),null);
__d("MessengerMSuggestionButton.react",["cx","ix","FBLogger","Image.react","OmniMSuggestionUtils","React","SUIAtlasTheme","SUIBusinessTheme","SUIButton.react","SUISpinner.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=64;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={stickerDetail:null},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;if(this.props.suggestionType==="suggested_reply_business_sticker"){var c=b("OmniMSuggestionUtils").loadStickers([this.props.title]);c.then(function(b){b.length==1?a.setState({stickerDetail:b[0]}):a.setState({stickerDetail:null})})["catch"](function(a){b("FBLogger")("Business Sticker").warn("Failed when fetching stickers: %s",a)})}};d.getAssetURL=function(){var a=null;switch(this.props.suggestionType){case"create_appointment_direct":a=h("558659");break;case"create_appointment_different_time":a=h("558660");break;case"schedule_appointment":a=h("562338");break;case"send_availability":if(this.props.partnerAppLogo){a=this.props.partnerAppLogo;return i.jsx(b("Image.react"),{className:"_8dpp",src:a})}}return i.jsx(b("Image.react"),{className:"_4i-r",src:a})};d.renderSpinner=function(){return!this.props.showSpinner?null:i.jsx("span",{className:"_3hxf",children:i.jsx(b("SUISpinner.react"),{background:"dark",theme:b("SUIBusinessTheme")})})};d.render=function(){var a=this,c=this.props.suggestionType!=="suggested_reply_location"&&this.props.suggestionType!=="suggested_reply_user_faq"&&this.props.suggestionType!=="suggested_reply_user_faq_saved_reply"&&this.props.suggestionType!=="suggested_reply_business_sticker"?i.jsx("div",{children:i.jsx("div",{className:"_4i-n",children:this.getAssetURL()})}):null;c=this.props.suggestionType==="suggested_reply_business_sticker"?this.state.stickerDetail===null||this.state.stickerDetail===void 0?null:b("OmniMSuggestionUtils").renderSticker(this.state.stickerDetail,j,function(b,c){a.props.onClick()}):i.jsx(b("SUIButton.react"),{icon:c,label:this.props.title,onClick:this.props.onClick,style:{borderRadius:"36px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 2px 7px 0px"},theme:b("SUIAtlasTheme"),uniformOverride:{padding:{normal:{button:"10px"}}},width:"100%"});return i.jsxs("div",{className:b("joinClasses")("messengerMSuggestionButton/root",this.props.className),style:{position:"relative"},children:[this.renderSpinner(),c]})};return c}(i.PureComponent);a.defaultProps={showSpinner:!1};e.exports=a}),null);
__d("MessengerMSuggestionView.react",["cx","fbt","ix","AdsArrowedCarouselEnhanced.react","Image.react","Link.react","MessengerMSuggestionButton.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={updatingSuggestionType:null},c.onClickDismiss=function(){c.props.onClickDismiss&&c.props.onClickDismiss()},b)||babelHelpers.assertThisInitialized(c)}c.getDerivedStateFromProps=function(a,b){return babelHelpers["extends"]({},b,{updatingSuggestionType:a.isUpdating?b.updatingSuggestionType:null})};var d=c.prototype;d.onClick=function(a,b){this.setState({updatingSuggestionType:a}),this.props.onClick(a,b)};d.renderDismissButton=function(){return j.jsx(b("Link.react"),{className:"_1cso _3-8r _3-94",onClick:this.onClickDismiss,children:j.jsx(b("Image.react"),{src:i("588640")})})};d.renderSuggestionButton=function(a,c,d){var e=this,f=this.state.updatingSuggestionType===a;return j.jsx(b("MessengerMSuggestionButton.react"),{className:"_3-8r _3-94",onClick:function(){return e.onClick(a,c)},showSpinner:f,suggestionType:a,title:c,partnerAppLogo:this.props.partnerAppLogo},d)};d.renderSuggestionsAsButtons=function(a){var b=this;return Object.keys(a).reduce(function(c,d,e){if(d==="suggested_reply_business_sticker"){var f=a[d];Array.isArray(f)&&f.forEach(function(a){a=b.renderSuggestionButton(d,a,a);c.push(a)})}else{f=b.renderSuggestionButton(d,a[d],e);c.push(f)}return c},[])};d.render=function(){var a=this.props.suggestions;if(!a)return null;var c=this.props.shouldShowEyebrowTextForBusinessSticker?j.jsx("span",{className:"_8fs2",children:h._("Click to send")}):null;return j.jsxs("div",{className:b("joinClasses")("_2pi7",this.props.className),children:[c,j.jsxs(b("AdsArrowedCarouselEnhanced.react"),{children:[this.renderSuggestionsAsButtons(a),this.renderDismissButton()]})]})};return c}(j.PureComponent);e.exports=a}),null);
__d("XMessengerAdDismissSavedRepliesUpsellBannerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/messenger_monetization/dismiss_saved_replies_upsell_banner/",{page_id:{type:"FBID",required:!0},corresponding_question:{type:"String"}})}),null);
__d("PagesManagerMessagingMSuggestionView.react",["cx","AdsLWIDialogUtils","AdsLWIInstanceType","AsyncRequest","CommerceInvoiceAdminActions","FBLogger","JSResource","LDPSendAvailabilityDialogRoot.react","MessengerAdsConversionExperimentTypedLogger","MessengerAdsConversionFunnelTypedLogger","MessengerConversionEvent","MessengerGenericQuickBannerView.react","MessengerMSuggestionView.react","PagesCreateSavedResponseMutation","PagesManagerMessagingComposerActions","PagesManagerOmniMActions","PagesManagerOmniMUtils","PagesMessagingInboxActionLogger","PagesPlatformBookingMessageViewer","React","ServicesAppointmentManagementDialogEnum","ServicesEventsLogger","ServicesMessengerAppointmentActions","ServicesWordingUtils","SimpleXUIDialog","URI","XBasicFBNuxViewController","XMessengerAdDismissSavedRepliesUpsellBannerController","XPagesAutomatedResponsesController","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("AdsLWIDialogUtils").openLWIDialog;a=b("AdsLWIInstanceType").createRandomInstanceID;var j=b("React"),k=b("ServicesWordingUtils").ERROR_TEXT,l=b("ServicesWordingUtils").ERROR_TITLE,m=b("lazyLoadComponent")(b("JSResource")("ServicesAppointmentDialogRoot.react").__setRef("PagesManagerMessagingMSuggestionView.react")),n=a(),o=20,p=60,q="FAQ",r=7543;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={clickedSuggestionType:null,showCreateScheduleDialog:!1,isUpdating:!1,startTime:d.props.startTime,showSendAvailDialog:!1,suggestionHeight:0},d.$2=j.createRef(),d.$3=function(){if(d.$2.current!==null&&d.$2.current!==void 0){var a=d.$2.current.getBoundingClientRect().height;b("PagesManagerOmniMActions").setSuggestionSpacerHeight(a+o);d.setState({suggestionHeight:a})}},d.onQuickScheduleCompleted=function(a,c){d.setState({clickedSuggestionType:null,isUpdating:!1}),c?b("SimpleXUIDialog").show(k,l,function(){return b("PagesManagerOmniMActions").dismissSuggestionBar()}):b("PagesManagerOmniMActions").dismissSuggestionBar()},d.onDialogUpdateCompleted=function(a,c){d.setState({clickedSuggestionType:null,isUpdating:!1}),a&&b("PagesManagerOmniMActions").dismissSuggestionBar()},d.onClick=function(a,b){switch(a){case"create_appointment_direct":case"create_appointment_different_time":case"schedule_appointment":d.onClickBookTime(a);break;case"send_availability":d.onClickSendAvailability(a);break;case"suggested_reply_location":case"suggested_reply_user_faq":case"suggested_reply_user_faq_saved_reply":case"suggested_reply_business_sticker":d.onClickSendMessage(a,b);break}},d.onClickDismiss=function(){var a;if(d.state.isUpdating)return;d.log("booking_admin_intent_suggestion_bar_dismissed");d.setState({isUpdating:!1});b("PagesManagerOmniMActions").dismissSuggestionBar();b("PagesManagerOmniMActions").clearMessengerConversionSuggestion(d.props.pageID,d.props.recipientID,(a=d.props.conversionData)==null?void 0:a.conversion_type,d.props.messageID,d.props.senderID,null)},d.onToggleCreateScheduleDialog=function(a){d.setState({showCreateScheduleDialog:a})},d.onClickGenericQuickBannerButton=function(a,c){new(b("MessengerAdsConversionFunnelTypedLogger"))().setName(b("MessengerConversionEvent").CONVERSION_QUICK_PROMOTION_CLICK).setEventSubtype(d.eventSubtypeForGenericQuickBannerButtonType(c)).setConversionType(a).setPageID(d.props.pageID).setConsumerID(d.props.recipientID).log(),d.takeActionForGenericQuickBannerButtonType(c)},d.onToggleSendAvaililityDialog=function(a){d.setState({showSendAvailDialog:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1();for(var a in this.props.suggestions)switch(a){case"create_appointment_direct":this.log("booking_admin_suggestion_instant_book_impression");break;case"create_appointment_different_time":this.log("booking_admin_suggestion_book_impression");break;case"schedule_appointment":this.log("booking_admin_suggestion_schedule_appointment_impression");break;case"send_availability":this.log("booking_admin_suggestion_send_availability_impression");break;case"suggested_reply_location":this.logSuggestedReplies("metaranges_suggested_reply_seen","suggested_reply_location");break;case"suggested_reply_user_faq":this.logSuggestedReplies("metaranges_suggested_reply_seen","suggested_reply_user_faq");break;case"suggested_reply_user_faq_saved_reply":this.logSuggestedReplies("metaranges_suggested_reply_seen","suggested_reply_user_faq_saved_reply");break;case"suggested_reply_business_sticker":this.logSuggestedReplies("metaranges_suggested_reply_seen","suggested_reply_business_sticker");break}};d.componentDidUpdate=function(){this.$1()};d.$1=function(){var a;!b("PagesManagerOmniMUtils").isMessengerQuickBannerType(this.props.suggestions)?b("PagesManagerOmniMActions").setSuggestionSpacerHeight(p):this.props.conversionData!==null&&((a=this.props.conversionData)==null?void 0:a.conversion_type)!=="GENERIC"&&this.$3()};d.log=function(a){b("ServicesEventsLogger").log(this.props.pageID,a,{referrerUIComponent:"suggestion_bar",referrerUISurface:"message"},{consumer_id:this.props.recipientID,referrer_surface:"message"})};d.logIntakeFormEvent=function(a){b("ServicesEventsLogger").log(this.props.pageID,a,{referrerUIComponent:"qp",referrerUISurface:"inbox"},{consumer_id:this.props.recipientID})};d.logSuggestedReplies=function(a,c){new(b("MessengerAdsConversionExperimentTypedLogger"))().setName(c).setEvent(a).setMessageKey(this.props.messageID).setPageID(this.props.pageID).setReceiverID(this.props.recipientID).log()};d.onClickBookTime=function(a){if(this.state.isUpdating)return;this.setState({clickedSuggestionType:a,isUpdating:!1});this.onToggleCreateScheduleDialog(!0)};d.onClickSendAvailability=function(a){if(this.state.isUpdating)return;this.setState({clickedSuggestionType:a,isUpdating:!1});this.onToggleSendAvaililityDialog(!0)};d.onClickSendMessage=function(a,c){if(this.state.isUpdating)return;var d=this.props.pageID;this.logSuggestedReplies("metaranges_suggested_reply_clicked",a);b("PagesManagerOmniMActions").sendMessageWithSuggestedReply(a,d,c,this.props.threadID,this.onQuickScheduleCompleted);b("PagesManagerOmniMActions").clearMessengerConversionSuggestion(this.props.pageID,this.props.recipientID,null,this.props.messageID,this.props.senderID,null)};d.onClickPurchaseConfirmationButton=function(){var a;b("CommerceInvoiceAdminActions").toggleActionsDialog(!0,null,"confirm_payment","quick_promotion_map");this.dismissQuickBanner((a=this.props.conversionData)==null?void 0:a.conversion_type,null)};d.onClickAppointmentBookingButton=function(){var a;a=(a=this.props.conversionData)==null?void 0:a.timestamp;a!==null&&this.setState({startTime:a});b("ServicesMessengerAppointmentActions").toggleDialog(!0,this.state.clickedSuggestionType?{m_suggestion_type:this.state.clickedSuggestionType}:null,{referrerUIComponent:"suggestion_bar_book_bubble",referrerUISurface:"message"},this.state.startTime,this.onDialogUpdateCompleted);this.dismissQuickBanner((a=this.props.conversionData)==null?void 0:a.conversion_type,null)};d.onClickSavedRepliesUpsellSavingButton=function(){var a,c;a=(a=this.props.conversionData)==null?void 0:(a=a.upsell_specific_data)==null?void 0:a.page_reply;c=(c=this.props.conversionData)==null?void 0:(c=c.upsell_specific_data)==null?void 0:c.icebreaker_message;!!a&&!!c&&(b("PagesCreateSavedResponseMutation").commit(this.props.pageID,"",a,null,c,function(){},function(){}),b("PagesManagerMessagingComposerActions").setShouldShowSavedReplyUpsellNUX(!0),b("PagesManagerMessagingComposerActions").setShouldShowSavedReplyUpsellToast(!0),b("PagesMessagingInboxActionLogger").logUpdateSavedReply(null,a,null,q,null,null,c));b("PagesManagerOmniMActions").dismissSuggestionBar()};d.onClickSavedRepliesUpsellEditingButton=function(){!!this.props.conversionData&&!!this.props.conversionData.upsell_specific_data&&b("PagesManagerOmniMActions").triggerSavedRepliesUpsell(this.props.conversionData.upsell_specific_data),b("PagesManagerOmniMActions").dismissSuggestionBar()};d.onClickSavedRepliesUpsellXoutButton=function(){var a;a=b("XMessengerAdDismissSavedRepliesUpsellBannerController").getURIBuilder().setFBID("page_id",this.props.pageID).setString("corresponding_question",(a=this.props.conversionData)==null?void 0:(a=a.upsell_specific_data)==null?void 0:a.icebreaker_message).getURI();new(b("AsyncRequest"))().setURI(a).send();this.dismissQuickBanner((a=this.props.conversionData)==null?void 0:a.conversion_type,null)};d.onClickConfirmOrderPrimaryButton=function(){var a=this,c;this.dismissQuickBanner((c=this.props.conversionData)==null?void 0:c.conversion_type,function(){b("PagesManagerOmniMActions").messengerConversionQPConfirmOrder(a.props.pageID,a.props.recipientID)})};d.onClickMarkAsOrderAdsInsightsXOutButton=function(){var a=b("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",r).getURI();new(b("AsyncRequest"))().setURI(a).send();this.dismissQuickBanner((a=this.props.conversionData)==null?void 0:a.conversion_type,null)};d.onClickConsumerQuestionGetStartedButton=function(){var a;this.logIntakeFormEvent("services_organic_intake_form_setup_enter_flow");(h||(h=b("URI"))).goURIOnNewWindow(b("XPagesAutomatedResponsesController").getURIBuilder().setString("page_token",this.props.pageID).setEnum("automation","organic_intake_form").setEnum("services_referrer","qp").setEnum("services_referrer_surface","inbox").setBool("use_intake_form_setup_experience",!0).getURI());this.dismissQuickBanner((a=this.props.conversionData)==null?void 0:a.conversion_type,null)};d.openLWIDialog=function(){var a;i(n,this.props.pageID,"www_pages_inbox_promotion","boosted_post","",(a=this.props.conversionData)==null?void 0:a.post_id);this.dismissQuickBanner((a=this.props.conversionData)==null?void 0:a.conversion_type,null)};d.eventSubtypeForGenericQuickBannerButtonType=function(a){switch(a){case"BUSINESS_PURCHASE_CONFIRM":case"APPOINTMENT_BOOK":case"CONFIRM_ORDER_CONFIRM":case"SAVED_REPLIES_UPSELL_SAVE":case"CONSUMER_QUESTION_GET_STARTED":return"confirm";case"SAVED_REPLIES_UPSELL_EDIT":return"edit";case"DISMISS":case"ADS_INSIGHTS_MARK_AS_ORDER_DISMISS":case"SAVED_REPLIES_UPSELL_XOUT":return"dismiss";default:return""}};d.takeActionForGenericQuickBannerButtonType=function(a){switch(a){case"BUSINESS_PURCHASE_CONFIRM":this.onClickPurchaseConfirmationButton();break;case"APPOINTMENT_BOOK":this.onClickAppointmentBookingButton();break;case"CONFIRM_ORDER_CONFIRM":this.onClickConfirmOrderPrimaryButton();break;case"ADS_INSIGHTS_MARK_AS_ORDER_DISMISS":this.onClickMarkAsOrderAdsInsightsXOutButton();break;case"CONSUMER_QUESTION_GET_STARTED":this.onClickConsumerQuestionGetStartedButton();break;case"SAVED_REPLIES_UPSELL_SAVE":this.onClickSavedRepliesUpsellSavingButton();break;case"SAVED_REPLIES_UPSELL_EDIT":this.onClickSavedRepliesUpsellEditingButton();break;case"SAVED_REPLIES_UPSELL_XOUT":this.onClickSavedRepliesUpsellXoutButton();break;case"DISMISS":default:this.dismissQuickBanner((a=this.props.conversionData)==null?void 0:a.conversion_type,null)}};d.dismissQuickBanner=function(a,c){var d;((d=this.props.conversionData)==null?void 0:d.conversion_type)==="CONSUMER_QUESTION"&&this.log("services_organic_intake_form_qp_cancel");b("PagesManagerOmniMActions").dismissSuggestionBar();b("PagesManagerOmniMActions").clearMessengerConversionSuggestion(this.props.pageID,this.props.recipientID,a,this.props.messageID,this.props.senderID,c)};d.showSendAvailabilityDialog=function(){var a=this;return!this.state.showSendAvailDialog?null:j.jsx(j.Suspense,{fallback:null,children:j.jsx(b("LDPSendAvailabilityDialogRoot.react"),{causalElementRef:function(){return a},onSubmitCompleted:this.onDialogUpdateCompleted,onToggle:this.onToggleSendAvaililityDialog,pageID:this.props.pageID,referrer:"Send Availability MSuggestion",shown:this.state.showSendAvailDialog,userID:this.props.recipientID})})};d.renderCreateScheduleDialog=function(){var a=this;if(!this.state.showCreateScheduleDialog)return null;var c=this.state.clickedSuggestionType?{m_suggestion_type:this.state.clickedSuggestionType}:null;return j.jsx(j.Suspense,{fallback:null,children:j.jsx(m,{additionalLoggingData:c,causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").CREATE_ANOTHER_APPOINTMENT,jobSearchSurface:"messenger",onToggle:this.onToggleCreateScheduleDialog,onUpdateCompleted:this.onDialogUpdateCompleted,pageID:this.props.pageID,referrerData:{referrerUIComponent:"suggestion_bar_book_bubble",referrerUISurface:"message"},showMessengerButton:!1,shown:this.state.showCreateScheduleDialog,startTime:this.state.startTime,userID:this.props.recipientID,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})})};d.render=function(){var a=b("PagesManagerOmniMUtils").isMessengerQuickBannerType(this.props.suggestions);if(a){a=this.props.conversionData;if(a!=null&&(a==null?void 0:a.conversion_type)!==null){a=a.conversion_type==="GENERIC"?j.jsx(b("MessengerGenericQuickBannerView.react"),{consumerID:this.props.recipientID,conversionData:a,onButtonClick:this.onClickGenericQuickBannerButton,onInformationFetched:this.$3,pageID:this.props.pageID,topPosition:this.state.suggestionHeight+o}):null;if(a===null){var c;new(b("MessengerAdsConversionExperimentTypedLogger"))().setName("mark_as_order_banner_debugging").setErrorReason((c=this.props.conversionData)==null?void 0:c.conversion_type).log()}return j.jsxs("div",{className:this.props.className,ref:this.$2,children:[this.renderCreateScheduleDialog(),a]})}else{b("FBLogger")("click_to_messenger_ads").mustfix("Invalid Messenger conversion data.");return j.jsx("div",{})}}c=Object.prototype.hasOwnProperty.call(this.props.suggestions,"suggested_reply_business_sticker");return j.jsxs("div",{className:this.props.className,children:[this.renderCreateScheduleDialog(),this.showSendAvailabilityDialog(),j.jsx(b("MessengerMSuggestionView.react"),{className:(c?"":"_4-2j")+(c&&this.props.shouldShowEyebrowTextForBusinessSticker?" _8gxy":"")+(c&&!this.props.shouldShowEyebrowTextForBusinessSticker?" _8gxz":""),isUpdating:this.state.isUpdating,onClick:this.onClick,onClickDismiss:this.onClickDismiss,partnerAppLogo:this.props.partnerAppLogo,shouldShowEyebrowTextForBusinessSticker:this.props.shouldShowEyebrowTextForBusinessSticker,suggestions:this.props.suggestions})]})};return c}(j.PureComponent);e.exports=c}),null);