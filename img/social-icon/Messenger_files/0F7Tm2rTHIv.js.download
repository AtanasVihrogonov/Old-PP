if (self.CavalryLogger) { CavalryLogger.start_js(["8hxxJ"]); }

__d("MessengerProfileLinkTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setDomain=function(a){this.$1.domain=a;return this};c.setLinkLocation=function(a){this.$1.link_location=a;return this};c.setTargetID=function(a){this.$1.target_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={action:!0,domain:!0,link_location:!0,target_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerThreadSearchActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CHANGE_RESULT_INDEX:null,GET_MORE_CONTEXT:null,GET_MORE_THREADS:null,UPDATE_THREAD_STATE:null,SCROLL_TO_MESSAGE:null});a={Types:g,selectPrevious:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:1})},selectNext:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:-1})},getMoreSearchContext:function(a,c){b("MessengerDispatcher").dispatch({type:g.GET_MORE_CONTEXT,direction:a,threadID:c})},updateThreadState:function(a,c){b("MessengerDispatcher").dispatch({type:g.UPDATE_THREAD_STATE,threadID:a,mid:c})},loadMoreThreads:function(){b("MessengerDispatcher").dispatch({type:g.GET_MORE_THREADS})},scrollToMessage:function(a){b("MessengerDispatcher").dispatch({type:g.SCROLL_TO_MESSAGE,messageID:a})}};e.exports=a}),null);
__d("MessengerBootloadedLogMessage.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("BootloadOnRender.react"),{component:h.jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("MessengerLogMessage.react").__setRef("MessengerBootloadedLogMessage.react"),placeholder:h.jsx("div",{className:"_497p",children:"..."})})};return c}(h.PureComponent);e.exports=a}),null);
__d("MessengerProfileLinkAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK:"click",HOVER:"hover"})}),null);
__d("MessengerProfileLinkDomain",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FB_SLASH_MESSAGES:"fb_slash_messages",WORK_CHAT:"work_chat"})}),null);
__d("MessengerProfileLinkLogger.bs",["MessengerProfileLinkTypedLogger"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){new(b("MessengerProfileLinkTypedLogger"))().setTargetID(a).setDomain(c).setLinkLocation(d).setAction(e).log();return 0}f.logItemImpression=a}),null);
__d("ProfileLinkReact.bs",["ReasonReact.bs","bs_js_null_undefined","ProfileLink.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){var j;return b("ReasonReact.bs").wrapJsForReason(b("ProfileLink.react"),{className:(j=b("bs_js_null_undefined")).fromOption(a),href:j.fromOption(c),onClick:j.fromOption(d),onMouseEnter:j.fromOption(e),onMouseLeave:j.fromOption(f),target:j.fromOption(g),uid:h},i)}f.make=a}),null);
__d("MessengerProfileLink.bs",["cx","URI","bs_block","bs_curry","React","Arbiter","Link.react","Badge.react","bs_caml_option","CurrentUser","ReasonReact.bs","ProfileLinkReact.bs","isMessengerDotComURI","MessengerProfileLinkAction","MessengerProfileLinkDomain","MessengerProfileLinkLogger.bs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j=b("ReasonReact.bs").reducerComponent("MessengerProfileLink");function k(a,c,d,e,f,g,k){var l=b("isMessengerDotComURI")(new(h||(h=b("URI")))(window.location.href)),m=b("CurrentUser").isWorkUser()?b("MessengerProfileLinkDomain").WORK_CHAT:l?b("MessengerProfileLinkDomain").MESSENGER_DOT_COM:b("MessengerProfileLinkDomain").FB_SLASH_MESSAGES,n=function(a){return b("MessengerProfileLinkLogger.bs").logItemImpression(f,m,d,b("MessengerProfileLinkAction").HOVER)},o=function(a){return b("MessengerProfileLinkLogger.bs").logItemImpression(f,m,d,b("MessengerProfileLinkAction").CLICK)};return{debugName:j.debugName,reactClassInternal:j.reactClassInternal,handedOffState:j.handedOffState,getDerivedStateFromProps:j.getDerivedStateFromProps,didMount:function(a){var c=b("Arbiter").subscribe("Hovercard/show",function(c,d){return b("bs_curry")._1(a.send,0)}),d=b("Arbiter").subscribe("Hovercard/hide",function(c,d){return b("bs_curry")._1(a.send,1)});return b("bs_curry")._1(a.onUnmount,function(a){c.unsubscribe();d.unsubscribe();return 0})},didUpdate:j.didUpdate,willUnmount:j.willUnmount,shouldUpdate:j.shouldUpdate,render:function(d){var h=i.jsxs("span",{children:[e,g?i.jsx(b("Badge.react"),{size:"medium",type:"verified"}):null]});return i.jsx("span",{children:a!==void 0?l?i.jsx(b("Link.react"),{href:a,onClick:function(a){d.state.isHovercardShown&&n(0);return o(0)},target:c,children:h}):b("ReasonReact.bs").element(void 0,void 0,b("ProfileLinkReact.bs").make(void 0,void 0,function(a){return o(0)},void 0,function(a){if(d.state.isHovercardShown)return n(0);else return 0},void 0,f,[h])):h,className:"_6ybk"})},initialState:function(a){return{isHovercardShown:!1}},retainedProps:j.retainedProps,reducer:function(a,c){if(a)return b("bs_block").__(0,[{isHovercardShown:!1}]);else return b("bs_block").__(0,[{isHovercardShown:!0}])},jsElementWrapped:j.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(b("bs_caml_option").nullable_to_opt(a.href),a.target,a.location,a.name,a.uid,a.isVerified,[])});f.component=j;f.make=k;f.jsComponent=a}),null);
__d("TimeSpentRoomTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT",LOCAL_COMMUNITY:"LOCAL_COMMUNITY"})}),null);
__d("TimeSpentRoomTypeEnum$FbtEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GROUP:"Group",EVENT:"Event"});e.exports=a}),null);
__d("MessengerContextBanner.react",["cx","fbt","Badge.react","CurrentUser","Image.react","ImageBlock.react","Link.react","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryShareAttachmentRenderLocations","MercuryThreadImage.react","MessengerProfileLink.bs","MessengerTextWithEmoticons.react","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum","immutable","prop-types","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerProfileLink.bs").jsComponent,j=b("React"),k;b("requireWeak")("MessengerThreadImageReact.bs",function(a){k=a.jsComponent});a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=j.jsxs(b("ImageBlock.react"),{className:"_llj"+(this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER?" _2eu-":"")+(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?" _2eu_":""),spacing:"large",style:this.props.style,children:[this.$1(),j.jsxs("div",{className:"_lll",children:[this.$2(),this.$3(),this.$4()]})]}),c=this.props.associatedObject;c&&c.action_link&&(a=j.jsx(b("Link.react"),{href:c.action_link,target:"_blank",style:{textDecoration:"none"},children:a}));return a};d.$1=function(){var a=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER,c=this.props.associatedObject,d=null;if(!this.props.contactName&&c&&a)d=j.jsx(b("Image.react"),{className:"_4ld- _1wrc",src:c.profile_picture});else if(this.props.thread){c=k&&a?k:b("MercuryThreadImage.react");d=j.jsx(c,{showBadge:!1,participants:this.props.participants,size:a?60:null,thread:this.props.thread,viewer:this.props.viewer})}else this.props.participantIDs&&(d=j.jsx(b("MercuryParticipantsImage.react"),{participants:this.props.participantIDs,size:b("MercuryParticipantsConstants").BIG_IMAGE_SIZE}));return j.jsx("div",{className:"_llk",children:d})};d.$2=function(){if(this.props.location!==b("MercuryShareAttachmentRenderLocations").MESSENGER)return null;var a=this.props.isVerified?j.jsx(b("Badge.react"),{size:"medium",type:"verified"}):null,c=this.props.contactName;if(!c){var d=this.props.associatedObject;c=d?d.name:null}d=this.props.contactFBProfile;var e=this.props.contactID;return j.jsx("div",{className:"_llq",children:j.jsxs("span",{className:"_3oh-",children:[j.jsx(i,{href:d,location:"context_banner",name:c,uid:e}),a]})})};d.$3=function(){return j.jsx("div",{className:"_1n-e _36zg",children:j.jsx(b("MessengerTextWithEmoticons.react"),{text:this.props.connectionContext||"",renderEmoticons:!1})})};d.$4=function(){if(!this.props.contextItems.length){var a=this.props.associatedObject;if(a){a=b("TimeSpentRoomTypeEnum")[a.room_type];var c=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return j.jsx("div",{className:"_1n-e",children:h._({"GROUP":"Go to {productName} Group","EVENT":"Go to {productName} Event"},[h._param("productName",c),h._enum(a,b("TimeSpentRoomTypeEnum$FbtEnum"))])})}return null}return j.jsx("div",{children:this.props.contextItems.map(function(a,c){return j.jsx("div",{className:"_1n-e",children:j.jsx(b("MessengerTextWithEmoticons.react"),{text:a||"",renderEmoticons:!1})},"item:"+c)})})};return c}(j.PureComponent);a.propTypes={contactFBProfile:(c=b("prop-types")).string,contactID:c.string,contactName:c.string,associatedObject:c.object,connectionContext:c.string,contextItems:c.arrayOf(c.string).isRequired,isVerified:c.bool,location:c.string.isRequired,participantIDs:c.arrayOf(c.string),participants:c.instanceOf(b("immutable").Map),thread:c.object,viewer:c.string.isRequired};e.exports=a}),null);
__d("XMessengerContextBannerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/messenger/context_banner/",{profile_id:{type:"Int",required:!0},max_context_items:{type:"Int",defaultValue:3}})}),null);
__d("MessengerContextInformationStore",["AsyncRequest","EventEmitter","TimeSlice","XMessengerContextBannerController"],(function(a,b,c,d,e,f){"use strict";var g=new Map(),h=new Map();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$MessengerContextInformationStore1=function(a){if(h.get(a))return;var c=b("XMessengerContextBannerController").getURIBuilder().setInt("profile_id",a).getURI();c=new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI(c).setHandler(d.$MessengerContextInformationStore2.bind(babelHelpers.assertThisInitialized(d),a));h.set(a,c);c.send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getOrFetch=function(a){var c=g.get(a);c||b("TimeSlice").guard(this.$MessengerContextInformationStore1,"Chat Tab Messenger Context Banner Fetch",{propagationType:b("TimeSlice").PropagationType.ORPHAN})(a);return c};d.$MessengerContextInformationStore2=function(a,b){g.set(a,{connectionContext:b.payload.connection_context||"",contextItems:b.payload.context_items||[]}),h["delete"](a),this.emit("change")};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("PagesMessengerContextBanner.react",["cx","MercuryThreadImage.react","ProfileHeaderCoverPhoto.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=83,j=284,k=60;function a(a){var c=a.coverPhotoData?h.jsx(b("ProfileHeaderCoverPhoto.react"),{coverPhotoData:a.coverPhotoData,height:i,width:j}):null;return h.jsxs("div",{className:"_fj3",children:[c,h.jsxs("div",{className:"_2-0o",children:[h.jsx(b("MercuryThreadImage.react"),{className:"_2gye",size:k,thread:a.thread,viewer:a.viewer}),")"]})]})}e.exports=a}),null);
__d("MessengerContextBannerContainer.react",["DOMDimensions","MercuryIDs","MercuryShareAttachmentRenderLocations","MessengerContextBanner.react","MessengerContextInformationStore","MessengerParticipants.bs","PagesMessagingMercuryChatTabStore","PagesMessengerContextBanner.react","React","ReactComponentWithPureRenderMixin","ReactDOM","StoreAndPropBasedStateMixin","createReactClass_DEPRECATED","immutable","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("createReactClass_DEPRECATED")({displayName:"MessengerContextBannerContainer",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerContextInformationStore"),b("PagesMessagingMercuryChatTabStore"))],propTypes:{location:(a=b("prop-types")).string.isRequired,onResize:a.func,otherUserFBIDs:a.arrayOf(a.string),thread:a.object,threadID:a.string,viewer:a.string.isRequired},statics:{calculateState:function(a){var c=a.thread,d=null;c?d=c&&c.participants:a.otherUserFBIDs&&a.otherUserFBIDs.length===1&&(d=a.otherUserFBIDs.map(function(a){return b("MessengerParticipants.bs").getIDFromVanityOrFBID(a)}));var e=b("immutable").Map();d&&(e=e.withMutations(function(a){d&&d.forEach(function(c){a.set(c,b("MessengerParticipants.bs").getNow(c))})}));var f=null,g=null;c?(f=e.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id)),g=c.associated_object):f=d&&e.get(d[0]);c=b("PagesMessagingMercuryChatTabStore").getStateByThread(a.threadID);a=c.coverPhotoData;return babelHelpers["extends"]({associatedObject:g,contact:f,coverPhotoData:a,participantIDs:d,participants:e},h.getContextInformation(f&&f.fbid&&f.fbid.toString()))},getContextInformation:function(a){var c;a&&(c=b("MessengerContextInformationStore").getOrFetch(a.toString()));return c||{connectionContext:"",contextItems:[]}}},componentDidUpdate:function(){var a=b("ReactDOM").findDOMNode(this);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).height;this.props.onResize&&this.props.onResize(a)},render:function(){if(!this.state.contact)return this.state.associatedObject&&this.props.location==b("MercuryShareAttachmentRenderLocations").MESSENGER?g.jsx(b("MessengerContextBanner.react"),{associatedObject:this.state.associatedObject,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,thread:this.props.thread,viewer:this.props.viewer}):null;if(this.state.contact.type==="page"){if(!this.state.connectionContext&&!this.state.contextItems.length)return null;if(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT&&this.props.thread!=null)return g.jsx(b("PagesMessengerContextBanner.react"),{coverPhotoData:this.state.coverPhotoData,thread:this.props.thread,viewer:this.props.viewer})}return g.jsx(b("MessengerContextBanner.react"),{contactFBProfile:this.state.contact.href,contactID:this.state.contact.fbid,contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.verification_status==="BLUE_VERIFIED",location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,thread:this.props.thread,viewer:this.props.viewer})}});e.exports=h}),null);
__d("MessengerAdsMessageSeenThreadFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","messenger_ads_message_seen_thread");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("MessengerDateBreak_DEPRECATED.react",["cx","FBLogger","React","WorkChatRedesignedMessageListCheck.re","formatDate","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return this.props.date.getTime()!==a.date.getTime()};d.render=function(){try{var a=b("formatDate")(this.props.date,{future:"g:ia",today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return h.jsx("h4",{className:b("joinClasses")(this.props.className,"_497p"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w5v":"")+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w78":"")+" _2lpt"),children:h.jsx("time",{className:"_3oh-",children:a})})}catch(a){b("FBLogger")("messaging").mustfix("invalid timestamp: "+this.props.date.getTime());return null}};return c}(h.Component);a.propTypes={date:b("prop-types").instanceOf(Date).isRequired};e.exports=a}),null);
__d("MessengerFlexArea.react",["cx","CSS","Event","MessengerSignals.bs","React","ReactDOM","ResponsiveBlock.react","Style","SubscriptionsHandler","Vector","clearTimeout","createReactClass_DEPRECATED","getElementRect","getScrollPosition","joinClasses","prop-types","setTimeoutAcrossTransitions","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("createReactClass_DEPRECATED")({displayName:"MessengerFlexArea",propTypes:{limitCalculationToParent:(a=b("prop-types")).bool,beforeResize:a.func,onResize:a.func,bottomOffset:a.number,maxHeight:a.oneOfType([a.number,a.oneOf[void 0,null]])},_subscriptions:null,_onResizeTimeout:null,getInitialState:function(){return{height:0}},componentDidMount:function(){var a=this,c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.recalculateHeight,51)),b("MessengerSignals.bs").onResize(function(){a.recalculateHeight()}));this._subscriptions=c;b("setTimeoutAcrossTransitions")(this.recalculateHeight,0)},componentDidUpdate:function(a){a.maxHeight!==this.props.maxHeight&&this.recalculateHeight()},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),b("clearTimeout")(this._onResizeTimeout)},render:function(){return h.jsx(b("ResponsiveBlock.react"),{className:b("joinClasses")(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+"px"},children:this.props.children})},recalculateHeight:function(){if(!this.isMounted())return;var a=b("ReactDOM").findDOMNode(this),c=a.parentNode,d=this.state.height,e=b("Vector").getViewportDimensions().y,f=!1;c&&b("Style").get(c,"display")==="none"&&(b("Style").set(c,"display","initial"),f=!0);var g=!1;c instanceof Element&&b("CSS").hasClass(c,"hidden_elem")&&(b("CSS").removeClass(c,"hidden_elem"),g=!0);if(this.props.limitCalculationToParent===!0&&c!=null&&c instanceof Element){var h=c.getBoundingClientRect().height;this.setState({height:h},this.props.onResize);return}e-=b("Vector").getElementPosition(c||a).y;h=b("getScrollPosition")(window);e+=h.y;this.props.bottomOffset&&(e-=this.props.bottomOffset);c&&(Array.from(c.childNodes).forEach(function(a){if(a.nodeType===Node.COMMENT_NODE||b("Style").get(a,"position")==="absolute")return;e-=b("getElementRect")(a).height}),e+=b("getElementRect")(a).height);f&&b("Style").set(c,"display","");g&&c instanceof Element&&b("CSS").addClass(c,"hidden_elem");(isNaN(e)||e<0)&&(e=0);this.props.maxHeight!=null&&(e=Math.min(this.props.maxHeight,e));e!==d&&(this.props.beforeResize&&this.props.beforeResize(),this.setState({height:e},this.props.onResize))},_handleResponsiveBlockResize:b("throttle")(function(a,c){if(!this.isMounted())return;c===this.state.height&&(this.props.beforeResize&&this.props.beforeResize(),b("clearTimeout")(this._onResizeTimeout),this.props.onResize&&(this._onResizeTimeout=b("setTimeoutAcrossTransitions")(this.props.onResize,0)))},51)});e.exports=c}),null);
__d("MessengerStickyVerticalScroller.react",["invariant","React","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=b("React");c=a.forwardRef;var i=a.useEffect,j=a.useImperativeHandle,k=a.useRef,l=a.useState,m=5,n={wrapper:{position:"relative"},detector:{position:"absolute",height:"100%",overflow:"auto",width:"1px",visibility:"hidden"}},o=function(a){var c=a.children,d=a.style,e=a.onResize,f=k(),j=k(),l=k(),m=k();i(function(){var a=b("nullthrows")(j.current),c=b("nullthrows")(l.current),d=b("nullthrows")(m.current);a.appendChild(document.createElement("div"));a=document.createElement("div");a.style.height="200%";c.appendChild(a);f.current=d.clientHeight;p()},[]);function o(a){var c=b("nullthrows")(m.current),d=b("nullthrows")(f.current);d=c.clientHeight-d;a.stopPropagation();if(d===0)return;f.current=c.clientHeight;p();e()}function p(){var a=b("nullthrows")(j.current),c=b("nullthrows")(l.current),d=b("nullthrows")(a.firstChild);d instanceof HTMLDivElement||g(0,22392);d.style.height=a.clientHeight+1+"px";a.scrollTop=a.scrollHeight;c.scrollTop=c.scrollHeight}return h.jsxs("div",{style:babelHelpers["extends"]({},d,n.wrapper),ref:m,children:[h.jsx("div",{style:n.detector,onScroll:o,ref:j}),h.jsx("div",{style:n.detector,onScroll:o,ref:l}),c]})},p={container:{height:"100%",overflow:"auto"}};d=c(function(a,c){var d=a.children,e=a.style,f=a.onScroll;a=a.initialAnchor;a=a===void 0?"bottom":a;var g=k(),n=k(-1),q=k(-1),r=k(-1),s=l(a),t=s[0],u=s[1],v=k(a);j(c,function(){return{scrollToBottom:function(){var a=b("nullthrows")(g.current);w();a.scrollTop=a.scrollHeight;r.current=a.scrollTop},getArea:function(){return{getScrollHeight:function(){var a=b("nullthrows")(g.current);return a.scrollHeight},getScrollTop:function(){var a=b("nullthrows")(g.current);return a.scrollTop},getElement:function(){return{getBoundingClientRect:function(){var a=b("nullthrows")(g.current);return{height:a.clientHeight}}}},isScrolledToBottom:function(){return t==="bottom"}}},scrollToPosition:function(a,c){c===void 0;c=b("nullthrows")(g.current);w();c.scrollTop=a;r.current=c.scrollTop},isScrolledToBottom:function(){return t==="bottom"}}});i(function(){var a=b("nullthrows")(g.current);q.current=a.clientHeight;n.current=a.scrollHeight;v.current==="bottom"&&(a.scrollTop=a.scrollHeight);r.current=a.scrollTop},[]);function w(){var a=b("nullthrows")(g.current),c=a.clientHeight-q.current,d=a.scrollHeight-n.current;if(t==="bottom"){d=r.current+d-c;c=a.scrollHeight-a.clientHeight-d<m;a.scrollTop=c?a.scrollHeight:d}q.current=a.clientHeight;n.current=a.scrollHeight;r.current=a.scrollTop}function x(a){a=a.target.scrollTop;if(a===r.current)return;var c=b("nullthrows")(g.current);r.current=a;q.current=c.clientHeight;u(n.current-q.current-r.current<m?"bottom":"top");f!=null&&f()}return h.jsx(o,{onResize:w,style:e,children:h.jsx("div",{style:p.container,ref:g,onScroll:x,children:h.jsx(o,{onResize:w,style:null,children:d})})})});e.exports=d}),null);
__d("MessengerFlexScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","MessengerStickyVerticalScroller.react","React","gkx","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("gkx")("1489717");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={shouldTrackBottom:c.props.shouldStickToBottom},c.$2=function(){c.props.onScroll&&c.props.onScroll();if(!c.props.shouldStickToBottom)return;c.$3()},c.$1=function(){c.trackBottomIfRequired()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.props.onMount&&this.props.onMount()};d.render=function(){return g.jsxs(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$1,ref:"flexArea",maxHeight:this.props.maxHeight,limitCalculationToParent:this.props.limitCalculationToParent,bottomOffset:this.props.bottomOffset,children:[this.props.flexChildren,this.props.shouldStickToBottom&&h?g.jsx(b("MessengerStickyVerticalScroller.react"),{style:{height:"100%"},initialAnchor:"bottom",ref:"scrollable",onScroll:this.props.onScroll,children:this.props.children}):g.jsx(b("MessengerScrollableArea.react"),{height:"100%",needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$2,ref:"scrollable",tabIndex:this.props.tabIndex,children:this.props.children}),this.props.footerChildren]})};d.$3=function(){this.isScrolledToBottom()?this.setState({shouldTrackBottom:!0}):this.setState({shouldTrackBottom:!1})};d.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea()};d.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight()};d.trackBottomIfRequired=function(){this.state.shouldTrackBottom&&!h&&this.scrollToBottom()};d.overrideTrackBottom=function(a){this.setState({shouldTrackBottom:a})};d.scrollToBottom=function(a){this.refs.scrollable&&this.refs.scrollable.scrollToBottom(a)};d.scrollToTop=function(a){this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};d.scrollToPosition=function(a,b,c){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(a,b,c)};d.isScrolledToBottom=function(){var a=this.refs.scrollable;return a?a.isScrolledToBottom():!0};d.isScrolledToBottomWithHeight=function(a){return this.refs.scrollable.isScrolledToBottomWithHeight(a)};d.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop()};d.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0};return c}(g.Component);a.propTypes={flexChildren:(c=b("prop-types")).node,footerChildren:c.node,onMount:c.func,onScroll:c.func,shouldStickToBottom:c.bool,tabIndex:c.number,maxHeight:c.number,bottomOffset:c.number,limitCalculationToParent:c.bool};e.exports=a}),null);
__d("MessengerNewMessagesNoticeReact.bs",["cx","ix","fbt","React","Link.react","Image.react","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=h("86939"),l=i._("New Messages");c=b("ReasonReact.bs").statelessComponent("MessengerNewMessagesNoticeReact");function a(a){var c=a.isOpen,d=a.onClick;a=a.label;a=a!==void 0?a:l;return j.jsx("div",{children:j.jsxs(b("Link.react"),{className:"_5f0v _4wzs",onClick:d,tabIndex:c?0:-1,children:[j.jsx(b("Image.react"),{className:"_4wzt",src:k}),j.jsx("div",{children:a,className:"_1bqr"})]}),"aria-hidden":!c,className:"_4wzq"+(c?" _4wzr":"")+(c?"":" _4-je")})}d=a;e=a;f.newMessageSrc=k;f.defaultLabel=l;f.component=c;f.make=d;f.jsComponent=e}),null);
__d("MessengerUserInputActions",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({UPDATE_USER_INPUT_REQUESTED:null});e.exports={MessengerUserInputActions:a}}),null);
__d("MessengerUserInputAppDispatcher",["ExplicitRegistrationDispatcher","objectValues"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}var d=c.prototype;d.explicitlyRegisterStoresInMap=function(a){this.explicitlyRegisterStores(b("objectValues")(a))};return c}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!0})}),null);
__d("MessengerUserInputActionsHandler",["MessengerUserInputActions","MessengerUserInputAppDispatcher"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerUserInputActions").MessengerUserInputActions;a={updateUserInputRequested:function(a,c,d){b("MessengerUserInputAppDispatcher").dispatch({type:g.UPDATE_USER_INPUT_REQUESTED,data:{isUserInputRequested:a,requestNumResults:c,requestType:d}})}};e.exports=a}),null);
__d("MessengerConversation.react",["ix","csx","cx","fbt","requireCond","Bootloader","BootloadOnRender.react","ChatTypingIndicatorsWrapper.bs","CSS","CurrentUser","DOM","DOMDimensions","ErrorBoundary.react","Event","EventProfiler","FantaPageGreetingLoader.react","Image.react","ImmutableObject","JSResource","KeyEventController","LazyComponent.react","Link.react","MercuryIDs","MercuryShareAttachmentRenderLocations","cr:1203488","MessageList.react","MessengerActions","MessengerAttachmentRenderer","MessengerBootloadedLogMessage.react","MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery","MessengerBusinessUserProfileLocationQueryWebGraphQLQuery","MessengerButtonReact.re","MessengerCollapsedLogMessageGroup.react","MessengerContextBannerContainer.react","MessengerDateBreak_DEPRECATED.react","MessengerDialogs.re","MessengerDotComAndInboxM4Check.bs","MessengerFlexScrollableArea.react","MessengerNewMessagesNoticeReact.bs","MessengerQuickCamOrigins","MessengerQuickReplyUtils","MessengerReadReceipt.bs","MessengerSpinner.react","MessengerThreadFetchLoggerUtil","MessengerThreadSearchActions","MessengerTypingIndicatorReact.re","MessengerUserInputActionsHandler","MessengerUserProfileLocationUtils","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","MessengerViewBirthdayQueryWebGraphQLQuery","MessengerViewerContactMethodsWebGraphQLQuery","Parent","React","ReactDOM","SubscriptionsHandler","UserActivity","WebGraphQL","WebMessengerConstants","WorkBotLandingPageHelper","WorkChatRedesignedMessageListCheck.re","WorkGalahadScrollToMessageEventEmitter","cr:1071079","cr:1272775","cr:1071080","asset","emptyFunction","getPageIDFromThreadID","gkx","ifRequired","immutable","joinClasses","lazyLoadComponent","nullthrows","promiseDone","prop-types","qex","setImmediate","setTimeout","throttle","MessengerAdsMessageSeenThreadFalcoEvent"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("ChatTypingIndicatorsWrapper.bs").jsComponent,l=b("MessengerButtonReact.re").make,m=b("MessengerNewMessagesNoticeReact.bs").jsComponent,n=b("MessengerTypingIndicatorReact.re").component,o=b("MessengerUserProfileLocationUtils").FetchMessengerUserRegionAndPostalCode,p=b("MessengerUserProfileLocationUtils").PassesGlobalizationGK,q=b("React"),r=b("WorkBotLandingPageHelper").shouldShowBotLandingPage;b("immutable").OrderedMap;var s=0,t=20,u=100,v=1e3,w=200,x=b("gkx")("833128"),y=b("gkx")("1489717"),z=b("lazyLoadComponent")(b("JSResource")("WorkChatBotConversationGreetingContainer.react").__setRef("MessengerConversation.react")),A=b("lazyLoadComponent")(b("JSResource")("WorkChatPinnedMessages.react").__setRef("MessengerConversation.react")),B=b("lazyLoadComponent")(b("JSResource")("OmniMSuggestionsContainer.react").__setRef("MessengerConversation.react"));function C(a,c){return!!(b("KeyEventController").filterEventTypes(a,c)&&b("KeyEventController").filterEventModifiers(a,c)&&a.target instanceof Element&&b("Parent").bySelector(a.target,"._4_j4"))}var D={};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={readReceipts:E(d.props),scrollingToUnreadMessage:!1,selectedMessageId:null,showUnreadNotice:!1,unreadCount:d.props.thread?d.props.thread.unread_count:0,width:0,viewerBirthday:null,viewerEmail:null,viewerPhone:null,viewerState:null,viewerZipCode:null,shouldJumpToMessage:!1,isLandingPageDismissed:!1,renderScrollToBottom:!1},d.$1=null,d.$2=null,d.$3=null,d.$4=b("immutable").List(),d.$5=[],d.$6={originalScrollHeight:0,originalScrollTop:0},d.$7=function(){},d.$8=function(){},d.$16=function(){var a=d.$19();if(!d.refs||!a||d.props.isLoading){d.$5=[];return}var c=b("getPageIDFromThreadID")(d.props.threadID),e=d.refs.messageList;if(!e||!c){d.$5=[];return}var f=10,g=a.getElement().getBoundingClientRect(),h=[];d.$4.forEach(function(a){var e=a.message_id,i=d.refs.messageList.getMessageElement(e);if(i){i=i.getBoundingClientRect();i.top>g.top-f&&i.bottom<g.bottom+f&&(h.push(e),d.$5.includes(e)||(b("gkx")("1181700")?b("MessengerAdsMessageSeenThreadFalcoEvent").log(function(){return{message_id:e,ad_client_token:a.ad_client_token,ad_id:a.ad_id,page_id:c}}):b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,d){b.log(a.ad_client_token,a.ad_id,d.MESSAGE_SEEN_THREAD,!0,e,c)},"MessengerConversation.react")))}},babelHelpers.assertThisInitialized(d));d.$5=h},d.$20=function(){b("MessengerThreadFetchLoggerUtil").markerEnd(d.props.threadID,2),d.$20=b("emptyFunction")},d.$40=function(){var a;return((a=d.props.contact)==null?void 0:a.user_type)==="page"&&b("getPageIDFromThreadID")(d.props.threadID)!==null},d.$42=function(){d.state.renderScrollToBottom?(d.scrollToBottom(!0),d.setState({renderScrollToBottom:!1})):b("MessengerActions").changeMid(null)},d.$41=function(){d.setState({isLandingPageDismissed:!0})},d.$9=function(){var a=d.$19();a&&a.pageUp();return!1},d.$10=function(){var a=d.$19();a&&a.pageDown();return!1},d.$11=function(a){if(a.target===document.body){d.scrollToTop();return!1}return null},d.$12=function(a){if(a.target===document.body){d.scrollToBottom();return!1}return null},d.$15=function(){if(!d.refs)return;if(!d.refs.scrollable)return;var a=d.$19(),c=d.refs.quickReply;c&&b("CSS").conditionClass(c,"_1mzg",!d.isScrolledToBottom());d.$13();d.$14();a&&d.state.unreadCount&&d.$26(a)&&d.setState({showUnreadNotice:!1,unreadCount:0});a&&a.isScrolledToBottom()&&d.setState({renderScrollToBottom:!1});d.$46(a);d.$47(a);d.$8()},d.$45=function(a){a.preventDefault(),d.setState({showUnreadNotice:!1}),d.$22(!0)},d.$14=function(){if(d.props.messages.size===0||d.props.thread&&d.props.thread.unread_count===0||!d.isScrolledToBottom())return;b("UserActivity").isOnTab()&&b("UserActivity").isActive()?d.props.onRead(d.props.threadID):d.$3||(d.$3=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(d.$18(),d.props.onRead(d.props.threadID))}))},d.handleResize=function(){if(!d.refs)return;if(d.refs.scrollable){d.refs.scrollable.handleResize();var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(d.refs.scrollable)).width;a!==d.state.width&&d.setState({width:a})}a=d.refs.quickReply;a&&b("CSS").conditionClass(a,"_1mzg",!d.isScrolledToBottom());y||d.trackBottomIfRequired()},d.$17=function(a){d.props.messages.some(function(b){return b.message_id===a})?d.$24(a,!0,function(){d.setState({selectedMessageId:a})}):(d.setState({selectedMessageId:null,shouldJumpToMessage:!0}),b("MessengerActions").changeMid(a))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this,c,d=new(b("SubscriptionsHandler"))();d.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.handleResize,50)),(c=b("KeyEventController")).registerKey("PAGE_UP",this.$9,C),c.registerKey("PAGE_DOWN",this.$10,C),c.registerKey("HOME",this.$11,C),c.registerKey("END",this.$12,C));this.$2=d;this.$13();this.handleResize();this.$14();this.$7=b("throttle")(this.$15,u);this.$8=b("throttle")(this.$16,v);this.$4=this.props.messages.filter(function(a){return a.is_sponsored});this.$8();b("WorkGalahadScrollToMessageEventEmitter").addListener("scrollToMessage",function(b){a.$17(b)})};d.UNSAFE_componentWillReceiveProps=function(a){var b=a.threadID!==this.props.threadID;b&&(this.$18(),this.setState({scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:a.thread?a.thread.unread_count:0,isLandingPageDismissed:!1}));(b||a.messages!==this.props.messages)&&(this.$4=a.messages.filter(function(a){return a.is_sponsored}));this.setState({readReceipts:E(a)})};d.componentWillUnmount=function(){this.$18(),this.$2&&this.$2.release(),this.$1!=null&&window.clearTimeout(this.$1),b("WorkGalahadScrollToMessageEventEmitter").removeAllListeners("scrollToMessage")};d.UNSAFE_componentWillUpdate=function(){var a=this.$19();a?this.$6={originalScrollHeight:a.getScrollHeight(),originalScrollTop:a.getScrollTop()}:this.$6={originalScrollHeight:0,originalScrollTop:0}};d.componentDidUpdate=function(a,c){var d=this;if(!this.refs)return;if(!this.refs.scrollable)return;(!this.props.isLoading||!this.props.messages.isEmpty())&&this.$20();c=this.props.threadID!==a.threadID;if(c&&!y||F(a,this.props))this.scrollToBottom(),this.$21();else{var e=this.$19();if(e){var f=e.getScrollHeight();if(f!==this.$6.originalScrollHeight){f=e.getScrollHeight()-this.$6.originalScrollHeight+this.$6.originalScrollTop;this.refs.scrollable.scrollToPosition(f)}else this.$21()}}this.props.messages!==a.messages&&(this.$14(),this.state.scrollingToUnreadMessage&&this.$22(!1),this.$23());e=this.props.selectedMessage;this.state.shouldJumpToMessage&&e&&this.$24(e,!0,function(){d.setState({shouldJumpToMessage:!1})});this.$1=b("setTimeout")(function(){var a=d.$19(),c=d.state.unreadCount;d.trackBottomIfRequired();if(a&&d.state.unreadCount&&!d.state.scrollingToUnreadMessage&&!d.props.isLoading&&d.props.selectedMessage==null&&!d.$25()){d.$26(a)?d.setState({showUnreadNotice:!1,unreadCount:0}):c==1&&((c=d.props.messages.last())==null?void 0:c.log_message_type)!==null?d.setState({showUnreadNotice:!1,unreadCount:0}):d.setState({showUnreadNotice:!0})}d.$13();d.$8();b("setImmediate")(function(){var c=d.props.selectedMessage;a&&c!=null&&!d.props.scrolledToMid&&b("MessengerThreadSearchActions").scrollToMessage(c)})},0);f=a.messages&&a.messages.size||0;e=this.props.messages&&this.props.messages.size||0;(c||f===0&&(e>0||!this.props.isLoading))&&b("EventProfiler").informManualInteractionTimestamp(["MessengerThredRow"],!0,"click")};d.render=function(){var a=this,c;if(this.props.isLoading&&this.props.messages.isEmpty())return this.$27();var d=this.props.messages.last(),e=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);this.$28(d);var f=this.$29(d),g=this.$30(d);this.$31(d);e=d&&d.author!==e?f||g:null;f=null;if(Array.isArray(e)){g=e.every(function(b){return b.content_type==="user_birthday"&&a.state.viewerBirthday===null||b.content_type==="user_email"&&a.state.viewerEmail===null||b.content_type==="user_phone_number"&&a.state.viewerPhone===null||b.content_type==="user_state"&&a.state.viewerState===null||b.content_type==="user_zip_code"&&a.state.viewerZipCode===null});if(!g){g=b("MessengerQuickReplyUtils").localizeTitleIfNecessary(e);f=q.jsx(b("BootloadOnRender.react"),{component:q.jsx(b("LazyComponent.react"),{options:g,threadID:d.thread_id,onVoiceClipCreate:this.props.onVoiceClipCreate,viewer:this.props.viewer,quickCamOriginLocation:b("MessengerQuickCamOrigins").MESSENGER,messageId:d.message_id,pageId:b("MercuryIDs").getUserIDFromParticipantID(d.author),isMessengerAdPreview:this.props.isMessengerAdPreview,isSponsored:d.is_sponsored,useM4QR:this.props.useM4QR,viewerBirthday:this.state.viewerBirthday,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone,viewerState:this.state.viewerState,viewerZipCode:this.state.viewerZipCode}),loader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MessengerConversation.react"),placeholder:q.jsx("div",{})})}}e=null;g=null;f&&(e=q.jsx("div",{className:"_51op",children:q.jsx("div",{className:"_51oq",onResize:this.handleResize})}),g=q.jsx("div",{ref:"quickReply",className:"_1mzb",onResize:this.handleResize,children:f},"quick_reply"));d=j._("Messages");f=j._("Load more...");var h=this.$32(),i=null;if(b("cr:1071079")!=null&&b("cr:1071080")!=null&&b("cr:1071080").shouldRenderChatNullState(this.props.messages,this.props.threadID,(c=this.props.contact)==null?void 0:c.user_type,this.props.viewer)){((c=this.props.thread)==null?void 0:c.work_associated_group)!=null&&b("cr:1272775")!=null?i=q.jsx(b("cr:1272775"),{group:this.props.thread.work_associated_group},"work_teamwork_chat_nullstate"):i=q.jsx(b("cr:1071079"),{messageType:b("nullthrows")(b("cr:1071080").getNullStateMessageType(this.props.threadID,this.props.viewer))},"work_teamwork_chat_nullstate")}return q.jsxs(q.Fragment,{children:[q.jsx(b("MessengerFlexScrollableArea.react"),{className:this.props.className,flexChildren:this.renderTopOfConversationNotice(),footerChildren:[g,i],onMount:function(){return b("setImmediate")(a.$14)},onScroll:this.props.useManualFetch?void 0:this.$7,ref:"scrollable",shouldStickToBottom:!0,tabIndex:0,bottomOffset:this.props.bottomOffset,children:q.jsxs("div",{"aria-label":d,className:b("joinClasses")("__i_"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w74":"")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7i2k":""),this.props.innerClassName),role:"region",children:[q.jsx("h3",{className:"accessible_elem",children:d}),this.$33(),this.props.useManualFetch&&!this.props.upExhausted?q.jsx("div",{className:"_7fim",children:q.jsx(l,{className:"_41jf",label:f,onClick:function(){return a.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP,a.props.threadID)},type:"primary",use:"default"})}):null,this.$34(),this.$35()&&q.jsx(b("FantaPageGreetingLoader.react"),{thread:this.props.thread,threadID:this.props.threadID}),i?null:h||q.jsx(b("MessageList.react"),{DateBreak:b("MessengerDateBreak_DEPRECATED.react"),deliveryTimestamp:this.props.deliveryTimestamp,isCanonical:this.props.isCanonical,LogMessage:b("MessengerBootloadedLogMessage.react"),CollapsedLogMessageGroup:b("MessengerCollapsedLogMessageGroup.react"),MessageGroup:b("cr:1203488"),messages:this.props.messages,onAttachmentLoad:this.$36(this.props.threadID),onReactionSwap:this.$37,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.state.readReceipts,ref:"messageList",selectedMessageId:this.state.selectedMessageId,location:b("MercuryShareAttachmentRenderLocations").MESSENGER,viewer:this.props.viewer,thread:this.props.thread,scrollToRepliedMessage:this.$17}),this.props.useManualFetch&&!this.props.downExhausted?q.jsx("div",{className:"_7fim",children:q.jsx(l,{className:"_41jf",label:f,onClick:function(){return a.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN,a.props.threadID)},type:"primary",use:"default"})}):null,e,q.jsx(k,{indicatorClass:n,indicatorsDidShow:function(){a.trackBottomIfRequired()},rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),b("gkx")("678591")&&q.jsx(b("ErrorBoundary.react"),{context:{project:"omnim"},children:q.jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(B,{threadID:this.props.threadID,trackBottom:function(){return a.trackBottomIfRequired()}})})})]})}),b("WorkChatRedesignedMessageListCheck.re").enabled?this.$38():this.$39()]})};d.$32=function(){if(!b("CurrentUser").isWorkUser())return null;if(!this.$40())return null;if(this.state.isLandingPageDismissed===!0)return null;return this.props.contact&&r(this.props.messages)?q.jsx(q.Suspense,{fallback:q.jsx(b("MessengerSpinner.react"),{}),children:q.jsx(z,{contact:this.props.contact,threadID:this.props.threadID,onDismiss:this.$41})}):null};d.$39=function(){var a=this.$19();if(a){a=a.getElement().getBoundingClientRect().height;a={top:a-74+"px"}}else a={bottom:"15%"};return this.props.useManualFetch&&!this.props.isSearchResult||this.state.renderScrollToBottom?q.jsx(b("Link.react"),{"aria-label":j._("Jump to the last message"),style:a,className:"_69xg",onClick:this.$42,children:q.jsx(b("Image.react"),{className:"_69xi",src:g("415099")})}):null};d.$38=function(){return this.props.useManualFetch&&!this.props.isSearchResult||this.state.renderScrollToBottom?q.jsx(b("Link.react"),{className:"_8wfp",onClick:this.$42,children:j._("Back to Latest")}):null};d.$29=function(a){var b=null;a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);var c=a&&a.message_classification==="ad_message";c&&Array.isArray(a&&a.quick_replies)&&(b=a&&a.quick_replies);return b};d.$30=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};d.$43=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return a&&a.user_input};d.$28=function(a){var c=b("gkx")("964442");if(c){c=this.$43(a);if(!c){b("MessengerUserInputActionsHandler").updateUserInputRequested(!1,s);return}else c.type==="address_auto_complete"&&b("MessengerUserInputActionsHandler").updateUserInputRequested(!0,c.data.num_results,c.type)}return};d.$13=function(){if(this.props.useManualFetch)return;var a=this.$19();a&&a.getScrollTop()<t&&(this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP,this.props.threadID),this.$23())};d.$31=function(a){var c=this;a=this.$30(a);if(!a)return;var d=b("gkx")("953755");d&&a.some(function(a){return a.content_type==="user_birthday"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewBirthdayQueryWebGraphQLQuery"))({})),function(a){a=(a=a)!=null?(a=a.viewer)!=null?(a=a.user)!=null?a.birthdate:a:a:a;if(a!==null){var b,d;d=(d=a)!=null?d.month:d;b=(b=a)!=null?b.day:b;a=(a=a)!=null?a.year:a;d&&b&&a&&c.setState({viewerBirthday:{day:b,month:d,year:a}})}});d=b("gkx")("989256");d&&a.some(function(a){return a.content_type==="user_state"||a.content_type==="user_zip_code"})&&(!this.state.viewerState||!this.state.viewerZipCode)&&(p()?b("promiseDone")(o(),function(a){var b=a==null?void 0:a.region;a=a==null?void 0:a.postal_code;c.setState({viewerState:b,viewerZipCode:a})}):(b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerBusinessUserProfileLocationQueryWebGraphQLQuery"))({})),function(a){a=(a=a)!=null?(a=a.viewer)!=null?(a=a.user)!=null?a.address:a:a:a;if(a!=null){var d,e;e=(e=a)!=null?e.city:e;d=(d=a)!=null?d.country:d;e&&d==="US"&&c.setState({viewerState:b("MessengerQuickReplyUtils").parseStateFromCityAddress(e)});c.setState({viewerZipCode:(d=a)!=null?d.postal_code:d})}}),(!this.state.viewerState||!this.state.viewerZipCode)&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery"))({})),function(a){a=(a=a)!=null?a.in_thread_user_fuzzy_location_search:a;if(a!==null){if(!c.state.viewerState){var b;c.setState({viewerState:(b=a)!=null?b.state:b})}if(!c.state.viewerZipCode){c.setState({viewerZipCode:(b=a)!=null?b.zip_code:b})}}})));a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})),function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var d=b?b.find(function(a){return a.is_preferred}):null;!d&&b&&(d=b[0]);b=a?a.find(function(a){return a.is_primary}):null;c.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=d)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})})};d.isScrolledToBottom=function(){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom())};d.isScrolledToBottomWithHeight=function(a){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(a))};d.$44=function(){return q.jsx(m,{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} unread messages","_1":"1 unread message"},[j._plural(this.state.unreadCount,"number")]),onClick:this.$45})};d.renderTopOfConversationNotice=function(){return q.jsxs(q.Fragment,{children:[q.jsx(G,{thread:this.props.thread}),this.$44()]})};d.$33=function(){return!this.props.isLoaded||this.props.hideContextBanner?null:q.jsx(b("MessengerContextBannerContainer.react"),{location:b("MercuryShareAttachmentRenderLocations").MESSENGER,thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer})};d.$34=function(){return this.props.isLoaded?null:q.jsx("div",{className:"_2k8v",children:this.props.isLoading?q.jsx(b("MessengerSpinner.react"),{}):null})};d.$27=function(){return q.jsx("div",{className:"_4xu0",children:q.jsx(b("MessengerSpinner.react"),{className:"_4xu1",size:b("MessengerSpinner.react").large_size})})};d.trackBottomIfRequired=function(){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired()};d.scrollToBottom=function(a){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToBottom(a)};d.scrollToTop=function(a){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};d.$36=function(a){var b=this;if(D[a])return D[a];var c=function(){if(b.props.threadID!==a||y)return;b.trackBottomIfRequired()};D[a]=c;return c};d.$37=function(a){b("promiseDone")(b("JSResource")("MessengerSolidReactionDialogReact.re").__setRef("MessengerConversation.react").load().then(function(c){var d=c.make;b("MessengerDialogs.re").showDialog(function(){return q.jsx(d,{isSolid:a})})}))};d.$21=function(){var a=this;b("DOM").scry(b("ReactDOM").findDOMNode(this),"img").forEach(function(c){if(c.complete)return;var d=a.props.threadID,e=b("Event").listen(c,"load",function(){(a.props.threadID===d||y)&&a.trackBottomIfRequired(),e.remove()})})};d.$48=function(){var a=this.props.messages,b=this.state.unreadCount;return!b||b>a.size?null:a.get(a.size-b)};d.$26=function(a){var b=this,c=this.props.messages,d=this.$48();if(!d)return!1;var e=a.getElement().getBoundingClientRect();return c.filter(function(a){return a&&a.timestamp<=d.timestamp}).some(function(a){a=b.refs.messageList.getMessageElement(a.message_id);if(!a)return!1;a=a.getBoundingClientRect();return a.bottom>e.top&&a.top<e.bottom})};d.$25=function(){if(x&&this.state.unreadCount<w){var a;this.refs.scrollable&&this.refs.scrollable.overrideTrackBottom(!1);a=(a=this.refs.messageList)==null?void 0:a.getNewMessageDivider();var c=this.$19();if(!a||!c)return!1;a=a.getBoundingClientRect().top;var d=b("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,e=c.getElement().getBoundingClientRect();if(a<e.top){a=a+Math.abs(d)-e.height*.2;c.setScrollTop(a,!1);this.setState({renderScrollToBottom:!0,unreadCount:0});return!0}}return!1};d.$22=function(a){var b=this;if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:!0});var c=this.$48();if(!c){this.scrollToTop(!1);return}this.$24(c.message_id,a,function(){b.setState({scrollingToUnreadMessage:!1,unreadCount:0})})};d.$24=function(a,c,d){this.refs.scrollable&&this.refs.scrollable.overrideTrackBottom(!1);a=this.refs.messageList.getMessageElement(a,!0);var e=this.$19();if(!a||!e)return;a=a.getBoundingClientRect().top;var f=b("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,g=e.getElement().getBoundingClientRect().height;a=a+Math.abs(f)-g/2;e.setScrollTop(a,c,{callback:d})};d.$19=function(){if(!this.refs)return;return this.refs.scrollable&&this.refs.scrollable.getArea()};d.$18=function(){this.$3&&this.$3.unsubscribe(),this.$3=null};d.$49=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleVideoAttachment(a)||b("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id})};d.$46=function(a){var c=this.refs.messageList;if(!c||!a)return;var d=[];a=a.getElement().getBoundingClientRect();var e=b("MessengerVideoAutoplayStore").getMessageIDs(this.props.threadID),f=e||this.$49()||b("immutable").List();f.map(function(a){var e=b("MessengerAttachmentRenderer").getVideoElem(a,c);e&&d.push([a,e.getBoundingClientRect()])});d.length&&b("MessengerVideoAutoplayActions").onScroll(this.props.threadID,e?null:f,b("immutable").Map(d),a)};d.$50=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleSphericalPhotoAttachment(a)}).map(function(a){return a.message_id})};d.$47=function(a){var c=this;b("ifRequired")("MessengerSphericalRendererActions",function(d){b("ifRequired")("MessengerSphericalRendererStore",function(e){var f=c.refs.messageList;if(!f||!a)return;var g=[],h=a.getElement().getBoundingClientRect();e=e.getMessageIDs(c.props.threadID);e=e||c.$50()||b("immutable").List();e.map(function(a){var c=b("MessengerAttachmentRenderer").getSphericalPhotoElem(a,f);c&&g.push([a,c.getBoundingClientRect()])});g.length&&d.onScroll(c.props.threadID,e,b("immutable").Map(g),h)},function(){})},function(){})};d.$23=function(){var a=this;b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$49());var c=this.$50();c&&c.count()!==0&&b("ifRequired")("MessengerSphericalRendererActions",function(b){b.updateStore(a.props.threadID,c)},function(){b("Bootloader").loadModules(["MessengerSphericalRendererActions","MessengerSphericalRendererStore"],function(b,d){b.updateStore(a.props.threadID,c)},"MessengerConversation.react")})};d.$35=function(){if(b("CurrentUser").isWorkUser())return!1;return this.props.messages.size!==0?!1:!0};return c}(q.PureComponent);a.propTypes={contact:(c=b("prop-types")).instanceOf(b("ImmutableObject")),deliveryTimestamp:c.number.isRequired,downExhausted:c.bool,fetchMessages:c.func.isRequired,hideContextBanner:c.bool,innerClassName:c.string,isCanonical:c.bool,isLoaded:c.bool,isLoading:c.bool,isMessengerAdPreview:c.bool,messages:c.instanceOf(b("immutable").List).isRequired,onVoiceClipCreate:c.func,onReplyToMessage:c.func,readReceipts:c.any,thread:c.object,threadID:c.string.isRequired,upExhausted:c.bool,useM4QR:c.bool,useManualFetch:c.bool,viewer:c.string.isRequired,selectedMessage:c.string,isSearchResult:c.bool};function E(a){var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);var f=null;b("immutable").Seq(a.messages).reverse().forEach(function(a){if(a.action_type!=="ma-type:log-message"){f=a;return!1}return!0});return d.withMutations(function(c){b("immutable").Seq(a.messages).reverse().forEach(function(a){if(e.size===0)return!1;if(!e.has(a.author))return;if(a.action_type==="ma-type:log-message")return;c.update(a.author,function(b){if(!b)return void 0;var c=b;b.watermark<=a.timestamp&&(c={watermark:a.timestamp,action:a.timestamp});f&&f.timestamp<c.watermark&&(c={watermark:f.timestamp,action:f.timestamp});return c});e["delete"](a.author)})})}function F(a,c){var d=b("MercuryIDs").getParticipantIDFromUserID(c.viewer);return c.threadID===a.threadID&&c.messages!==a.messages&&!c.messages.isEmpty()&&c.messages.last()!==a.messages.last()&&c.messages.last().author===d&&(!y||!a.isLoading)}function G(a){a=a.thread;if(a==null)return null;var c=a.pinned_messages,d=a.thread_fbid;return d==null||c==null||!b("gkx")("1179386")?null:q.jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(A,{thread:a,threadFBID:d,pinnedMessages:c})})}e.exports=a}),null);
__d("MessengerMenu.react",["cx","Keys","MenuSeparator.react","MessengerDotComAndInboxM4Check.bs","ReactXUIMenu","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a.isReactLegacyFactory={},a.type=a}c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d=c.className;c=babelHelpers.objectWithoutPropertiesLoose(c,["className"]);return a.call(this,babelHelpers["extends"]({className:b("joinClasses")(d,"_2i-c"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6_n0":"")+" _150g")},c))||this}var d=c.prototype;d.handleKeydown=function(c,d){return c===b("Keys").DOWN||c===b("Keys").UP||c===b("Keys").SPACE?a.prototype.handleKeydown.call(this,c,d):!0};return c}(b("ReactXUIMenu"));a(c);c.Item=b("ReactXUIMenu").Item;c.Separator=b("MenuSeparator.react");e.exports=c}),null);
__d("MessengerMuteDialogReact.bs",["cx","fbt","bs_block","bs_curry","React","ReasonReact.bs","MessengerDomIDs.bs","MessengerDialog.react","MessengerRadioList.react","MessengerDialogBody.react","MessengerDialogHeaderReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogCancelButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a){if(typeof a==="number")return-1;else if(a.tag)return a[0]*3600;else return a[0]*60}var k=(c=b("bs_block")).__(0,[15]),l=c.__(1,[1]),m=c.__(1,[8]),n=c.__(1,[24]),o=b("ReasonReact.bs").reducerComponent("MessengerMuteDialogReact");function a(a,c){return{debugName:o.debugName,reactClassInternal:o.reactClassInternal,handedOffState:o.handedOffState,getDerivedStateFromProps:o.getDerivedStateFromProps,didMount:o.didMount,didUpdate:o.didUpdate,willUnmount:o.willUnmount,shouldUpdate:o.shouldUpdate,render:function(a){var c,d=a.state;return i.jsxs(b("MessengerDialog.react"),{shown:d.shown,titleID:b("MessengerDomIDs.bs").ids.MUTE_DIALOG_TITLE,children:[i.createElement(b("MessengerDialogHeaderReact.bs").make,{children:h._("Mute Conversation")}),i.jsxs(b("MessengerDialogBody.react"),{children:[i.jsx("div",{children:h._("You will continue to receive \u0040mention notifications while muted."),className:"_3-96"}),i.jsxs(c=b("MessengerRadioList.react"),{name:"messengerMuteOptions",onValueChange:function(c){return b("bs_curry")._1(a.send,[c])},selectedValue:d.muteSetting,children:[i.jsx(c.Item,{value:k,children:h._("For 15 minutes")}),i.jsx(c.Item,{value:l,children:h._("For 1 hour")}),i.jsx(c.Item,{value:m,children:h._("For 8 hours")}),i.jsx(c.Item,{value:n,children:h._("For 24 hours")}),i.jsx(c.Item,{value:0,children:h._("Until I turn it back on")})]})]}),i.jsxs(b("MessengerDialogFooter.react"),{children:[i.jsx(b("MessengerDialogCancelButton.react"),{}),i.jsx(b("MessengerDialogButton.react"),{label:h._("Mute"),onClick:function(c){return b("bs_curry")._1(a.send,0)},type:"primary"})]})]})},initialState:function(a){return{muteSetting:k,shown:!0}},retainedProps:o.retainedProps,reducer:function(c,d){if(c)return b("bs_block").__(0,[{muteSetting:c[0],shown:d.shown}]);else return b("bs_block").__(2,[{muteSetting:d.muteSetting,shown:!1},function(c){return b("bs_curry")._1(a,j(c.state.muteSetting))}])},jsElementWrapped:o.jsElementWrapped}}d=0;f.convertMuteToSeconds=j;f.fifteenMinutes=k;f.oneHour=l;f.eightHours=m;f.twentyFourHours=n;f.always=d;f.component=o;f.make=a}),null);
__d("MessengerPageUtils.bs",["MercuryIDs","bs_caml_option","CurrentUser","MercuryDispatcher","MercuryThreadActions","MessengerParticipants.bs","MercuryParticipantTypes"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a!==void 0)return b("bs_caml_option").valFromOption(a).user_type===b("MercuryParticipantTypes").PAGE;else return!1}function a(a){a=a.other_user_fbid;if(a==null)return!1;else return g(b("bs_caml_option").nullable_to_opt(b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a))))}function h(a,c,d){c=b("MessengerParticipants.bs").getNow(c);if(c==null)return 0;else{c=Object.assign({},c);b("MercuryDispatcher").getForFBID(d).handleUpdate(Object.assign({},{participants:[Object.assign(c,{is_messenger_blocked:a})],preprocessed:!0}));return 0}}function c(a,c){var d=b("CurrentUser").getAccountID(),e=a.other_user_fbid;if(e==null)return 0;else if(c){b("MercuryThreadActions").getForFBID(d).unblockOnMessengerDotCom(a.thread_id);return h(!1,b("MercuryIDs").getParticipantIDFromUserID(e),d)}else{b("MercuryThreadActions").getForFBID(d).blockOnMessengerDotCom(a.thread_id);return h(!0,b("MercuryIDs").getParticipantIDFromUserID(e),d)}}f.isPageParticipant=g;f.isPageThread=a;f.changeBlockedStatus=h;f.toggleBlock=c}),null);